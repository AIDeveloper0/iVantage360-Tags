/*! For license information please see main.3f5f20f0.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,r)=>{var n=r(853),s=r(43),i=r(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,g=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var O=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var D=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function A(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case _:return"Suspense";case k:return"SuspenseList";case O:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case S:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:A(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return A(e(t))}catch(T){}}return null}var F=Array.isArray,L=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},z=[],B=-1;function V(e){return{current:e}}function W(e){0>B||(e.current=z[B],z[B]=null,B--)}function U(e,t){B++,z[B]=e.current,e.current=t}var H=V(null),X=V(null),Y=V(null),G=V(null);function q(e,t){switch(U(Y,t),U(X,e),U(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?oh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ah(t=oh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(H),U(H,e)}function $(){W(H),W(X),W(Y)}function K(e){null!==e.memoizedState&&U(G,e);var t=H.current,r=ah(t,e.type);t!==r&&(U(X,e),U(H,r))}function Q(e){X.current===e&&(W(H),W(X)),G.current===e&&(W(G),Kh._currentValue=R)}var J=Object.prototype.hasOwnProperty,Z=n.unstable_scheduleCallback,ee=n.unstable_cancelCallback,te=n.unstable_shouldYield,re=n.unstable_requestPaint,ne=n.unstable_now,se=n.unstable_getCurrentPriorityLevel,ie=n.unstable_ImmediatePriority,oe=n.unstable_UserBlockingPriority,ae=n.unstable_NormalPriority,le=n.unstable_LowPriority,ce=n.unstable_IdlePriority,ue=n.log,he=n.unstable_setDisableYieldValue,de=null,fe=null;function ge(e){if("function"===typeof ue&&he(e),fe&&"function"===typeof fe.setStrictMode)try{fe.setStrictMode(de,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(me(e)/xe|0)|0},me=Math.log,xe=Math.LN2;var ye=256,be=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var s=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&n;return 0!==a?0!==(n=a&~i)?s=ve(n):0!==(o&=a)?s=ve(o):r||0!==(r=a&~e)&&(s=ve(r)):0!==(a=n&~i)?s=ve(a):0!==o?s=ve(o):r||0!==(r=n&~e)&&(s=ve(r)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(r=t&-t)||32===i&&0!==(4194048&r))?t:s}function Se(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=ye;return 0===(4194048&(ye<<=1))&&(ye=256),e}function ke(){var e=be;return 0===(62914560&(be<<=1))&&(be=4194304),e}function je(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-pe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Oe(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-pe(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:hd(e.type)}var Me=Math.random().toString(36).slice(2),Ae="__reactFiber$"+Me,Fe="__reactProps$"+Me,Le="__reactContainer$"+Me,Ie="__reactEvents$"+Me,Re="__reactListeners$"+Me,ze="__reactHandles$"+Me,Be="__reactResources$"+Me,Ve="__reactMarker$"+Me;function We(e){delete e[Ae],delete e[Fe],delete e[Ie],delete e[Re],delete e[ze]}function Ue(e){var t=e[Ae];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Le]||r[Ae]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=wh(e);null!==e;){if(r=e[Ae])return r;e=wh(e)}return t}r=(e=r).parentNode}return null}function He(e){if(e=e[Ae]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ye(e){var t=e[Be];return t||(t=e[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ve]=!0}var qe=new Set,$e={};function Ke(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for($e[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Je,Ze,et=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},rt={};function nt(e,t,r){if(s=t,J.call(rt,s)||!J.call(tt,s)&&(et.test(s)?rt[s]=!0:(tt[s]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var s}function st(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function it(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function ot(e){if(void 0===Je)try{throw Error()}catch(T){var t=T.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Ze=-1<T.stack.indexOf("\n    at")?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Ze}var at=!1;function lt(e,t){if(!e||at)return"";at=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(T){var n=T}Reflect.construct(e,[],r)}else{try{r.call()}catch(s){n=s}e.call(r.prototype)}}else{try{throw Error()}catch(i){n=i}(r=e())&&"function"===typeof r.catch&&r.catch(function(){})}}catch(o){if(o&&n&&"string"===typeof o.stack)return[o.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),o=i[0],a=i[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(s=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(n===l.length||s===c.length)for(n=l.length-1,s=c.length-1;1<=n&&0<=s&&l[n]!==c[s];)s--;for(;1<=n&&0<=s;n--,s--)if(l[n]!==c[s]){if(1!==n||1!==s)do{if(n--,0>--s||l[n]!==c[s]){var u="\n"+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=n&&0<=s);break}}}finally{at=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?ot(r):""}function ct(e){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return ot("Activity");default:return""}}function ut(e){try{var t="";do{t+=ct(e),e=e.return}while(e);return t}catch(T){return"\nError generating stack: "+T.message+"\n"+T.stack}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=dt(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(c){return e.body}}var mt=/[\n"\\]/g;function xt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,r,n,s,i,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ht(t)):null!=r?vt(e,o,ht(r)):null!=n&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ht(a):e.removeAttribute("name")}function bt(e,t,r,n,s,i,o,a){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=r){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;r=null!=r?""+ht(r):"",t=null!=t?""+ht(t):r,a||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:s)&&"symbol"!==typeof n&&!!n,e.checked=a?e.checked:!!n,e.defaultChecked=!!n,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,r){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function wt(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ht(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function St(e,t,r){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ht(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(o(92));if(F(n)){if(1<n.length)throw Error(o(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ht(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function _t(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jt(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"===typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!==typeof r||0===r||kt.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Tt(e,t,r){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&r[s]!==n&&jt(e,s,n)}else for(var i in t)t.hasOwnProperty(i)&&jt(e,i,t[i])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ot=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dt(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var At=null,Ft=null;function Lt(e){var t=He(e);if(t&&(e=t.stateNode)){var r=e[Fe]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=n[Fe]||null;if(!s)throw Error(o(90));yt(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&gt(n)}break e;case"textarea":St(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&wt(e,!!r.multiple,t,!1)}}}var It=!1;function Rt(e,t,r){if(It)return e(t,r);It=!0;try{return e(t)}finally{if(It=!1,(null!==At||null!==Ft)&&(Uc(),At&&(t=At,e=Ft,Ft=At=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function zt(e,t){var r=e.stateNode;if(null===r)return null;var n=r[Fe]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var Bt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Bt)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(c){Vt=!1}var Ut=null,Ht=null,Xt=null;function Yt(){if(Xt)return Xt;var e,t,r=Ht,n=r.length,s="value"in Ut?Ut.value:Ut.textContent,i=s.length;for(e=0;e<n&&r[e]===s[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===s[i-t];t++);return Xt=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function $t(){return!1}function Kt(e){function t(t,r,n,s,i){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?qt:$t,this.isPropagationStopped=$t,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Qt,Jt,Zt,er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=Kt(er),rr=f({},er,{view:0,detail:0}),nr=Kt(rr),sr=f({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Qt=e.screenX-Zt.screenX,Jt=e.screenY-Zt.screenY):Jt=Qt=0,Zt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),ir=Kt(sr),or=Kt(f({},sr,{dataTransfer:0})),ar=Kt(f({},rr,{relatedTarget:0})),lr=Kt(f({},er,{animationName:0,elapsedTime:0,pseudoElement:0})),cr=Kt(f({},er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ur=Kt(f({},er,{data:0})),hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fr[e])&&!!t[e]}function pr(){return gr}var mr=Kt(f({},rr,{key:function(e){if(e.key){var t=hr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),xr=Kt(f({},sr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yr=Kt(f({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr})),br=Kt(f({},er,{propertyName:0,elapsedTime:0,pseudoElement:0})),vr=Kt(f({},sr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wr=Kt(f({},er,{newState:0,oldState:0})),Sr=[9,13,27,32],Cr=Bt&&"CompositionEvent"in window,_r=null;Bt&&"documentMode"in document&&(_r=document.documentMode);var kr=Bt&&"TextEvent"in window&&!_r,jr=Bt&&(!Cr||_r&&8<_r&&11>=_r),Tr=String.fromCharCode(32),Nr=!1;function Or(e,t){switch(e){case"keyup":return-1!==Sr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Er(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dr=!1;var Pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pr[e.type]:"textarea"===t}function Ar(e,t,r,n){At?Ft?Ft.push(n):Ft=[n]:At=n,0<(t=Yu(t,"onChange")).length&&(r=new tr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Fr=null,Lr=null;function Ir(e){Ru(e,0)}function Rr(e){if(gt(Xe(e)))return e}function zr(e,t){if("change"===e)return t}var Br=!1;if(Bt){var Vr;if(Bt){var Wr="oninput"in document;if(!Wr){var Ur=document.createElement("div");Ur.setAttribute("oninput","return;"),Wr="function"===typeof Ur.oninput}Vr=Wr}else Vr=!1;Br=Vr&&(!document.documentMode||9<document.documentMode)}function Hr(){Fr&&(Fr.detachEvent("onpropertychange",Xr),Lr=Fr=null)}function Xr(e){if("value"===e.propertyName&&Rr(Lr)){var t=[];Ar(t,Lr,e,Mt(e)),Rt(Ir,t)}}function Yr(e,t,r){"focusin"===e?(Hr(),Lr=r,(Fr=t).attachEvent("onpropertychange",Xr)):"focusout"===e&&Hr()}function Gr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rr(Lr)}function qr(e,t){if("click"===e)return Rr(t)}function $r(e,t){if("input"===e||"change"===e)return Rr(t)}var Kr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qr(e,t){if(Kr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!J.call(t,s)||!Kr(e[s],t[s]))return!1}return!0}function Jr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zr(e,t){var r,n=Jr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jr(n)}}function en(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?en(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tn(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=pt((e=t.contentWindow).document)}return t}function rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nn=Bt&&"documentMode"in document&&11>=document.documentMode,sn=null,on=null,an=null,ln=!1;function cn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;ln||null==sn||sn!==pt(n)||("selectionStart"in(n=sn)&&rn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&Qr(an,n)||(an=n,0<(n=Yu(on,"onSelect")).length&&(t=new tr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=sn)))}function un(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var hn={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},dn={},fn={};function gn(e){if(dn[e])return dn[e];if(!hn[e])return e;var t,r=hn[e];for(t in r)if(r.hasOwnProperty(t)&&t in fn)return dn[e]=r[t];return e}Bt&&(fn=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);var pn=gn("animationend"),mn=gn("animationiteration"),xn=gn("animationstart"),yn=gn("transitionrun"),bn=gn("transitionstart"),vn=gn("transitioncancel"),wn=gn("transitionend"),Sn=new Map,Cn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(e,t){Sn.set(e,t),Ke(t,[e])}Cn.push("scrollEnd");var kn=new WeakMap;function jn(e,t){if("object"===typeof e&&null!==e){var r=kn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:ut(t)},kn.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var Tn=[],Nn=0,On=0;function En(){for(var e=Nn,t=On=Nn=0;t<e;){var r=Tn[t];Tn[t++]=null;var n=Tn[t];Tn[t++]=null;var s=Tn[t];Tn[t++]=null;var i=Tn[t];if(Tn[t++]=null,null!==n&&null!==s){var o=n.pending;null===o?s.next=s:(s.next=o.next,o.next=s),n.pending=s}0!==i&&An(r,s,i)}}function Dn(e,t,r,n){Tn[Nn++]=e,Tn[Nn++]=t,Tn[Nn++]=r,Tn[Nn++]=n,On|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Pn(e,t,r,n){return Dn(e,t,r,n),Fn(e)}function Mn(e,t){return Dn(e,null,null,t),Fn(e)}function An(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var s=!1,i=e.return;null!==i;)i.childLanes|=r,null!==(n=i.alternate)&&(n.childLanes|=r),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-pe(r),null===(n=(e=i.hiddenUpdates)[s])?e[s]=[t]:n.push(t),t.lane=536870912|r),i):null}function Fn(e){if(50<Ac)throw Ac=0,Fc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ln={};function In(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,t,r,n){return new In(e,t,r,n)}function zn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bn(e,t){var r=e.alternate;return null===r?((r=Rn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Vn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wn(e,t,r,n,s,i){var a=0;if(n=e,"function"===typeof e)zn(e)&&(a=1);else if("string"===typeof e)a=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,r,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case O:return(e=Rn(31,r,t,s)).elementType=O,e.lanes=i,e;case x:return Un(r.children,s,i,t);case y:a=8,s|=24;break;case b:return(e=Rn(12,r,t,2|s)).elementType=b,e.lanes=i,e;case _:return(e=Rn(13,r,t,s)).elementType=_,e.lanes=i,e;case k:return(e=Rn(19,r,t,s)).elementType=k,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case v:case S:a=10;break e;case w:a=9;break e;case C:a=11;break e;case j:a=14;break e;case N:a=16,n=null;break e}a=29,r=Error(o(130,null===e?"null":typeof e,"")),n=null}return(t=Rn(a,r,t,s)).elementType=e,t.type=n,t.lanes=i,t}function Un(e,t,r,n){return(e=Rn(7,e,n,t)).lanes=r,e}function Hn(e,t,r){return(e=Rn(6,e,null,t)).lanes=r,e}function Xn(e,t,r){return(t=Rn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yn=[],Gn=0,qn=null,$n=0,Kn=[],Qn=0,Jn=null,Zn=1,es="";function ts(e,t){Yn[Gn++]=$n,Yn[Gn++]=qn,qn=e,$n=t}function rs(e,t,r){Kn[Qn++]=Zn,Kn[Qn++]=es,Kn[Qn++]=Jn,Jn=e;var n=Zn;e=es;var s=32-pe(n)-1;n&=~(1<<s),r+=1;var i=32-pe(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Zn=1<<32-pe(t)+s|r<<s|n,es=i+e}else Zn=1<<i|r<<s|n,es=e}function ns(e){null!==e.return&&(ts(e,1),rs(e,1,0))}function ss(e){for(;e===qn;)qn=Yn[--Gn],Yn[Gn]=null,$n=Yn[--Gn],Yn[Gn]=null;for(;e===Jn;)Jn=Kn[--Qn],Kn[Qn]=null,es=Kn[--Qn],Kn[Qn]=null,Zn=Kn[--Qn],Kn[Qn]=null}var is=null,os=null,as=!1,ls=null,cs=!1,us=Error(o(519));function hs(e){throw xs(jn(Error(o(418,"")),e)),us}function ds(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Ae]=e,t[Fe]=n,r){case"dialog":zu("cancel",t),zu("close",t);break;case"iframe":case"object":case"embed":zu("load",t);break;case"video":case"audio":for(r=0;r<Lu.length;r++)zu(Lu[r],t);break;case"source":zu("error",t);break;case"img":case"image":case"link":zu("error",t),zu("load",t);break;case"details":zu("toggle",t);break;case"input":zu("invalid",t),bt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ft(t);break;case"select":zu("invalid",t);break;case"textarea":zu("invalid",t),Ct(t,n.value,n.defaultValue,n.children),ft(t)}"string"!==typeof(r=n.children)&&"number"!==typeof r&&"bigint"!==typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Ju(t.textContent,r)?(null!=n.popover&&(zu("beforetoggle",t),zu("toggle",t)),null!=n.onScroll&&zu("scroll",t),null!=n.onScrollEnd&&zu("scrollend",t),null!=n.onClick&&(t.onclick=Zu),t=!0):t=!1,t||hs(e)}function fs(e){for(is=e.return;is;)switch(is.tag){case 5:case 13:return void(cs=!1);case 27:case 3:return void(cs=!0);default:is=is.return}}function gs(e){if(e!==is)return!1;if(!as)return fs(e),as=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||lh(e.type,e.memoizedProps)),t=!t),t&&os&&hs(e),fs(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){os=bh(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}os=null}}else 27===r?(r=os,ph(e.type)?(e=vh,vh=null,os=e):os=r):os=is?bh(e.stateNode.nextSibling):null;return!0}function ps(){os=is=null,as=!1}function ms(){var e=ls;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),ls=null),e}function xs(e){null===ls?ls=[e]:ls.push(e)}var ys=V(null),bs=null,vs=null;function ws(e,t,r){U(ys,t._currentValue),t._currentValue=r}function Ss(e){e._currentValue=ys.current,W(ys)}function Cs(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function _s(e,t,r,n){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var a=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),Cs(i.return,r,e),n||(a=null);break e}i=l.next}}else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=r,null!==(i=a.alternate)&&(i.lanes|=r),Cs(a,r,e),a=null}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}function ks(e,t,r,n){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var a=s.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=s.type;Kr(s.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(a=s.alternate))throw Error(o(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Kh):e=[Kh])}s=s.return}null!==e&&_s(t,e,r,n),t.flags|=262144}function js(e){for(e=e.firstContext;null!==e;){if(!Kr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ts(e){bs=e,vs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ns(e){return Es(bs,e)}function Os(e,t){return null===bs&&Ts(e),Es(e,t)}function Es(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===vs){if(null===e)throw Error(o(308));vs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vs=vs.next=t;return r}var Ds="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ps=n.unstable_scheduleCallback,Ms=n.unstable_NormalPriority,As={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fs(){return{controller:new Ds,data:new Map,refCount:0}}function Ls(e){e.refCount--,0===e.refCount&&Ps(Ms,function(){e.controller.abort()})}var Is=null,Rs=0,zs=0,Bs=null;function Vs(){if(0===--Rs&&null!==Is){null!==Bs&&(Bs.status="fulfilled");var e=Is;Is=null,zs=0,Bs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ws=L.S;L.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Is){var r=Is=[];Rs=0,zs=Du(),Bs={status:"pending",value:void 0,then:function(e){r.push(e)}}}Rs++,t.then(Vs,Vs)}(0,t),null!==Ws&&Ws(e,t)};var Us=V(null);function Hs(){var e=Us.current;return null!==e?e:ic.pooledCache}function Xs(e,t){U(Us,null===t?Us.current:t.pool)}function Ys(){var e=Hs();return null===e?null:{parent:As._currentValue,pool:e}}var Gs=Error(o(460)),qs=Error(o(474)),$s=Error(o(542)),Ks={then:function(){}};function Qs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Js(){}function Zs(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Js,Js),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ri(e=t.reason),e;default:if("string"===typeof t.status)t.then(Js,Js);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ri(e=t.reason),e}throw ei=t,Gs}}var ei=null;function ti(){if(null===ei)throw Error(o(459));var e=ei;return ei=null,e}function ri(e){if(e===Gs||e===$s)throw Error(o(483))}var ni=!1;function si(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ai(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&sc)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Fn(e),An(e,null,r),t}return Dn(e,n,t,r),Fn(e)}function li(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Oe(e,r)}}function ci(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===i?s=i=o:i=i.next=o,r=r.next}while(null!==r);null===i?s=i=t:i=i.next=t}else s=i=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var ui=!1;function hi(){if(ui){if(null!==Bs)throw Bs}}function di(e,t,r,n){ui=!1;var s=e.updateQueue;ni=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(o=0,u=c=l=null,a=i;;){var d=-536870913&a.lane,g=d!==a.lane;if(g?(ac&d)===d:(n&d)===d){0!==d&&d===zs&&(ui=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=e,m=a;d=t;var x=r;switch(m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(x,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(x,h,d):p)||void 0===d)break e;h=f({},h,d);break e;case 2:ni=!0}}null!==(d=a.callback)&&(e.flags|=64,g&&(e.flags|=8192),null===(g=s.callbacks)?s.callbacks=[d]:g.push(d))}else g={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=g,l=h):u=u.next=g,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(g=a).next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),pc|=o,e.lanes=o,e.memoizedState=h}}function fi(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function gi(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)fi(r[e],t)}var pi=V(null),mi=V(0);function xi(e,t){U(mi,e=fc),U(pi,t),fc=e|t.baseLanes}function yi(){U(mi,fc),U(pi,pi.current)}function bi(){fc=mi.current,W(pi),W(mi)}var vi=0,wi=null,Si=null,Ci=null,_i=!1,ki=!1,ji=!1,Ti=0,Ni=0,Oi=null,Ei=0;function Di(){throw Error(o(321))}function Pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Kr(e[r],t[r]))return!1;return!0}function Mi(e,t,r,n,s,i){return vi=i,wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?qo:$o,ji=!1,i=r(n,s),ji=!1,ki&&(i=Fi(t,r,n,s)),Ai(e),i}function Ai(e){L.H=Go;var t=null!==Si&&null!==Si.next;if(vi=0,Ci=Si=wi=null,_i=!1,Ni=0,Oi=null,t)throw Error(o(300));null===e||Oa||null!==(e=e.dependencies)&&js(e)&&(Oa=!0)}function Fi(e,t,r,n){wi=e;var s=0;do{if(ki&&(Oi=null),Ni=0,ki=!1,25<=s)throw Error(o(301));if(s+=1,Ci=Si=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}L.H=Ko,i=t(r,n)}while(ki);return i}function Li(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?Wi(t):t,e=e.useState()[0],(null!==Si?Si.memoizedState:null)!==e&&(wi.flags|=1024),t}function Ii(){var e=0!==Ti;return Ti=0,e}function Ri(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function zi(e){if(_i){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}_i=!1}vi=0,Ci=Si=wi=null,ki=!1,Ni=Ti=0,Oi=null}function Bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ci?wi.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function Vi(){if(null===Si){var e=wi.alternate;e=null!==e?e.memoizedState:null}else e=Si.next;var t=null===Ci?wi.memoizedState:Ci.next;if(null!==t)Ci=t,Si=e;else{if(null===e){if(null===wi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Si=e).memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},null===Ci?wi.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function Wi(e){var t=Ni;return Ni+=1,null===Oi&&(Oi=[]),e=Zs(Oi,e,t),t=wi,null===(null===Ci?t.memoizedState:Ci.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?qo:$o),e}function Ui(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Wi(e);if(e.$$typeof===S)return Ns(e)}throw Error(o(438,String(e)))}function Hi(e){var t=null,r=wi.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=wi.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=E;return t.index++,r}function Xi(e,t){return"function"===typeof t?t(e):t}function Yi(e){return Gi(Vi(),Si,e)}function Gi(e,t,r){var n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=r;var s=e.baseQueue,i=n.pending;if(null!==i){if(null!==s){var a=s.next;s.next=i.next,i.next=a}t.baseQueue=s=i,n.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=a=null,c=null,u=t=s.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(ac&d)===d:(vi&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===zs&&(h=!0);else{if((vi&f)===f){u=u.next,f===zs&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=i):c=c.next=d,wi.lanes|=f,pc|=f}d=u.action,ji&&r(i,d),i=u.hasEagerState?u.eagerState:r(i,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=i):c=c.next=f,wi.lanes|=d,pc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=i:c.next=l,!Kr(i,e.memoizedState)&&(Oa=!0,h&&null!==(r=Bs)))throw r;e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}return null===s&&(n.lanes=0),[e.memoizedState,n.dispatch]}function qi(e){var t=Vi(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(null!==s){r.pending=null;var a=s=s.next;do{i=e(i,a.action),a=a.next}while(a!==s);Kr(i,t.memoizedState)||(Oa=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function $i(e,t,r){var n=wi,s=Vi(),i=as;if(i){if(void 0===r)throw Error(o(407));r=r()}else r=t();var a=!Kr((Si||s).memoizedState,r);if(a&&(s.memoizedState=r,Oa=!0),s=s.queue,bo(2048,8,Ji.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||null!==Ci&&1&Ci.memoizedState.tag){if(n.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Qi.bind(null,n,s,r,t),null),null===ic)throw Error(o(349));i||0!==(124&vi)||Ki(n,t,r)}return r}function Ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=wi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Qi(e,t,r,n){t.value=r,t.getSnapshot=n,Zi(t)&&eo(e)}function Ji(e,t,r){return r(function(){Zi(t)&&eo(e)})}function Zi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Kr(e,r)}catch(n){return!0}}function eo(e){var t=Mn(e,2);null!==t&&Rc(t,e,2)}function to(e){var t=Bi();if("function"===typeof e){var r=e;if(e=r(),ji){ge(!0);try{r()}finally{ge(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:e},t}function ro(e,t,r,n){return e.baseState=r,Gi(e,Si,"function"===typeof n?n:Xi)}function no(e,t,r,n,s){if(Ho(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==L.T?r(!0):i.isTransition=!1,n(i),null===(r=t.pending)?(i.next=t.pending=i,so(t,i)):(i.next=r.next,t.pending=r.next=i)}}function so(e,t){var r=t.action,n=t.payload,s=e.state;if(t.isTransition){var i=L.T,o={};L.T=o;try{var a=r(s,n),l=L.S;null!==l&&l(o,a),io(e,t,a)}catch(c){ao(e,t,c)}finally{L.T=i}}else try{io(e,t,i=r(s,n))}catch(u){ao(e,t,u)}}function io(e,t,r){null!==r&&"object"===typeof r&&"function"===typeof r.then?r.then(function(r){oo(e,t,r)},function(r){return ao(e,t,r)}):oo(e,t,r)}function oo(e,t,r){t.status="fulfilled",t.value=r,lo(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,so(e,r)))}function ao(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,lo(t),t=t.next}while(t!==n)}e.action=null}function lo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function co(e,t){return t}function uo(e,t){if(as){var r=ic.formState;if(null!==r){e:{var n=wi;if(as){if(os){t:{for(var s=os,i=cs;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=bh(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){os=bh(s.nextSibling),n="F!"===s.data;break e}}hs(n)}n=!1}n&&(t=r[0])}}return(r=Bi()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:t},r.queue=n,r=Vo.bind(null,wi,n),n.dispatch=r,n=to(!1),i=Uo.bind(null,wi,!1,n.queue),s={state:t,dispatch:null,action:e,pending:null},(n=Bi()).queue=s,r=no.bind(null,wi,s,i,r),s.dispatch=r,n.memoizedState=e,[t,r,!1]}function ho(e){return fo(Vi(),Si,e)}function fo(e,t,r){if(t=Gi(e,t,co)[0],e=Yi(Xi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=Wi(t)}catch(T){if(T===Gs)throw $s;throw T}else n=t;var s=(t=Vi()).queue,i=s.dispatch;return r!==t.memoizedState&&(wi.flags|=2048,mo(9,{destroy:void 0,resource:void 0},go.bind(null,s,r),null)),[n,i,e]}function go(e,t){e.action=t}function po(e){var t=Vi(),r=Si;if(null!==r)return fo(t,r,e);Vi(),t=t.memoizedState;var n=(r=Vi()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function mo(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=wi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function xo(){return Vi().memoizedState}function yo(e,t,r,n){var s=Bi();n=void 0===n?null:n,wi.flags|=e,s.memoizedState=mo(1|t,{destroy:void 0,resource:void 0},r,n)}function bo(e,t,r,n){var s=Vi();n=void 0===n?null:n;var i=s.memoizedState.inst;null!==Si&&null!==n&&Pi(n,Si.memoizedState.deps)?s.memoizedState=mo(t,i,r,n):(wi.flags|=e,s.memoizedState=mo(1|t,i,r,n))}function vo(e,t){yo(8390656,8,e,t)}function wo(e,t){bo(2048,8,e,t)}function So(e,t){return bo(4,2,e,t)}function Co(e,t){return bo(4,4,e,t)}function _o(e,t){if("function"===typeof t){e=e();var r=t(e);return function(){"function"===typeof r?r():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ko(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,bo(4,4,_o.bind(null,t,e),r)}function jo(){}function To(e,t){var r=Vi();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Pi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function No(e,t){var r=Vi();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Pi(t,n[1]))return n[0];if(n=e(),ji){ge(!0);try{e()}finally{ge(!1)}}return r.memoizedState=[n,t],n}function Oo(e,t,r){return void 0===r||0!==(1073741824&vi)?e.memoizedState=t:(e.memoizedState=r,e=Ic(),wi.lanes|=e,pc|=e,r)}function Eo(e,t,r,n){return Kr(r,t)?r:null!==pi.current?(e=Oo(e,r,n),Kr(e,t)||(Oa=!0),e):0===(42&vi)?(Oa=!0,e.memoizedState=r):(e=Ic(),wi.lanes|=e,pc|=e,t)}function Do(e,t,r,n,s){var i=I.p;I.p=0!==i&&8>i?i:8;var o=L.T,a={};L.T=a,Uo(e,!1,t,r);try{var l=s(),c=L.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(e){r.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<r.length;e++)(0,r[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)}),n}(l,n);Wo(e,t,u,Lc())}else Wo(e,t,n,Lc())}catch(h){Wo(e,t,{then:function(){},status:"rejected",reason:h},Lc())}finally{I.p=i,L.T=o}}function Po(){}function Mo(e,t,r,n){if(5!==e.tag)throw Error(o(476));var s=Ao(e).queue;Do(e,s,t,R,null===r?Po:function(){return Fo(e),r(n)})}function Ao(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:R},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Fo(e){Wo(e,Ao(e).next.queue,{},Lc())}function Lo(){return Ns(Kh)}function Io(){return Vi().memoizedState}function Ro(){return Vi().memoizedState}function zo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Lc(),n=ai(t,e=oi(r),r);return null!==n&&(Rc(n,t,r),li(n,t,r)),t={cache:Fs()},void(e.payload=t)}t=t.return}}function Bo(e,t,r){var n=Lc();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ho(e)?Xo(t,r):null!==(r=Pn(e,t,r,n))&&(Rc(r,e,n),Yo(r,t,n))}function Vo(e,t,r){Wo(e,t,r,Lc())}function Wo(e,t,r,n){var s={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ho(e))Xo(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,Kr(a,o))return Dn(e,t,s,0),null===ic&&En(),!1}catch(l){}if(null!==(r=Pn(e,t,s,n)))return Rc(r,e,n),Yo(r,t,n),!0}return!1}function Uo(e,t,r,n){if(n={lane:2,revertLane:Du(),action:n,hasEagerState:!1,eagerState:null,next:null},Ho(e)){if(t)throw Error(o(479))}else null!==(t=Pn(e,r,n,2))&&Rc(t,e,2)}function Ho(e){var t=e.alternate;return e===wi||null!==t&&t===wi}function Xo(e,t){ki=_i=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Yo(e,t,r){if(0!==(4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Oe(e,r)}}var Go={readContext:Ns,use:Ui,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useLayoutEffect:Di,useInsertionEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useSyncExternalStore:Di,useId:Di,useHostTransitionStatus:Di,useFormState:Di,useActionState:Di,useOptimistic:Di,useMemoCache:Di,useCacheRefresh:Di},qo={readContext:Ns,use:Ui,useCallback:function(e,t){return Bi().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:vo,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,yo(4194308,4,_o.bind(null,t,e),r)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var r=Bi();t=void 0===t?null:t;var n=e();if(ji){ge(!0);try{e()}finally{ge(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Bi();if(void 0!==r){var s=r(t);if(ji){ge(!0);try{r(t)}finally{ge(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=Bo.bind(null,wi,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Bi().memoizedState=e},useState:function(e){var t=(e=to(e)).queue,r=Vo.bind(null,wi,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:jo,useDeferredValue:function(e,t){return Oo(Bi(),e,t)},useTransition:function(){var e=to(!1);return e=Do.bind(null,wi,e.queue,!0,!1),Bi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=wi,s=Bi();if(as){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===ic)throw Error(o(349));0!==(124&ac)||Ki(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,vo(Ji.bind(null,n,i,e),[e]),n.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Qi.bind(null,n,i,r,t),null),r},useId:function(){var e=Bi(),t=ic.identifierPrefix;if(as){var r=es;t="\xab"+t+"R"+(r=(Zn&~(1<<32-pe(Zn)-1)).toString(32)+r),0<(r=Ti++)&&(t+="H"+r.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(r=Ei++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Lo,useFormState:uo,useActionState:uo,useOptimistic:function(e){var t=Bi();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Uo.bind(null,wi,!0,r),r.dispatch=t,[e,t]},useMemoCache:Hi,useCacheRefresh:function(){return Bi().memoizedState=zo.bind(null,wi)}},$o={readContext:Ns,use:Ui,useCallback:To,useContext:Ns,useEffect:wo,useImperativeHandle:ko,useInsertionEffect:So,useLayoutEffect:Co,useMemo:No,useReducer:Yi,useRef:xo,useState:function(){return Yi(Xi)},useDebugValue:jo,useDeferredValue:function(e,t){return Eo(Vi(),Si.memoizedState,e,t)},useTransition:function(){var e=Yi(Xi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:Wi(e),t]},useSyncExternalStore:$i,useId:Io,useHostTransitionStatus:Lo,useFormState:ho,useActionState:ho,useOptimistic:function(e,t){return ro(Vi(),0,e,t)},useMemoCache:Hi,useCacheRefresh:Ro},Ko={readContext:Ns,use:Ui,useCallback:To,useContext:Ns,useEffect:wo,useImperativeHandle:ko,useInsertionEffect:So,useLayoutEffect:Co,useMemo:No,useReducer:qi,useRef:xo,useState:function(){return qi(Xi)},useDebugValue:jo,useDeferredValue:function(e,t){var r=Vi();return null===Si?Oo(r,e,t):Eo(r,Si.memoizedState,e,t)},useTransition:function(){var e=qi(Xi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:Wi(e),t]},useSyncExternalStore:$i,useId:Io,useHostTransitionStatus:Lo,useFormState:po,useActionState:po,useOptimistic:function(e,t){var r=Vi();return null!==Si?ro(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Hi,useCacheRefresh:Ro},Qo=null,Jo=0;function Zo(e){var t=Jo;return Jo+=1,null===Qo&&(Qo=[]),Zs(Qo,e,t)}function ea(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ta(e,t){if(t.$$typeof===g)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ra(e){return(0,e._init)(e._payload)}function na(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Bn(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Hn(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===x?h(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&ra(i)===t.type)?(ea(t=s(t,r.props),r),t.return=e,t):(ea(t=Wn(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Xn(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function h(e,t,r,n,i){return null===t||7!==t.tag?((t=Un(r,e.mode,n,i)).return=e,t):((t=s(t,r)).return=e,t)}function d(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hn(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return ea(r=Wn(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case m:return(t=Xn(t,e.mode,r)).return=e,t;case N:return d(e,t=(0,t._init)(t._payload),r)}if(F(t)||P(t))return(t=Un(t,e.mode,r,null)).return=e,t;if("function"===typeof t.then)return d(e,Zo(t),r);if(t.$$typeof===S)return d(e,Os(e,t),r);ta(e,t)}return null}function f(e,t,r,n){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return null!==s?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return r.key===s?c(e,t,r,n):null;case m:return r.key===s?u(e,t,r,n):null;case N:return f(e,t,r=(s=r._init)(r._payload),n)}if(F(r)||P(r))return null!==s?null:h(e,t,r,n,null);if("function"===typeof r.then)return f(e,t,Zo(r),n);if(r.$$typeof===S)return f(e,t,Os(e,r),n);ta(e,r)}return null}function g(e,t,r,n,s){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(r)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case m:return u(t,e=e.get(null===n.key?r:n.key)||null,n,s);case N:return g(e,t,r,n=(0,n._init)(n._payload),s)}if(F(n)||P(n))return h(t,e=e.get(r)||null,n,s,null);if("function"===typeof n.then)return g(e,t,r,Zo(n),s);if(n.$$typeof===S)return g(e,t,r,Os(t,n),s);ta(t,n)}return null}function y(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===x&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===x){if(7===c.tag){r(l,c.sibling),(h=s(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&ra(b)===c.type){r(l,c.sibling),ea(h=s(c,u.props),u),h.return=l,l=h;break e}r(l,c);break}t(l,c),c=c.sibling}u.type===x?((h=Un(u.props.children,l.mode,h,u.key)).return=l,l=h):(ea(h=Wn(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(h=s(c,u.children||[])).return=l,l=h;break e}r(l,c);break}t(l,c),c=c.sibling}(h=Xn(u,l.mode,h)).return=l,l=h}return a(l);case N:return y(l,c,u=(b=u._init)(u._payload),h)}if(F(u))return function(s,o,a,l){for(var c=null,u=null,h=o,p=o=0,m=null;null!==h&&p<a.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var x=f(s,h,a[p],l);if(null===x){null===h&&(h=m);break}e&&h&&null===x.alternate&&t(s,h),o=i(x,o,p),null===u?c=x:u.sibling=x,u=x,h=m}if(p===a.length)return r(s,h),as&&ts(s,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(s,a[p],l))&&(o=i(h,o,p),null===u?c=h:u.sibling=h,u=h);return as&&ts(s,p),c}for(h=n(h);p<a.length;p++)null!==(m=g(h,s,p,a[p],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),o=i(m,o,p),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(s,e)}),as&&ts(s,p),c}(l,c,u,h);if(P(u)){if("function"!==typeof(b=P(u)))throw Error(o(150));return function(s,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,p=a,m=a=0,x=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(x=p,p=null):x=p.sibling;var b=f(s,p,y.value,c);if(null===b){null===p&&(p=x);break}e&&p&&null===b.alternate&&t(s,p),a=i(b,a,m),null===h?u=b:h.sibling=b,h=b,p=x}if(y.done)return r(s,p),as&&ts(s,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=d(s,y.value,c))&&(a=i(y,a,m),null===h?u=y:h.sibling=y,h=y);return as&&ts(s,m),u}for(p=n(p);!y.done;m++,y=l.next())null!==(y=g(p,s,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=i(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&p.forEach(function(e){return t(s,e)}),as&&ts(s,m),u}(l,c,u=b.call(u),h)}if("function"===typeof u.then)return y(l,c,Zo(u),h);if(u.$$typeof===S)return y(l,c,Os(l,u),h);ta(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(h=s(c,u)).return=l,l=h):(r(l,c),(h=Hn(u,l.mode,h)).return=l,l=h),a(l)):r(l,c)}return function(e,t,r,n){try{Jo=0;var s=y(e,t,r,n);return Qo=null,s}catch(T){if(T===Gs||T===$s)throw T;var i=Rn(29,T,null,e.mode);return i.lanes=n,i.return=e,i}}}var sa=na(!0),ia=na(!1),oa=V(null),aa=null;function la(e){var t=e.alternate;U(da,1&da.current),U(oa,e),null===aa&&(null===t||null!==pi.current||null!==t.memoizedState)&&(aa=e)}function ca(e){if(22===e.tag){if(U(da,da.current),U(oa,e),null===aa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(aa=e)}}else ua()}function ua(){U(da,da.current),U(oa,oa.current)}function ha(e){W(oa),aa===e&&(aa=null),W(da)}var da=V(0);function fa(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||yh(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ga(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:f({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var pa={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Lc(),s=oi(n);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=ai(e,s,n))&&(Rc(t,e,n),li(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Lc(),s=oi(n);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=ai(e,s,n))&&(Rc(t,e,n),li(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Lc(),n=oi(r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=ai(e,n,r))&&(Rc(t,e,r),li(t,e,r))}};function ma(e,t,r,n,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Qr(r,n)||!Qr(s,i))}function xa(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ya(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var s in r===t&&(r=f({},r)),e)void 0===r[s]&&(r[s]=e[s]);return r}var ba="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ba(e)}function wa(e){console.error(e)}function Sa(e){ba(e)}function Ca(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function _a(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function ka(e,t,r){return(r=oi(r)).tag=3,r.payload={element:null},r.callback=function(){Ca(e,t)},r}function ja(e){return(e=oi(e)).tag=3,e}function Ta(e,t,r,n){var s=r.type.getDerivedStateFromError;if("function"===typeof s){var i=n.value;e.payload=function(){return s(i)},e.callback=function(){_a(t,r,n)}}var o=r.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){_a(t,r,n),"function"!==typeof s&&(null===jc?jc=new Set([this]):jc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Na=Error(o(461)),Oa=!1;function Ea(e,t,r,n){t.child=null===e?ia(t,null,r,n):sa(t,e.child,r,n)}function Da(e,t,r,n,s){r=r.render;var i=t.ref;if("ref"in n){var o={};for(var a in n)"ref"!==a&&(o[a]=n[a])}else o=n;return Ts(t),n=Mi(e,t,r,o,i,s),a=Ii(),null===e||Oa?(as&&a&&ns(t),t.flags|=1,Ea(e,t,n,s),t.child):(Ri(e,t,s),Qa(e,t,s))}function Pa(e,t,r,n,s){if(null===e){var i=r.type;return"function"!==typeof i||zn(i)||void 0!==i.defaultProps||null!==r.compare?((e=Wn(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ma(e,t,i,n,s))}if(i=e.child,!Ja(e,s)){var o=i.memoizedProps;if((r=null!==(r=r.compare)?r:Qr)(o,n)&&e.ref===t.ref)return Qa(e,t,s)}return t.flags|=1,(e=Bn(i,n)).ref=t.ref,e.return=t,t.child=e}function Ma(e,t,r,n,s){if(null!==e){var i=e.memoizedProps;if(Qr(i,n)&&e.ref===t.ref){if(Oa=!1,t.pendingProps=n=i,!Ja(e,s))return t.lanes=e.lanes,Qa(e,t,s);0!==(131072&e.flags)&&(Oa=!0)}}return Ia(e,t,r,n,s)}function Aa(e,t,r){var n=t.pendingProps,s=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0!==(128&t.flags)){if(n=null!==i?i.baseLanes|r:r,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return Fa(e,t,n,r)}if(0===(536870912&r))return t.lanes=t.childLanes=536870912,Fa(e,t,null!==i?i.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xs(0,null!==i?i.cachePool:null),null!==i?xi(t,i):yi(),ca(t)}else null!==i?(Xs(0,i.cachePool),xi(t,i),ua(),t.memoizedState=null):(null!==e&&Xs(0,null),yi(),ua());return Ea(e,t,s,r),t.child}function Fa(e,t,r,n){var s=Hs();return s=null===s?null:{parent:As._currentValue,pool:s},t.memoizedState={baseLanes:r,cachePool:s},null!==e&&Xs(0,null),yi(),ca(t),null!==e&&ks(e,t,n,!0),null}function La(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof r&&"object"!==typeof r)throw Error(o(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Ia(e,t,r,n,s){return Ts(t),r=Mi(e,t,r,n,void 0,s),n=Ii(),null===e||Oa?(as&&n&&ns(t),t.flags|=1,Ea(e,t,r,s),t.child):(Ri(e,t,s),Qa(e,t,s))}function Ra(e,t,r,n,s,i){return Ts(t),t.updateQueue=null,r=Fi(t,n,r,s),Ai(e),n=Ii(),null===e||Oa?(as&&n&&ns(t),t.flags|=1,Ea(e,t,r,i),t.child):(Ri(e,t,i),Qa(e,t,i))}function za(e,t,r,n,s){if(Ts(t),null===t.stateNode){var i=Ln,o=r.contextType;"object"===typeof o&&null!==o&&(i=Ns(o)),i=new r(n,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=pa,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=n,i.state=t.memoizedState,i.refs={},si(t),o=r.contextType,i.context="object"===typeof o&&null!==o?Ns(o):Ln,i.state=t.memoizedState,"function"===typeof(o=r.getDerivedStateFromProps)&&(ga(t,r,o,n),i.state=t.memoizedState),"function"===typeof r.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&pa.enqueueReplaceState(i,i.state,null),di(t,n,i,s),hi(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){i=t.stateNode;var a=t.memoizedProps,l=ya(r,a);i.props=l;var c=i.context,u=r.contextType;o=Ln,"object"===typeof u&&null!==u&&(o=Ns(u));var h=r.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a||c!==o)&&xa(t,i,n,o),ni=!1;var d=t.memoizedState;i.state=d,di(t,n,i,s),hi(),c=t.memoizedState,a||d!==c||ni?("function"===typeof h&&(ga(t,r,h,n),c=t.memoizedState),(l=ni||ma(t,r,l,n,d,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=o,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ii(e,t),u=ya(r,o=t.memoizedProps),i.props=u,h=t.pendingProps,d=i.context,c=r.contextType,l=Ln,"object"===typeof c&&null!==c&&(l=Ns(c)),(c="function"===typeof(a=r.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==h||d!==l)&&xa(t,i,n,l),ni=!1,d=t.memoizedState,i.state=d,di(t,n,i,s),hi();var f=t.memoizedState;o!==h||d!==f||ni||null!==e&&null!==e.dependencies&&js(e.dependencies)?("function"===typeof a&&(ga(t,r,a,n),f=t.memoizedState),(u=ni||ma(t,r,u,n,d,f,l)||null!==e&&null!==e.dependencies&&js(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),i.props=n,i.state=f,i.context=l,n=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,La(e,t),n=0!==(128&t.flags),i||n?(i=t.stateNode,r=n&&"function"!==typeof r.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&n?(t.child=sa(t,e.child,null,s),t.child=sa(t,null,r,s)):Ea(e,t,r,s),t.memoizedState=i.state,e=t.child):e=Qa(e,t,s),e}function Ba(e,t,r,n){return ps(),t.flags|=256,Ea(e,t,r,n),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wa(e){return{baseLanes:e,cachePool:Ys()}}function Ua(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=yc),e}function Ha(e,t,r){var n,s=t.pendingProps,i=!1,a=0!==(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&0!==(2&da.current)),n&&(i=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(as){if(i?la(t):ua(),as){var l,c=os;if(l=c){e:{for(l=c,c=cs;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=bh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Jn?{id:Zn,overflow:es}:null,retryLane:536870912,hydrationErrors:null},(l=Rn(18,null,null,0)).stateNode=c,l.return=t,t.child=l,is=t,os=null,l=!0):l=!1}l||hs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yh(c)?t.lanes=32:t.lanes=536870912,null;ha(t)}return c=s.children,s=s.fallback,i?(ua(),c=Ya({mode:"hidden",children:c},i=t.mode),s=Un(s,i,r,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=Wa(r),i.childLanes=Ua(e,n,r),t.memoizedState=Va,s):(la(t),Xa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(la(t),t.flags&=-257,t=Ga(e,t,r)):null!==t.memoizedState?(ua(),t.child=e.child,t.flags|=128,t=null):(ua(),i=s.fallback,c=t.mode,s=Ya({mode:"visible",children:s.children},c),(i=Un(i,c,r,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,sa(t,e.child,null,r),(s=t.child).memoizedState=Wa(r),s.childLanes=Ua(e,n,r),t.memoizedState=Va,t=i);else if(la(t),yh(c)){if(n=c.nextSibling&&c.nextSibling.dataset)var u=n.dgst;n=u,(s=Error(o(419))).stack="",s.digest=n,xs({value:s,source:null,stack:null}),t=Ga(e,t,r)}else if(Oa||ks(e,t,r,!1),n=0!==(r&e.childLanes),Oa||n){if(null!==(n=ic)&&(0!==(s=0!==((s=0!==(42&(s=r&-r))?1:Ee(s))&(n.suspendedLanes|r))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Mn(e,s),Rc(n,e,s),Na;"$?"===c.data||$c(),t=Ga(e,t,r)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,os=bh(c.nextSibling),is=t,as=!0,ls=null,cs=!1,null!==e&&(Kn[Qn++]=Zn,Kn[Qn++]=es,Kn[Qn++]=Jn,Zn=e.id,es=e.overflow,Jn=t),(t=Xa(t,s.children)).flags|=4096);return t}return i?(ua(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Bn(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Bn(u,i):(i=Un(i,c,r,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=Wa(r):(null!==(l=c.cachePool)?(u=As._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ys(),c={baseLanes:c.baseLanes|r,cachePool:l}),i.memoizedState=c,i.childLanes=Ua(e,n,r),t.memoizedState=Va,s):(la(t),e=(r=e.child).sibling,(r=Bn(r,{mode:"visible",children:s.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function Xa(e,t){return(t=Ya({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ya(e,t){return(e=Rn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ga(e,t,r){return sa(t,e.child,null,r),(e=Xa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Cs(e.return,t,r)}function $a(e,t,r,n,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Ka(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ea(e,t,n.children,r),0!==(2&(n=da.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,r,t);else if(19===e.tag)qa(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(U(da,n),s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===fa(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),$a(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===fa(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}$a(t,!0,r,null,i);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(ks(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Bn(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Bn(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ja(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!js(e))}function Za(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oa=!0;else{if(!Ja(e,r)&&0===(128&t.flags))return Oa=!1,function(e,t,r){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),ws(0,As,e.memoizedState.cache),ps();break;case 27:case 5:K(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:ws(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(la(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Ha(e,t,r):(la(t),null!==(e=Qa(e,t,r))?e.sibling:null);la(t);break;case 19:var s=0!==(128&e.flags);if((n=0!==(r&t.childLanes))||(ks(e,t,r,!1),n=0!==(r&t.childLanes)),s){if(n)return Ka(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),U(da,da.current),n)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,r);case 24:ws(0,As,e.memoizedState.cache)}return Qa(e,t,r)}(e,t,r);Oa=0!==(131072&e.flags)}else Oa=!1,as&&0!==(1048576&t.flags)&&rs(t,$n,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((s=n.$$typeof)===C){t.tag=11,t=Da(null,t,n,e,r);break e}if(s===j){t.tag=14,t=Pa(null,t,n,e,r);break e}}throw t=A(n)||n,Error(o(306,t,""))}zn(n)?(e=ya(n,e),t.tag=1,t=za(null,t,n,e,r)):(t.tag=0,t=Ia(null,t,n,e,r))}return t;case 0:return Ia(e,t,t.type,t.pendingProps,r);case 1:return za(e,t,n=t.type,s=ya(n,t.pendingProps),r);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));n=t.pendingProps;var i=t.memoizedState;s=i.element,ii(e,t),di(t,n,null,r);var a=t.memoizedState;if(n=a.cache,ws(0,As,n),n!==i.cache&&_s(t,[As],r,!0),hi(),n=a.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ba(e,t,n,r);break e}if(n!==s){xs(s=jn(Error(o(424)),t)),t=Ba(e,t,n,r);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(os=bh(e.firstChild),is=t,as=!0,ls=null,cs=!0,r=ia(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ps(),n===s){t=Qa(e,t,r);break e}Ea(e,t,n,r)}t=t.child}return t;case 26:return La(e,t),null===e?(r=Eh(t.type,null,t.pendingProps,null))?t.memoizedState=r:as||(r=t.type,e=t.pendingProps,(n=ih(Y.current).createElement(r))[Ae]=t,n[Fe]=e,rh(n,r,e),Ge(n),t.stateNode=n):t.memoizedState=Eh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&as&&(n=t.stateNode=Sh(t.type,t.pendingProps,Y.current),is=t,cs=!0,s=os,ph(t.type)?(vh=s,os=bh(n.firstChild)):os=s),Ea(e,t,t.pendingProps.children,r),La(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&as&&((s=n=os)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var s=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=bh(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,cs))?(t.stateNode=n,is=t,os=bh(n.firstChild),cs=!1,s=!0):s=!1),s||hs(t)),K(t),s=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,n=i.children,lh(s,i)?n=null:null!==a&&lh(s,a)&&(t.flags|=32),null!==t.memoizedState&&(s=Mi(e,t,Li,null,null,r),Kh._currentValue=s),La(e,t),Ea(e,t,n,r),t.child;case 6:return null===e&&as&&((e=r=os)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=bh(e.nextSibling)))return null}return e}(r,t.pendingProps,cs))?(t.stateNode=r,is=t,os=null,e=!0):e=!1),e||hs(t)),null;case 13:return Ha(e,t,r);case 4:return q(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=sa(t,null,n,r):Ea(e,t,n,r),t.child;case 11:return Da(e,t,t.type,t.pendingProps,r);case 7:return Ea(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,ws(0,t.type,n.value),Ea(e,t,n.children,r),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Ts(t),n=n(s=Ns(s)),t.flags|=1,Ea(e,t,n,r),t.child;case 14:return Pa(e,t,t.type,t.pendingProps,r);case 15:return Ma(e,t,t.type,t.pendingProps,r);case 19:return Ka(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=Ya(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=Bn(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Aa(e,t,r);case 24:return Ts(t),n=Ns(As),null===e?(null===(s=Hs())&&(s=ic,i=Fs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=r),s=i),t.memoizedState={parent:n,cache:s},si(t),ws(0,As,s)):(0!==(e.lanes&r)&&(ii(e,t),di(t,null,null,r),hi()),s=e.memoizedState,i=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ws(0,As,n)):(n=i.cache,ws(0,As,n),n!==s.cache&&_s(t,[As],r,!0))),Ea(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function el(e){e.flags|=4}function tl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Uh(t)){if(null!==(t=oa.current)&&((4194048&ac)===ac?null!==aa:(62914560&ac)!==ac&&0===(536870912&ac)||t!==aa))throw ei=Ks,qs;e.flags|=8192}}function rl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,bc|=t)}function nl(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function sl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=65011712&s.subtreeFlags,n|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function il(e,t,r){var n=t.pendingProps;switch(ss(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ss(As),$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(gs(t)?el(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ms())),sl(t),null;case 26:return r=t.memoizedState,null===e?(el(t),null!==r?(sl(t),tl(t,r)):(sl(t),t.flags&=-16777217)):r?r!==e.memoizedState?(el(t),sl(t),tl(t,r)):(sl(t),t.flags&=-16777217):(e.memoizedProps!==n&&el(t),sl(t),t.flags&=-16777217),null;case 27:Q(t),r=Y.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&el(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return sl(t),null}e=H.current,gs(t)?ds(t):(e=Sh(s,n,r),t.stateNode=e,el(t))}return sl(t),null;case 5:if(Q(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&el(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return sl(t),null}if(e=H.current,gs(t))ds(t);else{switch(s=ih(Y.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?s.createElement(r,{is:n.is}):s.createElement(r)}}e[Ae]=t,e[Fe]=n;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(rh(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&el(t)}}return sl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&el(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(e=Y.current,gs(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(s=is))switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Ae]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Ju(e.nodeValue,r)))||hs(t)}else(e=ih(e).createTextNode(n))[Ae]=t,t.stateNode=e}return sl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=gs(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[Ae]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sl(t),s=!1}else s=ms(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(ha(t),t):(ha(t),null)}if(ha(t),0!==(128&t.flags))return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){s=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(s=n.alternate.memoizedState.cachePool.pool);var i=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(i=n.memoizedState.cachePool.pool),i!==s&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),rl(t,t.updateQueue),sl(t),null;case 4:return $(),null===e&&Wu(t.stateNode.containerInfo),sl(t),null;case 10:return Ss(t.type),sl(t),null;case 19:if(W(da),null===(s=t.memoizedState))return sl(t),null;if(n=0!==(128&t.flags),null===(i=s.rendering))if(n)nl(s,!1);else{if(0!==gc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=fa(e))){for(t.flags|=128,nl(s,!1),e=i.updateQueue,t.updateQueue=e,rl(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Vn(r,e),r=r.sibling;return U(da,1&da.current|2),t.child}e=e.sibling}null!==s.tail&&ne()>_c&&(t.flags|=128,n=!0,nl(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=fa(i))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,rl(t,e),nl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!as)return sl(t),null}else 2*ne()-s.renderingStartTime>_c&&536870912!==r&&(t.flags|=128,n=!0,nl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ne(),t.sibling=null,e=da.current,U(da,n?1&e|2:1&e),t):(sl(t),null);case 22:case 23:return ha(t),bi(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&r)&&0===(128&t.flags)&&(sl(t),6&t.subtreeFlags&&(t.flags|=8192)):sl(t),null!==(r=t.updateQueue)&&rl(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&W(Us),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ss(As),sl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function ol(e,t){switch(ss(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ss(As),$(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ha(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return W(da),null;case 4:return $(),null;case 10:return Ss(t.type),null;case 22:case 23:return ha(t),bi(),null!==e&&W(Us),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ss(As),null;default:return null}}function al(e,t){switch(ss(t),t.tag){case 3:Ss(As),$();break;case 26:case 27:case 5:Q(t);break;case 4:$();break;case 13:ha(t);break;case 19:W(da);break;case 10:Ss(t.type);break;case 22:case 23:ha(t),bi(),null!==e&&W(Us);break;case 24:Ss(As)}}function ll(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var s=n.next;r=s;do{if((r.tag&e)===e){n=void 0;var i=r.create,o=r.inst;n=i(),o.destroy=n}r=r.next}while(r!==s)}}catch(a){du(t,t.return,a)}}function cl(e,t,r){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var i=s.next;n=i;do{if((n.tag&e)===e){var o=n.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,s=t;var l=r,c=a;try{c()}catch(u){du(s,l,u)}}}n=n.next}while(n!==i)}}catch(u){du(t,t.return,u)}}function ul(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{gi(t,r)}catch(n){du(e,e.return,n)}}}function hl(e,t,r){r.props=ya(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){du(e,t,n)}}function dl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof r?e.refCleanup=r(n):r.current=n}}catch(s){du(e,t,s)}}function fl(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"===typeof n)try{n()}catch(s){du(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof r)try{r(null)}catch(i){du(e,t,i)}else r.current=null}function gl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(s){du(e,e.return,s)}}function pl(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,a=null,l=null,c=null,u=null,h=null;for(g in r){var d=r[g];if(r.hasOwnProperty(g)&&null!=d)switch(g){case"checked":case"value":break;case"defaultValue":c=d;default:n.hasOwnProperty(g)||eh(e,t,g,null,n,d)}}for(var f in n){var g=n[f];if(d=r[f],n.hasOwnProperty(f)&&(null!=g||null!=d))switch(f){case"type":i=g;break;case"name":s=g;break;case"checked":u=g;break;case"defaultChecked":h=g;break;case"value":a=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(o(137,t));break;default:g!==d&&eh(e,t,f,g,n,d)}}return void yt(e,a,l,c,u,h,i,s);case"select":for(i in g=a=l=f=null,r)if(c=r[i],r.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":g=c;default:n.hasOwnProperty(i)||eh(e,t,i,null,n,c)}for(s in n)if(i=n[s],c=r[s],n.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":a=i;default:i!==c&&eh(e,t,s,i,n,c)}return t=l,r=a,n=g,void(null!=f?wt(e,!!r,f,!1):!!n!==!!r&&(null!=t?wt(e,!!r,t,!0):wt(e,!!r,r?[]:"",!1)));case"textarea":for(l in g=f=null,r)if(s=r[l],r.hasOwnProperty(l)&&null!=s&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:eh(e,t,l,null,n,s)}for(a in n)if(s=n[a],i=r[a],n.hasOwnProperty(a)&&(null!=s||null!=i))switch(a){case"value":f=s;break;case"defaultValue":g=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:s!==i&&eh(e,t,a,s,n,i)}return void St(e,f,g);case"option":for(var p in r)if(f=r[p],r.hasOwnProperty(p)&&null!=f&&!n.hasOwnProperty(p))if("selected"===p)e.selected=!1;else eh(e,t,p,null,n,f);for(c in n)if(f=n[c],g=r[c],n.hasOwnProperty(c)&&f!==g&&(null!=f||null!=g))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else eh(e,t,c,f,n,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in r)f=r[m],r.hasOwnProperty(m)&&null!=f&&!n.hasOwnProperty(m)&&eh(e,t,m,null,n,f);for(u in n)if(f=n[u],g=r[u],n.hasOwnProperty(u)&&f!==g&&(null!=f||null!=g))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:eh(e,t,u,f,n,g)}return;default:if(Nt(t)){for(var x in r)f=r[x],r.hasOwnProperty(x)&&void 0!==f&&!n.hasOwnProperty(x)&&th(e,t,x,void 0,n,f);for(h in n)f=n[h],g=r[h],!n.hasOwnProperty(h)||f===g||void 0===f&&void 0===g||th(e,t,h,f,n,g);return}}for(var y in r)f=r[y],r.hasOwnProperty(y)&&null!=f&&!n.hasOwnProperty(y)&&eh(e,t,y,null,n,f);for(d in n)f=n[d],g=r[d],!n.hasOwnProperty(d)||f===g||null==f&&null==g||eh(e,t,d,f,n,g)}(n,e.type,r,t),n[Fe]=t}catch(s){du(e,e.return,s)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function xl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zu));else if(4!==n&&(27===n&&ph(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,r),e=e.sibling;null!==e;)yl(e,t,r),e=e.sibling}function bl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&ph(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(bl(e,t,r),e=e.sibling;null!==e;)bl(e,t,r),e=e.sibling}function vl(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);rh(t,n,r),t[Ae]=e,t[Fe]=r}catch(i){du(e,e.return,i)}}var wl=!1,Sl=!1,Cl=!1,_l="function"===typeof WeakSet?WeakSet:Set,kl=null;function jl(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:zl(e,r),4&n&&ll(5,r);break;case 1:if(zl(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(o){du(r,r.return,o)}else{var s=ya(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){du(r,r.return,a)}}64&n&&ul(r),512&n&&dl(r,r.return);break;case 3:if(zl(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{gi(e,t)}catch(o){du(r,r.return,o)}}break;case 27:null===t&&4&n&&vl(r);case 26:case 5:zl(e,r),null===t&&4&n&&gl(r),512&n&&dl(r,r.return);break;case 12:zl(e,r);break;case 13:zl(e,r),4&n&&Pl(e,r),64&n&&(null!==(e=r.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=mu.bind(null,r))));break;case 22:if(!(n=null!==r.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||Sl,s=wl;var i=Sl;wl=n,(Sl=t)&&!i?Vl(e,r,0!==(8772&r.subtreeFlags)):zl(e,r),wl=s,Sl=i}break;case 30:break;default:zl(e,r)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nl=null,Ol=!1;function El(e,t,r){for(r=r.child;null!==r;)Dl(e,t,r),r=r.sibling}function Dl(e,t,r){if(fe&&"function"===typeof fe.onCommitFiberUnmount)try{fe.onCommitFiberUnmount(de,r)}catch(i){}switch(r.tag){case 26:Sl||fl(r,t),El(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:Sl||fl(r,t);var n=Nl,s=Ol;ph(r.type)&&(Nl=r.stateNode,Ol=!1),El(e,t,r),Ch(r.stateNode),Nl=n,Ol=s;break;case 5:Sl||fl(r,t);case 6:if(n=Nl,s=Ol,Nl=null,El(e,t,r),Ol=s,null!==(Nl=n))if(Ol)try{(9===Nl.nodeType?Nl.body:"HTML"===Nl.nodeName?Nl.ownerDocument.body:Nl).removeChild(r.stateNode)}catch(o){du(r,t,o)}else try{Nl.removeChild(r.stateNode)}catch(o){du(r,t,o)}break;case 18:null!==Nl&&(Ol?(mh(9===(e=Nl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Od(e)):mh(Nl,r.stateNode));break;case 4:n=Nl,s=Ol,Nl=r.stateNode.containerInfo,Ol=!0,El(e,t,r),Nl=n,Ol=s;break;case 0:case 11:case 14:case 15:Sl||cl(2,r,t),Sl||cl(4,r,t),El(e,t,r);break;case 1:Sl||(fl(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount&&hl(r,t,n)),El(e,t,r);break;case 21:El(e,t,r);break;case 22:Sl=(n=Sl)||null!==r.memoizedState,El(e,t,r),Sl=n;break;default:El(e,t,r)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Od(e)}catch(r){du(t,t.return,r)}}function Ml(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var n=xu.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function Al(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n],i=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){Nl=l.stateNode,Ol=!1;break e}break;case 5:Nl=l.stateNode,Ol=!1;break e;case 3:case 4:Nl=l.stateNode.containerInfo,Ol=!0;break e}l=l.return}if(null===Nl)throw Error(o(160));Dl(i,a,s),Nl=null,Ol=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Fl=null;function Ll(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Al(t,e),Il(e),4&n&&(cl(3,e,e.return),ll(3,e),cl(5,e,e.return));break;case 1:Al(t,e),Il(e),512&n&&(Sl||null===r||fl(r,r.return)),64&n&&wl&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:var s=Fl;if(Al(t,e),Il(e),512&n&&(Sl||null===r||fl(r,r.return)),4&n){var i=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Ve]||i[Ae]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(n),s.head.insertBefore(i,s.querySelector("head > title"))),rh(i,n,r),i[Ae]=e,Ge(i),n=i;break e;case"link":var a=Vh("link","href",s).get(n+(r.href||""));if(a)for(var l=0;l<a.length;l++)if((i=a[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&i.getAttribute("rel")===(null==r.rel?null:r.rel)&&i.getAttribute("title")===(null==r.title?null:r.title)&&i.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){a.splice(l,1);break t}rh(i=s.createElement(n),n,r),s.head.appendChild(i);break;case"meta":if(a=Vh("meta","content",s).get(n+(r.content||"")))for(l=0;l<a.length;l++)if((i=a[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&i.getAttribute("name")===(null==r.name?null:r.name)&&i.getAttribute("property")===(null==r.property?null:r.property)&&i.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&i.getAttribute("charset")===(null==r.charSet?null:r.charSet)){a.splice(l,1);break t}rh(i=s.createElement(n),n,r),s.head.appendChild(i);break;default:throw Error(o(468,n))}i[Ae]=e,Ge(i),n=i}e.stateNode=n}else Wh(s,e.type,e.stateNode);else e.stateNode=Lh(s,n,e.memoizedProps);else i!==n?(null===i?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):i.count--,null===n?Wh(s,e.type,e.stateNode):Lh(s,n,e.memoizedProps)):null===n&&null!==e.stateNode&&pl(e,e.memoizedProps,r.memoizedProps)}break;case 27:Al(t,e),Il(e),512&n&&(Sl||null===r||fl(r,r.return)),null!==r&&4&n&&pl(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Al(t,e),Il(e),512&n&&(Sl||null===r||fl(r,r.return)),32&e.flags){s=e.stateNode;try{_t(s,"")}catch(g){du(e,e.return,g)}}4&n&&null!=e.stateNode&&pl(e,s=e.memoizedProps,null!==r?r.memoizedProps:s),1024&n&&(Cl=!0);break;case 6:if(Al(t,e),Il(e),4&n){if(null===e.stateNode)throw Error(o(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(g){du(e,e.return,g)}}break;case 3:if(Bh=null,s=Fl,Fl=jh(t.containerInfo),Al(t,e),Fl=s,Il(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Od(t.containerInfo)}catch(g){du(e,e.return,g)}Cl&&(Cl=!1,Rl(e));break;case 4:n=Fl,Fl=jh(e.stateNode.containerInfo),Al(t,e),Il(e),Fl=n;break;case 12:default:Al(t,e),Il(e);break;case 13:Al(t,e),Il(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==r&&null!==r.memoizedState)&&(Cc=ne()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Ml(e,n)));break;case 22:s=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,u=wl,h=Sl;if(wl=u||s,Sl=h||c,Al(t,e),Sl=h,wl=u,Il(e),8192&n)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===r||c||wl||Sl||Bl(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(i=c.stateNode,s)"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(g){du(c,c.return,g)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(g){du(c,c.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(r=n.retryQueue)&&(n.retryQueue=null,Ml(e,r))));break;case 19:Al(t,e),Il(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Ml(e,n)));case 30:case 21:}}function Il(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(ml(n)){r=n;break}n=n.return}if(null==r)throw Error(o(160));switch(r.tag){case 27:var s=r.stateNode;bl(e,xl(e),s);break;case 5:var i=r.stateNode;32&r.flags&&(_t(i,""),r.flags&=-33),bl(e,xl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;yl(e,xl(e),a);break;default:throw Error(o(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Rl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Rl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function zl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)jl(e,t.alternate,t),t=t.sibling}function Bl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),Bl(t);break;case 1:fl(t,t.return);var r=t.stateNode;"function"===typeof r.componentWillUnmount&&hl(t,t.return,r),Bl(t);break;case 27:Ch(t.stateNode);case 26:case 5:fl(t,t.return),Bl(t);break;case 22:null===t.memoizedState&&Bl(t);break;default:Bl(t)}e=e.sibling}}function Vl(e,t,r){for(r=r&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,s=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Vl(s,i,r),ll(4,i);break;case 1:if(Vl(s,i,r),"function"===typeof(s=(n=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){du(n,n.return,c)}if(null!==(s=(n=i).updateQueue)){var a=n.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)fi(l[s],a)}catch(c){du(n,n.return,c)}}r&&64&o&&ul(i),dl(i,i.return);break;case 27:vl(i);case 26:case 5:Vl(s,i,r),r&&null===n&&4&o&&gl(i),dl(i,i.return);break;case 12:Vl(s,i,r);break;case 13:Vl(s,i,r),r&&4&o&&Pl(s,i);break;case 22:null===i.memoizedState&&Vl(s,i,r),dl(i,i.return);break;case 30:break;default:Vl(s,i,r)}t=t.sibling}}function Wl(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Ls(r))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e))}function Hl(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Xl(e,t,r,n),t=t.sibling}function Xl(e,t,r,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,r,n),2048&s&&ll(9,t);break;case 1:case 13:default:Hl(e,t,r,n);break;case 3:Hl(e,t,r,n),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e)));break;case 12:if(2048&s){Hl(e,t,r,n),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,a=i.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else Hl(e,t,r,n);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Hl(e,t,r,n):Gl(e,t):2&i._visibility?Hl(e,t,r,n):(i._visibility|=2,Yl(e,t,r,n,0!==(10256&t.subtreeFlags))),2048&s&&Wl(o,t);break;case 24:Hl(e,t,r,n),2048&s&&Ul(t.alternate,t)}}function Yl(e,t,r,n,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,o=t,a=r,l=n,c=o.flags;switch(o.tag){case 0:case 11:case 15:Yl(i,o,a,l,s),ll(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Yl(i,o,a,l,s):Gl(i,o):(u._visibility|=2,Yl(i,o,a,l,s)),s&&2048&c&&Wl(o.alternate,o);break;case 24:Yl(i,o,a,l,s),s&&2048&c&&Ul(o.alternate,o);break;default:Yl(i,o,a,l,s)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,s=n.flags;switch(n.tag){case 22:Gl(r,n),2048&s&&Wl(n.alternate,n);break;case 24:Gl(r,n),2048&s&&Ul(n.alternate,n);break;default:Gl(r,n)}t=t.sibling}}var ql=8192;function $l(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:$l(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,r){if(null===Hh)throw Error(o(475));var n=Hh;if("stylesheet"===t.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Dh(r.href),i=e.querySelector(Ph(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=Yh.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,r=Mh(r),(s=_h.get(s))&&Rh(r,s),Ge(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),rh(i,"link",r),t.instance=i}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=Yh.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(Fl,e.memoizedState,e.memoizedProps);break;case 5:default:$l(e);break;case 3:case 4:var t=Fl;Fl=jh(e.stateNode.containerInfo),$l(e),Fl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,$l(e),ql=t):$l(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];kl=n,tc(n,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&cl(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ec(e)):Jl(e)}}function ec(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];kl=n,tc(n,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:cl(8,t,t.return),ec(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,ec(t));break;default:ec(t)}e=e.sibling}}function tc(e,t){for(;null!==kl;){var r=kl;switch(r.tag){case 0:case 11:case 15:cl(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Ls(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,kl=n;else e:for(r=e;null!==kl;){var s=(n=kl).sibling,i=n.return;if(Tl(n),n===r){kl=null;break e}if(null!==s){s.return=i,kl=s;break e}kl=i}}}var rc={getCacheForType:function(e){var t=Ns(As),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},nc="function"===typeof WeakMap?WeakMap:Map,sc=0,ic=null,oc=null,ac=0,lc=0,cc=null,uc=!1,hc=!1,dc=!1,fc=0,gc=0,pc=0,mc=0,xc=0,yc=0,bc=0,vc=null,wc=null,Sc=!1,Cc=0,_c=1/0,kc=null,jc=null,Tc=0,Nc=null,Oc=null,Ec=0,Dc=0,Pc=null,Mc=null,Ac=0,Fc=null;function Lc(){if(0!==(2&sc)&&0!==ac)return ac&-ac;if(null!==L.T){return 0!==zs?zs:Du()}return Pe()}function Ic(){0===yc&&(yc=0===(536870912&ac)||as?_e():536870912);var e=oa.current;return null!==e&&(e.flags|=32),yc}function Rc(e,t,r){(e!==ic||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(Xc(e,0),Wc(e,ac,yc,!1)),Te(e,r),0!==(2&sc)&&e===ic||(e===ic&&(0===(2&sc)&&(mc|=r),4===gc&&Wc(e,ac,yc,!1)),_u(e))}function zc(e,t,r){if(0!==(6&sc))throw Error(o(327));for(var n=!r&&0===(124&t)&&0===(t&e.expiredLanes)||Se(e,t),s=n?function(e,t){var r=sc;sc|=2;var n=Gc(),s=qc();ic!==e||ac!==t?(kc=null,_c=ne()+500,Xc(e,t)):hc=Se(e,t);e:for(;;)try{if(0!==lc&&null!==oc){t=oc;var i=cc;t:switch(lc){case 1:lc=0,cc=null,tu(e,t,i,1);break;case 2:case 9:if(Qs(i)){lc=0,cc=null,eu(t);break}t=function(){2!==lc&&9!==lc||ic!==e||(lc=7),_u(e)},i.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:Qs(i)?(lc=0,cc=null,eu(t)):(lc=0,cc=null,tu(e,t,i,7));break;case 5:var a=null;switch(oc.tag){case 26:a=oc.memoizedState;case 5:case 27:var l=oc;if(!a||Uh(a)){lc=0,cc=null;var c=l.sibling;if(null!==c)oc=c;else{var u=l.return;null!==u?(oc=u,ru(u)):oc=null}break t}}lc=0,cc=null,tu(e,t,i,5);break;case 6:lc=0,cc=null,tu(e,t,i,6);break;case 8:Hc(),gc=6;break e;default:throw Error(o(462))}}Jc();break}catch(h){Yc(e,h)}return vs=bs=null,L.H=n,L.A=s,sc=r,null!==oc?0:(ic=null,ac=0,En(),gc)}(e,t):Kc(e,t,!0),i=n;;){if(0===s){hc&&!n&&Wc(e,t,0,!1);break}if(r=e.current.alternate,!i||Vc(r)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;s=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Xc(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=i,mc|=i,s=4;break e}i=wc,wc=s,null!==i&&(null===wc?wc=i:wc.push.apply(wc,i))}s=a}if(i=!1,2!==s)continue}}if(1===s){Xc(e,0),Wc(e,t,0,!0);break}e:{switch(n=e,i=s){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Wc(n,t,yc,!uc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(s=Cc+300-ne())){if(Wc(n,t,yc,!uc),0!==we(n,0,!0))break e;n.timeoutHandle=uh(Bc.bind(null,n,r,wc,kc,Sc,t,yc,mc,bc,uc,i,2,-0,0),s)}else Bc(n,r,wc,kc,Sc,t,yc,mc,bc,uc,i,0,-0,0)}break}s=Kc(e,t,!1),i=!1}_u(e)}function Bc(e,t,r,n,s,i,a,l,c,u,h,d,f,g){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(Hh={stylesheets:null,count:0,unsuspend:Xh},Kl(t),null!==(d=function(){if(null===Hh)throw Error(o(475));var e=Hh;return e.stylesheets&&0===e.count&&qh(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&qh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=d(su.bind(null,e,t,i,r,n,s,a,l,c,h,1,f,g)),void Wc(e,i,a,!u);su(e,t,i,r,n,s,a,l,c)}function Vc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Kr(i(),s))return!1}catch(o){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wc(e,t,r,n){t&=~xc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var i=31-pe(s),o=1<<i;n[i]=-1,s&=~o}0!==r&&Ne(e,r,t)}function Uc(){return 0!==(6&sc)||(ku(0,!1),!1)}function Hc(){if(null!==oc){if(0===lc)var e=oc.return;else vs=bs=null,zi(e=oc),Qo=null,Jo=0,e=oc;for(;null!==e;)al(e.alternate,e),e=e.return;oc=null}}function Xc(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,hh(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),Hc(),ic=e,oc=r=Bn(e.current,null),ac=t,lc=0,cc=null,uc=!1,hc=Se(e,t),dc=!1,bc=yc=xc=mc=pc=gc=0,wc=vc=null,Sc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var s=31-pe(n),i=1<<s;t|=e[s],n&=~i}return fc=t,En(),r}function Yc(e,t){wi=null,L.H=Go,t===Gs||t===$s?(t=ti(),lc=3):t===qs?(t=ti(),lc=4):lc=t===Na?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,cc=t,null===oc&&(gc=1,Ca(e,jn(t,e.current)))}function Gc(){var e=L.H;return L.H=Go,null===e?Go:e}function qc(){var e=L.A;return L.A=rc,e}function $c(){gc=4,uc||(4194048&ac)!==ac&&null!==oa.current||(hc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===ic||Wc(ic,ac,yc,!1)}function Kc(e,t,r){var n=sc;sc|=2;var s=Gc(),i=qc();ic===e&&ac===t||(kc=null,Xc(e,t)),t=!1;var o=gc;e:for(;;)try{if(0!==lc&&null!==oc){var a=oc,l=cc;switch(lc){case 8:Hc(),o=6;break e;case 3:case 2:case 9:case 6:null===oa.current&&(t=!0);var c=lc;if(lc=0,cc=null,tu(e,a,l,c),r&&hc){o=0;break e}break;default:c=lc,lc=0,cc=null,tu(e,a,l,c)}}Qc(),o=gc;break}catch(u){Yc(e,u)}return t&&e.shellSuspendCounter++,vs=bs=null,sc=n,L.H=s,L.A=i,null===oc&&(ic=null,ac=0,En()),o}function Qc(){for(;null!==oc;)Zc(oc)}function Jc(){for(;null!==oc&&!te();)Zc(oc)}function Zc(e){var t=Za(e.alternate,e,fc);e.memoizedProps=e.pendingProps,null===t?ru(e):oc=t}function eu(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Ra(r,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Ra(r,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:zi(t);default:al(r,t),t=Za(r,t=oc=Vn(t,fc),fc)}e.memoizedProps=e.pendingProps,null===t?ru(e):oc=t}function tu(e,t,r,n){vs=bs=null,zi(t),Qo=null,Jo=0;var s=t.return;try{if(function(e,t,r,n,s){if(r.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=r.alternate)&&ks(t,r,s,!0),null!==(r=oa.current)){switch(r.tag){case 13:return null===aa?$c():null===r.alternate&&0===gc&&(gc=3),r.flags&=-257,r.flags|=65536,r.lanes=s,n===Ks?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),fu(e,n,s)),!1;case 22:return r.flags|=65536,n===Ks?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),fu(e,n,s)),!1}throw Error(o(435,r.tag))}return fu(e,n,s),$c(),!1}if(as)return null!==(t=oa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==us&&xs(jn(e=Error(o(422),{cause:n}),r))):(n!==us&&xs(jn(t=Error(o(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,n=jn(n,r),ci(e,s=ka(e.stateNode,n,s)),4!==gc&&(gc=2)),!1;var i=Error(o(520),{cause:n});if(i=jn(i,r),null===vc?vc=[i]:vc.push(i),4!==gc&&(gc=2),null===t)return!0;n=jn(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=s&-s,r.lanes|=e,ci(r,e=ka(r.stateNode,n,e)),!1;case 1:if(t=r.type,i=r.stateNode,0===(128&r.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===jc||!jc.has(i))))return r.flags|=65536,s&=-s,r.lanes|=s,Ta(s=ja(s),e,r,n),ci(r,s),!1}r=r.return}while(null!==r);return!1}(e,s,t,r,ac))return gc=1,Ca(e,jn(r,e.current)),void(oc=null)}catch(i){if(null!==s)throw oc=s,i;return gc=1,Ca(e,jn(r,e.current)),void(oc=null)}32768&t.flags?(as||1===n?e=!0:hc||0!==(536870912&ac)?e=!1:(uc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=oa.current)&&13===n.tag&&(n.flags|=16384))),nu(t,e)):ru(t)}function ru(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,uc);e=t.return;var r=il(t.alternate,t,fc);if(null!==r)return void(oc=r);if(null!==(t=t.sibling))return void(oc=t);oc=t=e}while(null!==t);0===gc&&(gc=5)}function nu(e,t){do{var r=ol(e.alternate,e);if(null!==r)return r.flags&=32767,void(oc=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(oc=e);oc=e=r}while(null!==e);gc=6,oc=null}function su(e,t,r,n,s,i,a,l,c){e.cancelPendingCommit=null;do{cu()}while(0!==Tc);if(0!==(6&sc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,r,n,s,i){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=o&~r;0<r;){var u=31-pe(r),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}r&=~h}0!==n&&Ne(e,n,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,r,i|=On,a,l,c),e===ic&&(oc=ic=null,ac=0),Oc=t,Nc=e,Ec=r,Dc=i,Pc=s,Mc=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(ae,function(){return uu(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=L.T,L.T=null,s=I.p,I.p=2,a=sc,sc|=4;try{!function(e,t){if(e=e.containerInfo,nh=sd,rn(e=tn(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(m){r=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var g;d!==r||0!==s&&3!==d.nodeType||(l=a+s),d!==i||0!==n&&3!==d.nodeType||(c=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(g=d.firstChild);)f=d,d=g;for(;;){if(d===e)break t;if(f===r&&++u===s&&(l=a),f===i&&++h===n&&(c=a),null!==(g=d.nextSibling))break;f=(d=f).parentNode}d=g}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(sh={focusedElem:e,selectionRange:r},sd=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(i=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,r=t,s=i.memoizedProps,i=i.memoizedState,n=r.stateNode;try{var p=ya(r.type,s,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(p,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(x){du(r,r.return,x)}}break;case 3:if(0!==(1024&e))if(9===(r=(e=t.stateNode.containerInfo).nodeType))xh(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{sc=a,I.p=s,L.T=n}}Tc=1,iu(),ou(),au()}}function iu(){if(1===Tc){Tc=0;var e=Nc,t=Oc,r=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||r){r=L.T,L.T=null;var n=I.p;I.p=2;var s=sc;sc|=4;try{Ll(t,e);var i=sh,o=tn(e.containerInfo),a=i.focusedElem,l=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&en(a.ownerDocument.documentElement,a)){if(null!==l&&rn(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),g=a.textContent.length,p=Math.min(l.start,g),m=void 0===l.end?p:Math.min(l.end,g);!f.extend&&p>m&&(o=m,m=p,p=o);var x=Zr(a,p),y=Zr(a,m);if(x&&y&&(1!==f.rangeCount||f.anchorNode!==x.node||f.anchorOffset!==x.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=h.createRange();b.setStart(x.node,x.offset),f.removeAllRanges(),p>m?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var v=h[a];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}sd=!!nh,sh=nh=null}finally{sc=s,I.p=n,L.T=r}}e.current=t,Tc=2}}function ou(){if(2===Tc){Tc=0;var e=Nc,t=Oc,r=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||r){r=L.T,L.T=null;var n=I.p;I.p=2;var s=sc;sc|=4;try{jl(e,t.alternate,t)}finally{sc=s,I.p=n,L.T=r}}Tc=3}}function au(){if(4===Tc||3===Tc){Tc=0,re();var e=Nc,t=Oc,r=Ec,n=Mc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tc=5:(Tc=0,Oc=Nc=null,lu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(jc=null),De(r),t=t.stateNode,fe&&"function"===typeof fe.onCommitFiberRoot)try{fe.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==n){t=L.T,s=I.p,I.p=2,L.T=null;try{for(var i=e.onRecoverableError,o=0;o<n.length;o++){var a=n[o];i(a.value,{componentStack:a.stack})}}finally{L.T=t,I.p=s}}0!==(3&Ec)&&cu(),_u(e),s=e.pendingLanes,0!==(4194090&r)&&0!==(42&s)?e===Fc?Ac++:(Ac=0,Fc=e):Ac=0,ku(0,!1)}}function lu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ls(t)))}function cu(e){return iu(),ou(),au(),uu()}function uu(){if(5!==Tc)return!1;var e=Nc,t=Dc;Dc=0;var r=De(Ec),n=L.T,s=I.p;try{I.p=32>r?32:r,L.T=null,r=Pc,Pc=null;var i=Nc,a=Ec;if(Tc=0,Oc=Nc=null,Ec=0,0!==(6&sc))throw Error(o(331));var l=sc;if(sc|=4,Zl(i.current),Xl(i,i.current,a,r),sc=l,ku(0,!1),fe&&"function"===typeof fe.onPostCommitFiberRoot)try{fe.onPostCommitFiberRoot(de,i)}catch(c){}return!0}finally{I.p=s,L.T=n,lu(e,t)}}function hu(e,t,r){t=jn(r,t),null!==(e=ai(e,t=ka(e.stateNode,t,2),2))&&(Te(e,2),_u(e))}function du(e,t,r){if(3===e.tag)hu(e,e,r);else for(;null!==t;){if(3===t.tag){hu(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===jc||!jc.has(n))){e=jn(r,e),null!==(n=ai(t,r=ja(2),2))&&(Ta(r,n,t,e),Te(n,2),_u(n));break}}t=t.return}}function fu(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new nc;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(dc=!0,s.add(r),e=gu.bind(null,e,t,r),t.then(e,e))}function gu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ic===e&&(ac&r)===r&&(4===gc||3===gc&&(62914560&ac)===ac&&300>ne()-Cc?0===(2&sc)&&Xc(e,0):xc|=r,bc===ac&&(bc=0)),_u(e)}function pu(e,t){0===t&&(t=ke()),null!==(e=Mn(e,t))&&(Te(e,t),_u(e))}function mu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),pu(e,r)}function xu(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==n&&n.delete(t),pu(e,r)}var yu=null,bu=null,vu=!1,wu=!1,Su=!1,Cu=0;function _u(e){e!==bu&&null===e.next&&(null===bu?yu=bu=e:bu=bu.next=e),wu=!0,vu||(vu=!0,fh(function(){0!==(6&sc)?Z(ie,ju):Tu()}))}function ku(e,t){if(!Su&&wu){Su=!0;do{for(var r=!1,n=yu;null!==n;){if(!t)if(0!==e){var s=n.pendingLanes;if(0===s)var i=0;else{var o=n.suspendedLanes,a=n.pingedLanes;i=(1<<31-pe(42|e)+1)-1,i=201326741&(i&=s&~(o&~a))?201326741&i|1:i?2|i:0}0!==i&&(r=!0,Eu(n,i))}else i=ac,0===(3&(i=we(n,n===ic?i:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||Se(n,i)||(r=!0,Eu(n,i));n=n.next}}while(r);Su=!1}}function ju(){Tu()}function Tu(){wu=vu=!1;var e=0;0!==Cu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ch&&(ch=e,!0);return ch=null,!1}()&&(e=Cu),Cu=0);for(var t=ne(),r=null,n=yu;null!==n;){var s=n.next,i=Nu(n,t);0===i?(n.next=null,null===r?yu=s:r.next=s,null===s&&(bu=r)):(r=n,(0!==e||0!==(3&i))&&(wu=!0)),n=s}ku(e,!1)}function Nu(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-pe(i),a=1<<o,l=s[o];-1===l?0!==(a&r)&&0===(a&n)||(s[o]=Ce(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}if(r=ac,r=we(e,e===(t=ic)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&ee(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&r)||Se(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&ee(n),De(r)){case 2:case 8:r=oe;break;case 32:default:r=ae;break;case 268435456:r=ce}return n=Ou.bind(null,e),r=Z(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&ee(n),e.callbackPriority=2,e.callbackNode=null,2}function Ou(e,t){if(0!==Tc&&5!==Tc)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(cu()&&e.callbackNode!==r)return null;var n=ac;return 0===(n=we(e,e===ic?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(zc(e,n,t),Nu(e,ne()),null!=e.callbackNode&&e.callbackNode===r?Ou.bind(null,e):null)}function Eu(e,t){if(cu())return null;zc(e,t,!0)}function Du(){return 0===Cu&&(Cu=_e()),Cu}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Dt(""+e)}function Mu(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Au=0;Au<Cn.length;Au++){var Fu=Cn[Au];_n(Fu.toLowerCase(),"on"+(Fu[0].toUpperCase()+Fu.slice(1)))}_n(pn,"onAnimationEnd"),_n(mn,"onAnimationIteration"),_n(xn,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(yn,"onTransitionRun"),_n(bn,"onTransitionStart"),_n(vn,"onTransitionCancel"),_n(wn,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Ru(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){ba(u)}s.currentTarget=null,i=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){ba(u)}s.currentTarget=null,i=l}}}}function zu(e,t){var r=t[Ie];void 0===r&&(r=t[Ie]=new Set);var n=e+"__bubble";r.has(n)||(Uu(t,e,2,!1),r.add(n))}function Bu(e,t,r){var n=0;t&&(n|=4),Uu(r,e,n,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Wu(e){if(!e[Vu]){e[Vu]=!0,qe.forEach(function(t){"selectionchange"!==t&&(Iu.has(t)||Bu(t,!1,e),Bu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Bu("selectionchange",!1,t))}}function Uu(e,t,r,n){switch(hd(t)){case 2:var s=id;break;case 8:s=od;break;default:s=ad}r=s.bind(null,t,r,e),s=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Hu(e,t,r,n,s){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===s)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==a;){if(null===(o=Ue(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){n=i=o;continue e}a=a.parentNode}}n=n.return}Rt(function(){var n=i,s=Mt(r),o=[];e:{var a=Sn.get(e);if(void 0!==a){var c=tr,u=e;switch(e){case"keypress":if(0===Gt(r))break e;case"keydown":case"keyup":c=mr;break;case"focusin":u="focus",c=ar;break;case"focusout":u="blur",c=ar;break;case"beforeblur":case"afterblur":c=ar;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=or;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yr;break;case pn:case mn:case xn:c=lr;break;case wn:c=br;break;case"scroll":case"scrollend":c=nr;break;case"wheel":c=vr;break;case"copy":case"cut":case"paste":c=cr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xr;break;case"toggle":case"beforetoggle":c=wr}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var g,p=n;null!==p;){var m=p;if(g=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===g||null===f||null!=(m=zt(p,f))&&h.push(Xu(p,m,g)),d)break;p=p.return}0<h.length&&(a=new c(a,u,null,r,s),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===Pt||!(u=r.relatedTarget||r.fromElement)||!Ue(u)&&!u[Le])&&(c||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?Ue(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=n),c!==u)){if(h=ir,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=xr,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==c?a:Xe(c),g=null==u?a:Xe(u),(a=new h(m,p+"leave",c,r,s)).target=d,a.relatedTarget=g,m=null,Ue(s)===n&&((h=new h(f,p+"enter",u,r,s)).target=g,h.relatedTarget=d,m=h),d=m,c&&u)e:{for(f=u,p=0,g=h=c;g;g=Gu(g))p++;for(g=0,m=f;m;m=Gu(m))g++;for(;0<p-g;)h=Gu(h),p--;for(;0<g-p;)f=Gu(f),g--;for(;p--;){if(h===f||null!==f&&h===f.alternate)break e;h=Gu(h),f=Gu(f)}h=null}else h=null;null!==c&&qu(o,a,c,h,!1),null!==u&&null!==d&&qu(o,d,u,h,!0)}if("select"===(c=(a=n?Xe(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var x=zr;else if(Mr(a))if(Br)x=$r;else{x=Gr;var y=Yr}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?n&&Nt(n.elementType)&&(x=zr):x=qr;switch(x&&(x=x(e,n))?Ar(o,x,r,s):(y&&y(e,a,n),"focusout"===e&&n&&"number"===a.type&&null!=n.memoizedProps.value&&vt(a,"number",a.value)),y=n?Xe(n):window,e){case"focusin":(Mr(y)||"true"===y.contentEditable)&&(sn=y,on=n,an=null);break;case"focusout":an=on=sn=null;break;case"mousedown":ln=!0;break;case"contextmenu":case"mouseup":case"dragend":ln=!1,cn(o,r,s);break;case"selectionchange":if(nn)break;case"keydown":case"keyup":cn(o,r,s)}var b;if(Cr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Dr?Or(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(jr&&"ko"!==r.locale&&(Dr||"onCompositionStart"!==v?"onCompositionEnd"===v&&Dr&&(b=Yt()):(Ht="value"in(Ut=s)?Ut.value:Ut.textContent,Dr=!0)),0<(y=Yu(n,v)).length&&(v=new ur(v,e,null,r,s),o.push({event:v,listeners:y}),b?v.data=b:null!==(b=Er(r))&&(v.data=b))),(b=kr?function(e,t){switch(e){case"compositionend":return Er(t);case"keypress":return 32!==t.which?null:(Nr=!0,Tr);case"textInput":return(e=t.data)===Tr&&Nr?null:e;default:return null}}(e,r):function(e,t){if(Dr)return"compositionend"===e||!Cr&&Or(e,t)?(e=Yt(),Xt=Ht=Ut=null,Dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(v=Yu(n,"onBeforeInput")).length&&(y=new ur("onBeforeInput","beforeinput",null,r,s),o.push({event:y,listeners:v}),y.data=b)),function(e,t,r,n,s){if("submit"===t&&r&&r.stateNode===s){var i=Pu((s[Fe]||null).action),o=n.submitter;o&&null!==(t=(t=o[Fe]||null)?Pu(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var a=new tr("action","action",null,n,s);e.push({event:a,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Cu){var e=o?Mu(s,o):new FormData(s);Mo(r,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(a.preventDefault(),e=o?Mu(s,o):new FormData(s),Mo(r,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(o,e,n,r,s)}Ru(o,t)})}function Xu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Yu(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=zt(e,r))&&n.unshift(Xu(e,s,i)),null!=(s=zt(e,t))&&n.push(Xu(e,s,i))),3===e.tag)return n;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qu(e,t,r,n,s){for(var i=t._reactName,o=[];null!==r&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===n)break;5!==a&&26!==a&&27!==a||null===c||(l=c,s?null!=(c=zt(r,i))&&o.unshift(Xu(r,c,l)):s||null!=(c=zt(r,i))&&o.push(Xu(r,c,l))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var $u=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace($u,"\n").replace(Ku,"")}function Ju(e,t){return t=Qu(t),Qu(e)===t}function Zu(){}function eh(e,t,r,n,s,i){switch(r){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||_t(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&_t(e,""+n);break;case"className":st(e,"class",n);break;case"tabIndex":st(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":st(e,r,n);break;case"style":Tt(e,n,i);break;case"data":if("object"!==t){st(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Dt(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===r?("input"!==t&&eh(e,t,"name",s.name,s,null),eh(e,t,"formEncType",s.formEncType,s,null),eh(e,t,"formMethod",s.formMethod,s,null),eh(e,t,"formTarget",s.formTarget,s,null)):(eh(e,t,"encType",s.encType,s,null),eh(e,t,"method",s.method,s,null),eh(e,t,"target",s.target,s,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Dt(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Zu);break;case"onScroll":null!=n&&zu("scroll",e);break;case"onScrollEnd":null!=n&&zu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}r=Dt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":zu("beforetoggle",e),zu("toggle",e),nt(e,"popover",n);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":nt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&nt(e,r=Ot.get(r)||r,n)}}function th(e,t,r,n,s,i){switch(r){case"style":Tt(e,n,i);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=r}}break;case"children":"string"===typeof n?_t(e,n):("number"===typeof n||"bigint"===typeof n)&&_t(e,""+n);break;case"onScroll":null!=n&&zu("scroll",e);break;case"onScrollEnd":null!=n&&zu("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:$e.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(s=r.endsWith("Capture"),t=r.slice(2,s?r.length-7:void 0),"function"===typeof(i=null!=(i=e[Fe]||null)?i[r]:null)&&e.removeEventListener(t,i,s),"function"!==typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):nt(e,r,n):("function"!==typeof i&&null!==i&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,s)))}}function rh(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zu("error",e),zu("load",e);var n,s=!1,i=!1;for(n in r)if(r.hasOwnProperty(n)){var a=r[n];if(null!=a)switch(n){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:eh(e,t,n,a,r,null)}}return i&&eh(e,t,"srcSet",r.srcSet,r,null),void(s&&eh(e,t,"src",r.src,r,null));case"input":zu("invalid",e);var l=n=a=i=null,c=null,u=null;for(s in r)if(r.hasOwnProperty(s)){var h=r[s];if(null!=h)switch(s){case"name":i=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":n=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:eh(e,t,s,h,r,null)}}return bt(e,n,l,c,u,a,i,!1),void ft(e);case"select":for(i in zu("invalid",e),s=a=n=null,r)if(r.hasOwnProperty(i)&&null!=(l=r[i]))switch(i){case"value":n=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:eh(e,t,i,l,r,null)}return t=n,r=a,e.multiple=!!s,void(null!=t?wt(e,!!s,t,!1):null!=r&&wt(e,!!s,r,!0));case"textarea":for(a in zu("invalid",e),n=i=s=null,r)if(r.hasOwnProperty(a)&&null!=(l=r[a]))switch(a){case"value":s=l;break;case"defaultValue":i=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:eh(e,t,a,l,r,null)}return Ct(e,s,i,n),void ft(e);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(s=r[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else eh(e,t,c,s,r,null);return;case"dialog":zu("beforetoggle",e),zu("toggle",e),zu("cancel",e),zu("close",e);break;case"iframe":case"object":zu("load",e);break;case"video":case"audio":for(s=0;s<Lu.length;s++)zu(Lu[s],e);break;case"image":zu("error",e),zu("load",e);break;case"details":zu("toggle",e);break;case"embed":case"source":case"link":zu("error",e),zu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&null!=(s=r[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:eh(e,t,u,s,r,null)}return;default:if(Nt(t)){for(h in r)r.hasOwnProperty(h)&&(void 0!==(s=r[h])&&th(e,t,h,s,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(null!=(s=r[l])&&eh(e,t,l,s,r,null))}var nh=null,sh=null;function ih(e){return 9===e.nodeType?e:e.ownerDocument}function oh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ah(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function lh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ch=null;var uh="function"===typeof setTimeout?setTimeout:void 0,hh="function"===typeof clearTimeout?clearTimeout:void 0,dh="function"===typeof Promise?Promise:void 0,fh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dh?function(e){return dh.resolve(null).then(e).catch(gh)}:uh;function gh(e){setTimeout(function(){throw e})}function ph(e){return"head"===e}function mh(e,t){var r=t,n=0,s=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0<n&&8>n){r=n;var o=e.ownerDocument;if(1&r&&Ch(o.documentElement),2&r&&Ch(o.body),4&r)for(Ch(r=o.head),o=r.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||r.removeChild(o),o=a}}if(0===s)return e.removeChild(i),void Od(t);s--}else"$"===r||"$?"===r||"$!"===r?s++:n=r.charCodeAt(0)-48;else n=0;r=i}while(r);Od(t)}function xh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":xh(r),We(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function yh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vh=null;function wh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function Sh(e,t,r){switch(t=ih(r),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Ch(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);We(e)}var _h=new Map,kh=new Set;function jh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Th=I.d;I.d={f:function(){var e=Th.f(),t=Uc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Fo(t):Th.r(e)},D:function(e){Th.D(e),Oh("dns-prefetch",e,null)},C:function(e,t){Th.C(e,t),Oh("preconnect",e,t)},L:function(e,t,r){Th.L(e,t,r);var n=Nh;if(n&&e&&t){var s='link[rel="preload"][as="'+xt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(s+='[imagesrcset="'+xt(r.imageSrcSet)+'"]',"string"===typeof r.imageSizes&&(s+='[imagesizes="'+xt(r.imageSizes)+'"]')):s+='[href="'+xt(e)+'"]';var i=s;switch(t){case"style":i=Dh(e);break;case"script":i=Ah(e)}_h.has(i)||(e=f({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),_h.set(i,e),null!==n.querySelector(s)||"style"===t&&n.querySelector(Ph(i))||"script"===t&&n.querySelector(Fh(i))||(rh(t=n.createElement("link"),"link",e),Ge(t),n.head.appendChild(t)))}},m:function(e,t){Th.m(e,t);var r=Nh;if(r&&e){var n=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+xt(n)+'"][href="'+xt(e)+'"]',i=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Ah(e)}if(!_h.has(i)&&(e=f({rel:"modulepreload",href:e},t),_h.set(i,e),null===r.querySelector(s))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Fh(i)))return}rh(n=r.createElement("link"),"link",e),Ge(n),r.head.appendChild(n)}}},X:function(e,t){Th.X(e,t);var r=Nh;if(r&&e){var n=Ye(r).hoistableScripts,s=Ah(e),i=n.get(s);i||((i=r.querySelector(Fh(s)))||(e=f({src:e,async:!0},t),(t=_h.get(s))&&zh(e,t),Ge(i=r.createElement("script")),rh(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(s,i))}},S:function(e,t,r){Th.S(e,t,r);var n=Nh;if(n&&e){var s=Ye(n).hoistableStyles,i=Dh(e);t=t||"default";var o=s.get(i);if(!o){var a={loading:0,preload:null};if(o=n.querySelector(Ph(i)))a.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},r),(r=_h.get(i))&&Rh(e,r);var l=o=n.createElement("link");Ge(l),rh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Ih(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(i,o)}}},M:function(e,t){Th.M(e,t);var r=Nh;if(r&&e){var n=Ye(r).hoistableScripts,s=Ah(e),i=n.get(s);i||((i=r.querySelector(Fh(s)))||(e=f({src:e,async:!0,type:"module"},t),(t=_h.get(s))&&zh(e,t),Ge(i=r.createElement("script")),rh(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(s,i))}}};var Nh="undefined"===typeof document?null:document;function Oh(e,t,r){var n=Nh;if(n&&"string"===typeof t&&t){var s=xt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof r&&(s+='[crossorigin="'+r+'"]'),kh.has(s)||(kh.add(s),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(s)&&(rh(t=n.createElement("link"),"link",e),Ge(t),n.head.appendChild(t)))}}function Eh(e,t,r,n){var s,i,a,l,c=(c=Y.current)?jh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof r.precedence&&"string"===typeof r.href?(t=Dh(r.href),(n=(r=Ye(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"===typeof r.href&&"string"===typeof r.precedence){e=Dh(r.href);var u=Ye(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Ph(e)))&&!u._p&&(h.instance=u,h.state.loading=5),_h.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},_h.set(e,r),u||(s=c,i=e,a=r,l=h.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),rh(i,"link",a),Ge(i),s.head.appendChild(i))))),t&&null===n)throw Error(o(528,""));return h}if(t&&null!==n)throw Error(o(529,""));return null;case"script":return t=r.async,"string"===typeof(r=r.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ah(r),(n=(r=Ye(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Dh(e){return'href="'+xt(e)+'"'}function Ph(e){return'link[rel="stylesheet"]['+e+"]"}function Mh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Ah(e){return'[src="'+xt(e)+'"]'}function Fh(e){return"script[async]"+e}function Lh(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+xt(r.href)+'"]');if(n)return t.instance=n,Ge(n),n;var s=f({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Ge(n=(e.ownerDocument||e).createElement("style")),rh(n,"style",s),Ih(n,r.precedence,e),t.instance=n;case"stylesheet":s=Dh(r.href);var i=e.querySelector(Ph(s));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;n=Mh(r),(s=_h.get(s))&&Rh(n,s),Ge(i=(e.ownerDocument||e).createElement("link"));var a=i;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),rh(i,"link",n),t.state.loading|=4,Ih(i,r.precedence,e),t.instance=i;case"script":return i=Ah(r.src),(s=e.querySelector(Fh(i)))?(t.instance=s,Ge(s),s):(n=r,(s=_h.get(i))&&zh(n=f({},r),s),Ge(s=(e=e.ownerDocument||e).createElement("script")),rh(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Ih(n,r.precedence,e));return t.instance}function Ih(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,i=s,o=0;o<n.length;o++){var a=n[o];if(a.dataset.precedence===t)i=a;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Rh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function zh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Bh=null;function Vh(e,t,r){if(null===Bh){var n=new Map,s=Bh=new Map;s.set(r,n)}else(n=(s=Bh).get(r))||(n=new Map,s.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),s=0;s<r.length;s++){var i=r[s];if(!(i[Ve]||i[Ae]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var a=n.get(o);a?a.push(i):n.set(o,[i])}}return n}function Wh(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function Uh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hh=null;function Xh(){}function Yh(){if(this.count--,0===this.count)if(this.stylesheets)qh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gh=null;function qh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gh=new Map,t.forEach($h,e),Gh=null,Yh.call(e))}function $h(e,t){if(!(4&t.state.loading)){var r=Gh.get(e);if(r)var n=r.get(null);else{r=new Map,Gh.set(e,r);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var o=s[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}o=(s=t.instance).getAttribute("data-precedence"),(i=r.get(o)||n)===n&&r.set(null,s),r.set(o,s),this.count++,n=Yh.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Kh={$$typeof:S,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function Qh(e,t,r,n,s,i,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Jh(e,t,r,n,s,i,o,a,l,c,u,h){return e=new Qh(e,t,r,o,a,l,c,h),t=1,!0===i&&(t|=24),i=Rn(3,null,null,t),e.current=i,i.stateNode=e,(t=Fs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:r,cache:t},si(i),e}function Zh(e){return e?e=Ln:Ln}function ed(e,t,r,n,s,i){s=Zh(s),null===n.context?n.context=s:n.pendingContext=s,(n=oi(t)).payload={element:r},null!==(i=void 0===i?null:i)&&(n.callback=i),null!==(r=ai(e,n,t))&&(Rc(r,0,t),li(r,e,t))}function td(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function rd(e,t){td(e,t),(e=e.alternate)&&td(e,t)}function nd(e){if(13===e.tag){var t=Mn(e,67108864);null!==t&&Rc(t,0,67108864),rd(e,67108864)}}var sd=!0;function id(e,t,r,n){var s=L.T;L.T=null;var i=I.p;try{I.p=2,ad(e,t,r,n)}finally{I.p=i,L.T=s}}function od(e,t,r,n){var s=L.T;L.T=null;var i=I.p;try{I.p=8,ad(e,t,r,n)}finally{I.p=i,L.T=s}}function ad(e,t,r,n){if(sd){var s=ld(n);if(null===s)Hu(e,t,n,cd,r),vd(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return fd=wd(fd,e,t,r,n,s),!0;case"dragenter":return gd=wd(gd,e,t,r,n,s),!0;case"mouseover":return pd=wd(pd,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return md.set(i,wd(md.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,xd.set(i,wd(xd.get(i)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(vd(e,n),4&t&&-1<bd.indexOf(e)){for(;null!==s;){var i=He(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=ve(i.pendingLanes);if(0!==o){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-pe(o);a.entanglements[1]|=l,o&=~l}_u(i),0===(6&sc)&&(_c=ne()+500,ku(0,!1))}}break;case 13:null!==(a=Mn(i,2))&&Rc(a,0,2),Uc(),rd(i,2)}if(null===(i=ld(n))&&Hu(e,t,n,cd,r),i===s)break;s=i}null!==s&&n.stopPropagation()}else Hu(e,t,n,null,r)}}function ld(e){return ud(e=Mt(e))}var cd=null;function ud(e){if(cd=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=u(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cd=e,null}function hd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case ie:return 2;case oe:return 8;case ae:case le:return 32;case ce:return 268435456;default:return 32}default:return 32}}var dd=!1,fd=null,gd=null,pd=null,md=new Map,xd=new Map,yd=[],bd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vd(e,t){switch(e){case"focusin":case"focusout":fd=null;break;case"dragenter":case"dragleave":gd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":md.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xd.delete(t.pointerId)}}function wd(e,t,r,n,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=He(t))&&nd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Sd(e){var t=Ue(e.target);if(null!==t){var r=l(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=u(r)))return e.blockedOn=t,void function(e,t){var r=I.p;try{return I.p=e,t()}finally{I.p=r}}(e.priority,function(){if(13===r.tag){var e=Lc();e=Ee(e);var t=Mn(r,e);null!==t&&Rc(t,0,e),rd(r,e)}})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Cd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=ld(e.nativeEvent);if(null!==r)return null!==(t=He(r))&&nd(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Pt=n,r.target.dispatchEvent(n),Pt=null,t.shift()}return!0}function _d(e,t,r){Cd(e)&&r.delete(t)}function kd(){dd=!1,null!==fd&&Cd(fd)&&(fd=null),null!==gd&&Cd(gd)&&(gd=null),null!==pd&&Cd(pd)&&(pd=null),md.forEach(_d),xd.forEach(_d)}function jd(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kd)))}var Td=null;function Nd(e){Td!==e&&(Td=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Td===e&&(Td=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],s=e[t+2];if("function"!==typeof n){if(null===ud(n||r))continue;break}var i=He(r);null!==i&&(e.splice(t,3),t-=3,Mo(i,{pending:!0,data:s,method:r.method,action:n},n,s))}}))}function Od(e){function t(t){return jd(t,e)}null!==fd&&jd(fd,e),null!==gd&&jd(gd,e),null!==pd&&jd(pd,e),md.forEach(t),xd.forEach(t);for(var r=0;r<yd.length;r++){var n=yd[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<yd.length&&null===(r=yd[0]).blockedOn;)Sd(r),null===r.blockedOn&&yd.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var s=r[n],i=r[n+1],o=s[Fe]||null;if("function"===typeof i)o||Nd(r);else if(o){var a=null;if(i&&i.hasAttribute("formAction")){if(s=i,o=i[Fe]||null)a=o.formAction;else if(null!==ud(s))continue}else a=o.action;"function"===typeof a?r[n+1]=a:(r.splice(n,3),n-=3),Nd(r)}}}function Ed(e){this._internalRoot=e}function Dd(e){this._internalRoot=e}Dd.prototype.render=Ed.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ed(t.current,Lc(),e,t,null,null)},Dd.prototype.unmount=Ed.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ed(e.current,2,null,e,null,null),Uc(),t[Le]=null}},Dd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var r=0;r<yd.length&&0!==t&&t<yd[r].priority;r++);yd.splice(r,0,e),0===r&&Sd(e)}};var Pd=s.version;if("19.1.1"!==Pd)throw Error(o(527,Pd,"19.1.1"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(n=s.return)){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return h(s),e;if(i===n)return h(s),t;i=i.sibling}throw Error(o(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,c=s.child;c;){if(c===r){a=!0,r=s,n=i;break}if(c===n){a=!0,n=s,r=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===r){a=!0,r=i,n=s;break}if(c===n){a=!0,n=i,r=s;break}c=c.sibling}if(!a)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Md={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{de=Ad.inject(Md),fe=Ad}catch(Fd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var r=!1,n="",s=va,i=wa,l=Sa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jh(e,1,!1,null,0,r,n,s,i,l,0,null),e[Le]=t.current,Wu(e),new Ed(t)},t.hydrateRoot=function(e,t,r){if(!a(e))throw Error(o(299));var n=!1,s="",i=va,l=wa,c=Sa,u=null;return null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onUncaughtError&&(i=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(u=r.formState)),(t=Jh(e,1,!0,t,0,n,s,i,l,c,0,u)).context=Zh(null),r=t.current,(s=oi(n=Ee(n=Lc()))).callback=null,ai(r,s,n),r=n,t.current.lanes=r,Te(t,r),_u(t),e[Le]=t.current,Wu(e),new Dd(t)},t.version="19.1.1"},43:(e,t,r)=>{e.exports=r(288)},288:(e,t)=>{var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function x(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||g}function y(){}function b(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||g}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var v=b.prototype=new y;v.constructor=b,p(v,x.prototype),v.isPureReactComponent=!0;var w=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function _(e,t,n,s,i,o){return n=o.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:o}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var j=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(){}function O(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0;break;case d:return O((u=e._init)(e._payload),t,s,i,o)}}if(u)return o=o(e),u=""===i?"."+T(e,0):i,w(o)?(s="",null!=u&&(s=u.replace(j,"$&/")+"/"),O(o,t,s,"",function(e){return e})):null!=o&&(k(o)&&(l=o,c=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+u,o=_(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var h,g=""===i?".":i+":";if(w(e))for(var p=0;p<e.length;p++)u+=O(i=e[p],t,s,a=g+T(i,p),o);else if("function"===typeof(p=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=O(i=i.value,t,s,a=g+T(i,p++),o);else if("object"===a){if("function"===typeof e.then)return O(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function E(e,t,r){if(null==e)return e;var n=[],s=0;return O(e,n,"","",function(e){return t.call(r,e,s++)}),n}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:E,forEach:function(e,t,r){E(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=p({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!C.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(n[i]=t[i]);var i=arguments.length-2;if(1===i)n.children=r;else if(1<i){for(var o=Array(i),a=0;a<i;a++)o[a]=arguments[a+2];n.children=o}return _(e.type,s,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,r){var n,s={},i=null;if(null!=t)for(n in void 0!==t.key&&(i=""+t.key),t)C.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(s[n]=t[n]);var o=arguments.length-2;if(1===o)s.children=r;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===s[n]&&(s[n]=o[n]);return _(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,r={};S.T=r;try{var n=e(),s=S.S;null!==s&&s(r,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(M,P)}catch(i){P(i)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,r){return S.H.useActionState(e,t,r)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,r){var n=S.H;if("function"===typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,r){return S.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return S.H.useReducer(e,t,r)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return S.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},391:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4)},579:(e,t,r)=>{e.exports=r(799)},672:(e,t,r)=>{var n=r(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=r,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:i}):"script"===r&&o.d.X(e,{crossOrigin:n,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin);o.d.L(e,r,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(e,t,n){var s=null;if(void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in n={},t)"key"!==i&&(n[i]=t[i]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:s,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=s,t.jsxs=s},853:(e,t,r)=>{e.exports=r(896)},896:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<i(s,t)))break e;e[n]=t,e[r]=s,r=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,o=s>>>1;n<o;){var a=2*(n+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,r))c<s&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[a]=r,n=a);else{if(!(c<s&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,g=!1,p=!1,m=!1,x=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function S(e){if(m=!1,w(e),!p)if(null!==n(c))p=!0,_||(_=!0,C());else{var t=n(u);null!==t&&P(S,t.startTime-e)}}var C,_=!1,k=-1,j=5,T=-1;function N(){return!!x||!(t.unstable_now()-T<j)}function O(){if(x=!1,_){var e=t.unstable_now();T=e;var r=!0;try{e:{p=!1,m&&(m=!1,b(k),k=-1),g=!0;var i=f;try{t:{for(w(e),d=n(c);null!==d&&!(d.expirationTime>e&&N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),r=!0;break t}d===n(c)&&s(c),w(e)}else s(c);d=n(c)}if(null!==d)r=!0;else{var l=n(u);null!==l&&P(S,l.startTime-e),r=!1}}break e}finally{d=null,f=i,g=!1}r=void 0}}finally{r?C():_=!1}}}if("function"===typeof v)C=function(){v(O)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,D=E.port2;E.port1.onmessage=O,C=function(){D.postMessage(null)}}else C=function(){y(O,0)};function P(e,r){k=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,r(u,e),null===n(c)&&e===n(u)&&(m?(b(k),k=-1):m=!0,P(S,i-o))):(e.sortIndex=a,r(c,e),p||g||(p=!0,_||(_=!0,C()))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(672)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.m=e,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+".96453769.chunk.js",r.miniCssF=e=>{},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="my-app:";r.l=(n,s,i,o)=>{if(e[n])e[n].push(s);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+i){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+i),a.src=n),e[n]=[s];var d=(t,r)=>{a.onerror=a.onload=null,clearTimeout(f);var s=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach(e=>e(r)),t)return t(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/iVantage360-Tags/",(()=>{var e={792:0};r.f.j=(t,n)=>{var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise((r,n)=>s=e[t]=[r,n]);n.push(s[2]=i);var o=r.p+r.u(t),a=new Error;r.l(o,n=>{if(r.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,s[1](a)}},"chunk-"+t,t)}};var t=(t,n)=>{var s,i,o=n[0],a=n[1],l=n[2],c=0;if(o.some(t=>0!==e[t])){for(s in a)r.o(a,s)&&(r.m[s]=a[s]);if(l)l(r)}for(t&&t(n);c<o.length;c++)i=o[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkmy_app=self.webpackChunkmy_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r(43),s=r(391),i=r(579);const o=e=>{let{onLogout:t,onPageChange:r}=e;const[s,o]=(0,n.useState)("new"),[a,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[h,d]=(0,n.useState)(""),[f,g]=(0,n.useState)("Portrait"),[p,m]=(0,n.useState)(!1),[x,y]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),[w,S]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[C,_]=(0,n.useState)([]),[k,j]=(0,n.useState)(!1),[T,N]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[O,E]=(0,n.useState)([]),[D,P]=(0,n.useState)(!1),[M,A]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[F,L]=(0,n.useState)([]),[I,R]=(0,n.useState)(!1),[z,B]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[V,W]=(0,n.useState)([]),[U,H]=(0,n.useState)(!1),[X,Y]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[G,q]=(0,n.useState)([]),[$,K]=(0,n.useState)(!1),[Q,J]=(0,n.useState)(!1),[Z,ee]=(0,n.useState)(""),[te,re]=(0,n.useState)(new Date),ne=[{title:"Test_Now",createdBy:"Amitesh Sinha",dateCreated:"07-24-2025",dateModified:"07-24-2025",modifiedBy:"Amitesh Sinha"},{title:"new test",createdBy:"Admin",dateCreated:"07-22-2025",dateModified:"07-21-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-21-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-08-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-04-2025",modifiedBy:"Admin"},{title:"4UP No Cents",createdBy:"Ben Streiff",dateCreated:"05-06-2022",dateModified:"06-20-2023",modifiedBy:"Emily Noyola"},{title:"two pages",createdBy:"Admin",dateCreated:"05-04-2022",dateModified:"07-02-2025",modifiedBy:"Admin"},{title:"TAg 2 brs",createdBy:"Admin",dateCreated:"05-04-2022",dateModified:"07-02-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-21-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-21-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-21-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-21-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-21-2025",modifiedBy:"Admin"},{title:"final",createdBy:"Admin",dateCreated:"07-21-2025",dateModified:"07-21-2025",modifiedBy:"Admin"}],se=e=>{"logout"!==e?"store"!==e?(l("new"===e&&!a),o(e)):r("store-tags"):t()},ie=(e,t,r)=>{S(n=>({...n,[e]:{...n[e],[t]:r}}))},oe=(e,t,r)=>{N(n=>({...n,[e]:{...n[e],[t]:r}}))},ae=(e,t,r)=>{A(n=>({...n,[e]:{...n[e],[t]:r}}))},le=(e,t,r)=>{B(n=>({...n,[e]:{...n[e],[t]:r}}))},ce=(e,t,r)=>{Y(n=>({...n,[e]:{...n[e],[t]:r}}))},ue=(e,t)=>{ee(`${e}-${t}`),"dateCreated"===e?K(!0):"dateModified"===e&&J(!0)},he=e=>{re(t=>{const r=new Date(t);return"prev"===e?r.setMonth(r.getMonth()-1):r.setMonth(r.getMonth()+1),r})};return(0,i.jsxs)("div",{className:"h-screen flex flex-col font-system",children:[(0,i.jsx)("div",{className:"bg-gradient-to-br from-orange-primary to-orange-secondary text-black px-6 py-4 shadow-lg flex items-center justify-start h-[70px]",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("i",{className:"fas fa-copy text-3xl text-black bg-none bg-opacity-15 p-2 rounded-md w-9 h-9 flex items-center justify-center"}),(0,i.jsx)("h1",{className:"text-3xl font-semibold tracking-wide text-black",children:"Templates"})]})}),(0,i.jsxs)("div",{className:"flex h-[calc(100vh-70px)]",children:[(0,i.jsxs)("div",{className:"w-[80px] bg-orange-primary flex flex-col justify-between p-0 shadow-lg flex-shrink-0",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 relative hover:bg-white hover:bg-opacity-10 "+("new"===s?"bg-white bg-opacity-20":""),onClick:e=>{e.stopPropagation(),l(!a),o("new")},children:[(0,i.jsx)("i",{className:"fas fa-file-plus text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"New"}),(0,i.jsx)("i",{className:`fas fa-chevron-${a?"up":"down"} absolute bottom-2 right-2 text-xs opacity-80 transition-transform duration-200 drop-shadow-sm`}),a&&(0,i.jsx)("div",{className:"absolute top-full left-0 bg-white border border-gray-300 rounded shadow-lg z-50 min-w-32 max-w-36",children:["1UP","1UP (LEGAL)","2UP","4UP","4UP(4.25 X 5.1)","8UP","16UP","16UP","Avery 5160","Avery 5163","Two Page","Full Page"].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 text-gray-700 hover:bg-gray-100 cursor-pointer",onClick:t=>{var r;t.stopPropagation(),r=e,console.log("Creating new template:",r),d(r),l(!1),u(!0),g("Portrait"),m(!1),console.log("Template selected:",r,"Orientation set to Portrait")},children:[(0,i.jsx)("i",{className:"fas fa-file-medical text-black text-lg"}),(0,i.jsx)("span",{className:"text-xs font-medium",children:e})]},t))})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10 "+("list"===s?"bg-white bg-opacity-20":""),onClick:()=>se("list"),children:[(0,i.jsx)("i",{className:"fas fa-list text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"List"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10 "+("store"===s?"bg-white bg-opacity-20":""),onClick:()=>se("store"),children:[(0,i.jsx)("i",{className:"fas fa-tags text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"Store Tags"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col mt-auto",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10",children:[(0,i.jsx)("i",{className:"fas fa-chart-line text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"View Log"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10",onClick:()=>se("logout"),children:[(0,i.jsx)("i",{className:"fas fa-sign-out-alt text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"Logout"})]})]})]}),(0,i.jsx)("div",{className:"flex-1 flex flex-col bg-gray-100 overflow-hidden",children:(0,i.jsxs)("div",{className:"h-full flex flex-col p-4",children:[(0,i.jsxs)("div",{className:"pb-4 flex items-center gap-3 border-b border-gray-300 min-h-[45px]",children:[(0,i.jsx)("h2",{className:"text-sm font-medium text-gray-800 m-0",children:"Saved Templates"}),(0,i.jsx)("button",{className:"bg-gray-300 hover:bg-gray-400 border-none text-gray-700 text-sm cursor-pointer p-0 transition-colors duration-200 flex items-center justify-center w-6 h-6",children:(0,i.jsx)("i",{className:"fas fa-sync-alt"})})]}),(0,i.jsx)("div",{className:"flex-1 overflow-auto bg-white border border-gray-300",children:(0,i.jsxs)("table",{className:"w-full border-collapse text-sm bg-white table-fixed",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"bg-gray-100 border-b border-gray-300",children:[(0,i.jsxs)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[15%] hover:bg-gray-200",children:["Title",(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{v(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[12%] hover:bg-gray-200",children:["Created By",(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{j(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[12%] hover:bg-gray-200",children:["Date Created",(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{P(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[12%] hover:bg-gray-200",children:["Date Modified",(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{R(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[12%] hover:bg-gray-200",children:["Modified By",(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{H(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsx)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[8%] hover:bg-gray-200",children:"Edit"}),(0,i.jsx)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[8%] hover:bg-gray-200",children:"Clone"}),(0,i.jsx)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[8%] hover:bg-gray-200",children:"Print"}),(0,i.jsx)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r-0 whitespace-nowrap relative text-xs bg-gray-100 cursor-pointer overflow-hidden text-ellipsis w-[8%] hover:bg-gray-200",children:"Delete"})]})}),(0,i.jsx)("tbody",{children:ne.map((e,t)=>(0,i.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:e.title}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:e.createdBy}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:e.dateCreated}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:e.dateModified}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:e.modifiedBy}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:(0,i.jsxs)("button",{className:"bg-gray-200 hover:bg-gray-300 border border-gray-300 rounded px-2 py-1 text-xs transition-colors",children:[(0,i.jsx)("i",{className:"fas fa-edit mr-1"}),"Edit"]})}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:(0,i.jsxs)("button",{className:"bg-gray-200 hover:bg-gray-300 border border-gray-300 rounded px-2 py-1 text-xs transition-colors",children:[(0,i.jsx)("i",{className:"fas fa-copy mr-1"}),"Clone"]})}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs border-r border-gray-200",children:(0,i.jsxs)("button",{className:"bg-gray-200 hover:bg-gray-300 border border-gray-300 rounded px-2 py-1 text-xs transition-colors",children:[(0,i.jsx)("i",{className:"fas fa-print mr-1"}),"Print"]})}),(0,i.jsx)("td",{className:"py-2 px-3 text-xs",children:(0,i.jsxs)("button",{className:"bg-gray-200 hover:bg-gray-300 border border-gray-300 rounded px-2 py-1 text-xs transition-colors",children:[(0,i.jsx)("i",{className:"fas fa-trash mr-1"}),"Delete"]})})]},t))})]})}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-300 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-double-left text-xs"})}),(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-left text-xs"})}),(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-right text-xs"})}),(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-double-right text-xs"})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-700",children:[(0,i.jsx)("span",{style:{fontSize:"12px"},children:"Page"}),(0,i.jsx)("input",{type:"text",className:"border border-gray-400 px-1 py-0 w-8 text-center text-sm",style:{height:"18px",fontSize:"11px"},defaultValue:"1"}),(0,i.jsx)("span",{style:{fontSize:"12px"},children:"of 1"})]})]})]})}),c&&!p&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:(x?"w-full h-full":"w-[270px] h-[300px]")+" flex flex-col transition-all duration-200",style:{backgroundColor:"rgba(240, 240, 240, 0.6)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1.8px solid #59f9ff",borderRadius:"0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"12px"},children:[(0,i.jsxs)("div",{className:"px-2 py-2 flex items-center justify-between text-sm text-black h-[35px] bg-transparent font-normal",style:{paddingLeft:"9px"},children:[(0,i.jsx)("span",{children:"Select Page Orientation"}),(0,i.jsxs)("div",{className:"flex gap-0",children:[(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-gray-300",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>{m(!0),y(!1)},children:"\u2212"}),(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-gray-300",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>y(!x),children:x?"\ud83d\uddd7":"\u25a1"}),(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-red-500 hover:text-white",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>{u(!1),g("Portrait"),y(!1),m(!1)},children:"\xd7"})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col bg-transparent",style:x?{position:"relative",height:"100%",backgroundColor:"transparent"}:{},children:[(0,i.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center",style:{padding:"30px 20px 20px 20px"},children:(0,i.jsxs)("div",{className:"flex justify-center gap-12",style:{marginBottom:"-20px"},children:[(0,i.jsxs)("div",{className:"flex flex-col items-center cursor-pointer transition-all duration-200",style:{padding:"5px"},onClick:()=>g("Portrait"),children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-3 border-none relative text-white transition-all duration-200",style:{width:"60px",height:"60px",backgroundColor:"Portrait"===f?"#20a8d8":"#9e9e9e",fontSize:"24px"},children:(0,i.jsx)("i",{className:"fas fa-bars",style:{transform:"rotate(90deg)"}})}),(0,i.jsx)("span",{className:"text-gray-800",style:{fontSize:"17px",fontWeight:"normal",fontFamily:"Segoe UI, sans-serif"},children:"Portrait"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center cursor-pointer transition-all duration-200",style:{padding:"5px"},onClick:()=>g("Landscape"),children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-3 border-none relative text-white transition-all duration-200",style:{width:"60px",height:"60px",backgroundColor:"Landscape"===f?"#20a8d8":"#9e9e9e",fontSize:"24px"},children:(0,i.jsx)("i",{className:"fas fa-bars"})}),(0,i.jsx)("span",{className:"text-gray-800",style:{fontSize:"17px",fontWeight:"normal",fontFamily:"Segoe UI, sans-serif"},children:"Landscape"})]})]})}),(0,i.jsx)("div",{className:"text-center bg-transparent",style:{padding:"15px 20px 20px 20px",borderTop:"none"},children:(0,i.jsx)("button",{className:"border-none cursor-pointer text-gray-800 transition-all duration-200 hover:bg-gray-300",style:{backgroundColor:"#dbdbdb",padding:"15px 17px",marginBottom:"-20px",fontSize:"13px",fontFamily:"Segoe UI, sans-serif",fontWeight:"normal"},onClick:()=>{console.log("Creating template:",h,f),u(!1),console.log("Continue clicked. Template:",h,"Orientation:",f),console.log("Navigating to fabric-canvas page"),r("fabric-canvas")},children:"Continue"})})]})]})}),c&&p&&(0,i.jsx)("div",{className:"fixed bottom-2 left-[85px] px-3 py-1 cursor-pointer text-xs text-gray-800 z-[1500] rounded-t shadow-lg transition-all duration-200",style:{background:"linear-gradient(to bottom, #e8e8e8, #d0d0d0)",border:"1px solid #999",borderBottom:"none",fontFamily:"Segoe UI, sans-serif"},onClick:()=>m(!1),children:(0,i.jsx)("span",{className:"whitespace-nowrap",children:"Select Page Orientation"})}),b&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-white text-sm font-medium",children:"Filter Templates"}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{v(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 max-h-48 overflow-y-auto",children:[(0,i.jsxs)("div",{className:"flex items-center mb-3",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAll",checked:C.length===ne.length,onChange:e=>{return t=e.target.checked,void _(t?ne.map((e,t)=>t):[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAll",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("div",{className:"space-y-2",children:ne.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:`item-${t}`,checked:C.includes(t),onChange:e=>((e,t)=>{_(t?t=>[...t,e]:t=>t.filter(t=>t!==e))})(t,e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:`item-${t}`,className:"text-white text-sm cursor-pointer",children:e.title})]},t))})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:w.condition1.operator,onChange:e=>ie("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:w.condition1.value,onChange:e=>ie("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:w.condition2.operator,onChange:e=>ie("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:w.condition2.value,onChange:e=>ie("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying filter:",w),v(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{S({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),_([])},children:"Clear Filter"})]})]})}),k&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-white text-sm font-medium",children:"Filter Created By"}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{j(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 max-h-48 overflow-y-auto",children:[(0,i.jsxs)("div",{className:"flex items-center mb-3",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllCreatedBy",checked:O.length===[...new Set(ne.map(e=>e.createdBy))].length,onChange:e=>(e=>{const t=[...new Set(ne.map(e=>e.createdBy))];E(e?t.map((e,t)=>t):[])})(e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllCreatedBy",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("div",{className:"space-y-2",children:[...new Set(ne.map(e=>e.createdBy))].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:`createdBy-item-${t}`,checked:O.includes(t),onChange:e=>((e,t)=>{E(t?t=>[...t,e]:t=>t.filter(t=>t!==e))})(t,e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:`createdBy-item-${t}`,className:"text-white text-sm cursor-pointer",children:e})]},t))})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:T.condition1.operator,onChange:e=>oe("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:T.condition1.value,onChange:e=>oe("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:T.condition2.operator,onChange:e=>oe("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:T.condition2.value,onChange:e=>oe("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Created By filter:",T),j(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{N({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),E([])},children:"Clear Filter"})]})]})}),D&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllDateCreated",checked:F.length===[...new Set(ne.map(e=>e.dateCreated))].length,onChange:e=>(e=>{const t=[...new Set(ne.map(e=>e.dateCreated))];L(e?t.map((e,t)=>t):[])})(e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllDateCreated",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{P(!1)},children:"\xd7"})]}),(0,i.jsx)("div",{className:"px-4 py-3 border-b border-gray-600 max-h-48 overflow-y-auto bg-gray-700",children:(0,i.jsx)("div",{className:"space-y-2",children:[...new Set(ne.map(e=>e.dateCreated))].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:`dateCreated-item-${t}`,checked:F.includes(t),onChange:e=>((e,t)=>{L(t?t=>[...t,e]:t=>t.filter(t=>t!==e))})(t,e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:`dateCreated-item-${t}`,className:"text-white text-sm cursor-pointer",children:e})]},t))})}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:M.condition1.operator,onChange:e=>ae("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Is greater than"}),(0,i.jsx)("option",{children:"Is less than"}),(0,i.jsx)("option",{children:"Is greater than or equal to"}),(0,i.jsx)("option",{children:"Is less than or equal to"}),(0,i.jsx)("option",{children:"Is between"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:M.condition1.value,onChange:e=>ae("condition1","value",e.target.value),placeholder:"Enter date",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",onClick:()=>ue("dateCreated","condition1"),children:(0,i.jsx)("i",{className:"fas fa-calendar text-sm"})})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:M.condition2.operator,onChange:e=>ae("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Is greater than"}),(0,i.jsx)("option",{children:"Is less than"}),(0,i.jsx)("option",{children:"Is greater than or equal to"}),(0,i.jsx)("option",{children:"Is less than or equal to"}),(0,i.jsx)("option",{children:"Is between"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:M.condition2.value,onChange:e=>ae("condition2","value",e.target.value),placeholder:"Enter date",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",onClick:()=>ue("dateCreated","condition2"),children:(0,i.jsx)("i",{className:"fas fa-calendar text-sm"})})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Date Created filter:",M),P(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{A({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),L([])},children:"Clear Filter"})]})]})}),I&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllDateModified",checked:V.length===[...new Set(ne.map(e=>e.dateModified))].length,onChange:e=>(e=>{const t=[...new Set(ne.map(e=>e.dateModified))];W(e?t.map((e,t)=>t):[])})(e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllDateModified",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{R(!1)},children:"\xd7"})]}),(0,i.jsx)("div",{className:"px-4 py-3 border-b border-gray-600 max-h-48 overflow-y-auto bg-gray-700",children:(0,i.jsx)("div",{className:"space-y-2",children:[...new Set(ne.map(e=>e.dateModified))].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:`dateModified-item-${t}`,checked:V.includes(t),onChange:e=>((e,t)=>{W(t?t=>[...t,e]:t=>t.filter(t=>t!==e))})(t,e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:`dateModified-item-${t}`,className:"text-white text-sm cursor-pointer",children:e})]},t))})}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:z.condition1.operator,onChange:e=>le("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Is greater than"}),(0,i.jsx)("option",{children:"Is less than"}),(0,i.jsx)("option",{children:"Is greater than or equal to"}),(0,i.jsx)("option",{children:"Is less than or equal to"}),(0,i.jsx)("option",{children:"Is between"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:z.condition1.value,onChange:e=>le("condition1","value",e.target.value),placeholder:"Enter date",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",onClick:()=>ue("dateModified","condition1"),children:(0,i.jsx)("i",{className:"fas fa-calendar text-sm"})})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:z.condition2.operator,onChange:e=>le("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Is greater than"}),(0,i.jsx)("option",{children:"Is less than"}),(0,i.jsx)("option",{children:"Is greater than or equal to"}),(0,i.jsx)("option",{children:"Is less than or equal to"}),(0,i.jsx)("option",{children:"Is between"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:z.condition2.value,onChange:e=>le("condition2","value",e.target.value),placeholder:"Enter date",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",onClick:()=>ue("dateModified","condition2"),children:(0,i.jsx)("i",{className:"fas fa-calendar text-sm"})})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Date Modified filter:",z),R(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{B({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),W([])},children:"Clear Filter"})]})]})}),U&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllModifiedBy",checked:G.length===[...new Set(ne.map(e=>e.modifiedBy))].length,onChange:e=>(e=>{const t=[...new Set(ne.map(e=>e.modifiedBy))];q(e?t.map((e,t)=>t):[])})(e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllModifiedBy",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{H(!1)},children:"\xd7"})]}),(0,i.jsx)("div",{className:"px-4 py-3 border-b border-gray-600 max-h-48 overflow-y-auto",children:(0,i.jsx)("div",{className:"space-y-2",children:[...new Set(ne.map(e=>e.modifiedBy))].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:`modifiedBy-item-${t}`,checked:G.includes(t),onChange:e=>((e,t)=>{q(t?t=>[...t,e]:t=>t.filter(t=>t!==e))})(t,e.target.checked),className:"mr-2"}),(0,i.jsx)("label",{htmlFor:`modifiedBy-item-${t}`,className:"text-white text-sm cursor-pointer",children:e})]},t))})}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:X.condition1.operator,onChange:e=>ce("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:X.condition1.value,onChange:e=>ce("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:X.condition2.operator,onChange:e=>ce("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:X.condition2.value,onChange:e=>ce("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Modified By filter:",X),H(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{Y({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),q([])},children:"Clear Filter"})]})]})}),($||Q)&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2001]",children:(0,i.jsxs)("div",{className:"bg-white border border-gray-300 rounded shadow-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:te.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:()=>he("prev"),children:(0,i.jsx)("i",{className:"fas fa-chevron-up text-gray-600"})}),(0,i.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:()=>he("next"),children:(0,i.jsx)("i",{className:"fas fa-chevron-down text-gray-600"})})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["SU","MO","TU","WE","TH","FR","SA"].map(e=>(0,i.jsx)("div",{className:"text-center text-xs font-medium text-gray-600 py-1",children:e},e))}),(0,i.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(e=>{const t=e.getFullYear(),r=e.getMonth(),n=new Date(t,r,1),s=new Date(t,r+1,0).getDate(),i=n.getDay(),o=[],a=new Date(t,r-1,0).getDate();for(let c=i-1;c>=0;c--)o.push({date:new Date(t,r-1,a-c),isCurrentMonth:!1});for(let c=1;c<=s;c++)o.push({date:new Date(t,r,c),isCurrentMonth:!0});const l=42-o.length;for(let c=1;c<=l;c++)o.push({date:new Date(t,r+1,c),isCurrentMonth:!1});return o})(te).map((e,t)=>(0,i.jsx)("button",{className:`p-2 text-sm rounded hover:bg-blue-100 transition-colors ${e.isCurrentMonth?"text-gray-800 hover:bg-blue-200":"text-gray-400"} ${e.date.toDateString()===(new Date).toDateString()?"bg-blue-500 text-white hover:bg-blue-600":""}`,onClick:()=>e.isCurrentMonth&&(e=>{const t=e.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});if(Z.includes("dateCreated")){const e=Z.split("-")[1];ae(e,"value",t),K(!1)}else if(Z.includes("dateModified")){const e=Z.split("-")[1];le(e,"value",t),J(!1)}})(e.date),disabled:!e.isCurrentMonth,children:e.date.getDate()},t))}),(0,i.jsx)("div",{className:"mt-4 text-center",children:(0,i.jsx)("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded transition-colors",onClick:()=>{K(!1),J(!1),ee("")},children:"Close"})})]})})]})]})},a=e=>{let{onLogout:t,onPageChange:r}=e;const[s,o]=(0,n.useState)("store"),[a,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[h,d]=(0,n.useState)(""),[f,g]=(0,n.useState)("Portrait"),[p,m]=(0,n.useState)(!1),[x,y]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),[w,S]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[C,_]=(0,n.useState)([]),[k,j]=(0,n.useState)(!1),[T,N]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[O,E]=(0,n.useState)([]),[D,P]=(0,n.useState)(!1),[M,A]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[F,L]=(0,n.useState)([]),[I,R]=(0,n.useState)(!1),[z,B]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[V,W]=(0,n.useState)([]),[U,H]=(0,n.useState)(!1),[X,Y]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[G,q]=(0,n.useState)([]),[$,K]=(0,n.useState)(!1),[Q,J]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[Z,ee]=(0,n.useState)([]),[te,re]=(0,n.useState)(!1),[ne,se]=(0,n.useState)({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),[ie,oe]=(0,n.useState)([]);(0,n.useEffect)(()=>{const e=()=>{l(!1)};return a&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[a]);const ae=e=>{"logout"!==e?"list"!==e?(l("new"===e&&!a),o(e)):r("templates"):t()},le=(e,t,r)=>{N(n=>({...n,[e]:{...n[e],[t]:r}}))},ce=(e,t,r)=>{A(n=>({...n,[e]:{...n[e],[t]:r}}))},ue=(e,t,r)=>{B(n=>({...n,[e]:{...n[e],[t]:r}}))},he=(e,t,r)=>{Y(n=>({...n,[e]:{...n[e],[t]:r}}))},de=(e,t,r)=>{J(n=>({...n,[e]:{...n[e],[t]:r}}))},fe=(e,t,r)=>{se(n=>({...n,[e]:{...n[e],[t]:r}}))};return(0,i.jsxs)("div",{className:"h-screen flex flex-col font-system",children:[(0,i.jsx)("div",{className:"bg-gradient-to-br from-orange-primary to-orange-secondary text-black px-6 py-4 shadow-lg flex items-center justify-start h-[70px]",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("i",{className:"fas fa-copy text-3xl text-black bg-none bg-opacity-15 p-2 rounded-md w-9 h-9 flex items-center justify-center"}),(0,i.jsx)("h1",{className:"text-3xl font-semibold tracking-wide text-black",children:"Store Tags"})]})}),(0,i.jsxs)("div",{className:"flex h-[calc(100vh-70px)]",children:[(0,i.jsxs)("div",{className:"w-[80px] bg-orange-primary flex flex-col justify-between p-0 shadow-lg flex-shrink-0",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 relative hover:bg-white hover:bg-opacity-10 "+("new"===s?"bg-white bg-opacity-20":""),onClick:e=>{e.stopPropagation(),l(!a),o("new")},children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("i",{className:"fas fa-file-plus text-lg opacity-90"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95",children:"New"}),(0,i.jsx)("i",{className:`fas fa-chevron-${a?"up":"down"} text-xs opacity-80 transition-transform duration-200`})]}),a&&(0,i.jsx)("div",{className:"absolute top-full left-0 bg-white border border-gray-300 rounded shadow-lg z-50 min-w-32 max-w-36",children:["1UP","1UP (LEGAL)","2UP","4UP","4UP(4.25 X 5.1)","8UP","16UP","16UP","Avery 5160","Avery 5163","Two Page","Full Page"].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 text-gray-700 hover:bg-gray-100 cursor-pointer",onClick:t=>{var r;t.stopPropagation(),r=e,console.log("Creating new template:",r),d(r),l(!1),u(!0),g("Portrait"),m(!1)},children:[(0,i.jsx)("i",{className:"fas fa-file-medical text-black text-lg"}),(0,i.jsx)("span",{className:"text-xs font-medium",children:e})]},t))})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10 "+("list"===s?"bg-white bg-opacity-20":""),onClick:()=>ae("list"),children:[(0,i.jsx)("i",{className:"fas fa-list text-lg mb-1 opacity-90"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95",children:"List"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10 "+("store"===s?"bg-white bg-opacity-20":""),onClick:()=>ae("store"),children:[(0,i.jsx)("i",{className:"fas fa-tags text-lg mb-1 opacity-90"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95",children:"Store Tags"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col mt-auto",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10",children:[(0,i.jsx)("i",{className:"fas fa-chart-line text-lg mb-1 opacity-90"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95",children:"View Log"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10",onClick:()=>ae("logout"),children:[(0,i.jsx)("i",{className:"fas fa-sign-out-alt text-lg mb-1 opacity-90"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95",children:"Logout"})]})]})]}),(0,i.jsxs)("div",{className:"flex-1 p-0 bg-white flex flex-col overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-white py-3 px-4 border-b border-gray-300 flex justify-between items-center flex-wrap gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("span",{className:"text-sm text-gray-700 font-medium",style:{fontSize:"13px"},children:"Filter Sequences"})}),(0,i.jsxs)("div",{className:"relative flex items-center",children:[(0,i.jsx)("select",{className:"py-1 px-2 bg-transparent border-0 border-b border-gray-400 text-sm text-gray-700 min-w-[140px] cursor-pointer focus:outline-none focus:border-blue-500 appearance-none",style:{fontSize:"13px",paddingRight:"20px"},children:(0,i.jsx)("option",{children:"... Select Store ..."})}),(0,i.jsx)("i",{className:"fas fa-chevron-down absolute right-1 text-gray-500 text-xs pointer-events-none"})]}),(0,i.jsxs)("div",{className:"relative flex items-center",children:[(0,i.jsx)("select",{className:"py-1 px-2 bg-transparent border-0 border-b border-gray-400 text-sm text-gray-700 min-w-[140px] cursor-pointer focus:outline-none focus:border-blue-500 appearance-none",style:{fontSize:"13px",paddingRight:"20px"},children:(0,i.jsx)("option",{children:"... Select Tag ..."})}),(0,i.jsx)("i",{className:"fas fa-chevron-down absolute right-1 text-gray-500 text-xs pointer-events-none"})]}),(0,i.jsxs)("button",{className:"bg-[#90ee90] hover:bg-green-400 text-black border-none py-5 px-3 text-sm cursor-pointer flex items-center gap-2 transition-colors duration-200",style:{fontSize:"12px",height:"32px"},children:[(0,i.jsx)("i",{className:"fas fa-sync-alt text-xs"}),(0,i.jsx)("span",{children:"Refresh"})]}),(0,i.jsxs)("div",{className:"relative flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-search absolute left-3 text-gray-500 text-sm"}),(0,i.jsx)("input",{type:"text",className:"py-2 pl-10 pr-3 border border-gray-400 bg-white text-sm min-w-[200px] focus:outline-none focus:border-blue-500",style:{fontSize:"13px",height:"32px"},placeholder:""})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("button",{className:"bg-white hover:bg-[#e1e1e1] text-black border border-gray-400 py-2 px-4 text-sm cursor-pointer flex items-center gap-2 transition-colors duration-200",style:{fontSize:"12px",height:"32px"},children:[(0,i.jsx)("i",{className:"fa-solid fa-check-double text-sm"}),(0,i.jsx)("span",{children:"Select All"})]}),(0,i.jsxs)("button",{className:"bg-white hover:bg-gray-50 text-gray-700 border border-gray-400 py-2 px-4 text-sm cursor-pointer flex items-center gap-2 transition-colors duration-200",style:{fontSize:"12px",height:"32px"},children:[(0,i.jsx)("i",{className:"far fa-square text-sm"}),(0,i.jsx)("span",{children:"Deselect All"})]})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-300 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-double-left text-xs"})}),(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-left text-xs"})}),(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-right text-xs"})}),(0,i.jsx)("button",{className:"bg-white hover:bg-gray-100 border border-gray-400 px-2 py-1 text-sm cursor-pointer flex items-center justify-center text-gray-700 transition-all duration-200",style:{width:"24px",height:"22px"},children:(0,i.jsx)("i",{className:"fas fa-angle-double-right text-xs"})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-700",children:[(0,i.jsx)("span",{style:{fontSize:"12px"},children:"Page"}),(0,i.jsx)("input",{type:"text",className:"border border-gray-400 px-1 py-0 w-8 text-center text-sm",style:{height:"18px",fontSize:"11px"},defaultValue:"1"}),(0,i.jsx)("span",{style:{fontSize:"12px"},children:"of 1"})]})]}),(0,i.jsx)("div",{className:"flex-1 overflow-auto bg-white border-l border-r border-gray-300",children:(0,i.jsxs)("table",{className:"w-full border-collapse text-sm bg-white",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"bg-gray-100",children:[(0,i.jsxs)("th",{className:"py-2 px-3 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap text-xs bg-gray-100 cursor-pointer relative",style:{width:"50px"},children:[(0,i.jsx)("span",{className:"mr-3",children:"Sel"}),(0,i.jsx)("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{v(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-2 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap text-xs bg-gray-100 cursor-pointer hover:bg-gray-200 relative",style:{width:"80px"},children:[(0,i.jsx)("span",{children:"BC #"}),(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{j(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-2 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap text-xs bg-gray-100 cursor-pointer hover:bg-gray-200 relative",style:{width:"120px"},children:[(0,i.jsx)("span",{children:"Item"}),(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{P(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-2 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap text-xs bg-gray-100 cursor-pointer hover:bg-gray-200 relative",style:{minWidth:"200px"},children:[(0,i.jsx)("span",{children:"Description"}),(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{R(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-2 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap text-xs bg-gray-100 cursor-pointer hover:bg-gray-200 relative",style:{width:"120px"},children:[(0,i.jsx)("span",{children:"Template"}),(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{H(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-2 text-left font-medium text-gray-600 border-r border-gray-300 whitespace-nowrap text-xs bg-gray-100 cursor-pointer hover:bg-gray-200 relative",style:{width:"120px"},children:[(0,i.jsx)("span",{children:"Date Created"}),(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{K(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]}),(0,i.jsxs)("th",{className:"py-2 px-2 text-left font-medium text-gray-600 whitespace-nowrap text-xs bg-gray-100 cursor-pointer hover:bg-gray-200 relative",style:{width:"120px"},children:[(0,i.jsx)("span",{children:"Created By"}),(0,i.jsx)("button",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-xs text-gray-500 opacity-70 hover:opacity-100 cursor-pointer",onClick:()=>{re(!0)},children:(0,i.jsx)("i",{className:"fas fa-filter text-xs"})})]})]})}),(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:7,className:"text-center text-gray-500 italic py-8 text-sm border-b border-gray-300",children:"No data available"})})})]})}),(0,i.jsx)("div",{className:"bg-white py-6 px-4 flex justify-center border-t border-gray-300",children:(0,i.jsxs)("div",{className:"bg-orange-200 p-4 rounded flex gap-4 justify-center shadow-sm",children:[(0,i.jsxs)("button",{className:"bg-[#e6d4b9] hover:bg-[#d8c6ab] border-none py-2 px-4 text-sm cursor-pointer flex items-center gap-2 text-black transition-all duration-200",style:{fontSize:"12px"},children:[(0,i.jsx)("i",{className:"fas fa-print text-sm text-black"}),(0,i.jsx)("span",{className:"text-black",children:"Print Selected"})]}),(0,i.jsxs)("button",{className:"bg-[#e6d4b9] hover:bg-[#d8c6ab] text-black py-2 px-4 text-sm cursor-pointer flex items-center gap-2 text-black transition-all duration-200",style:{fontSize:"12px"},children:[(0,i.jsx)("i",{className:"fas fa-print text-sm text-black"}),(0,i.jsx)("span",{className:"text-black",children:"Print All"})]}),(0,i.jsxs)("button",{className:"bg-[#e6d4b9] hover:bg-[#d8c6ab] border-none py-2 px-4 text-sm cursor-pointer flex items-center gap-2 text-black transition-all duration-200",style:{fontSize:"12px"},children:[(0,i.jsx)("i",{className:"fas fa-trash text-sm text-black"}),(0,i.jsx)("span",{className:"text-black",children:"Delete Selected"})]}),(0,i.jsxs)("button",{className:"bg-[#e6d4b9] hover:bg-[#d8c6ab] border-none py-2 px-4 text-sm cursor-pointer flex items-center gap-2 text-black transition-all duration-200",style:{fontSize:"12px"},children:[(0,i.jsx)("i",{className:"fas fa-cog text-sm text-black"}),(0,i.jsx)("span",{className:"text-black",children:"Settings"})]})]})})]}),c&&!p&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:(x?"w-full h-full":"w-[270px] h-[300px]")+" flex flex-col transition-all duration-200",style:{backgroundColor:"rgba(240, 240, 240, 0.6)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1.8px solid #59f9ff",borderRadius:"0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"12px"},children:[(0,i.jsxs)("div",{className:"px-2 py-2 flex items-center justify-between text-sm text-black h-[35px] bg-transparent font-normal",style:{paddingLeft:"9px"},children:[(0,i.jsx)("span",{children:"Select Page Orientation"}),(0,i.jsxs)("div",{className:"flex gap-0",children:[(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-gray-300",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>{m(!0),y(!1)},children:"\u2212"}),(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-gray-300",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>y(!x),children:x?"\ud83d\uddd7":"\u25a1"}),(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-red-500 hover:text-white",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>{u(!1),g("Portrait"),y(!1),m(!1)},children:"\xd7"})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col bg-transparent",style:x?{position:"relative",height:"100%",backgroundColor:"transparent"}:{},children:[(0,i.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center",style:{padding:"30px 20px 20px 20px"},children:(0,i.jsxs)("div",{className:"flex justify-center gap-12",style:{marginBottom:"-20px"},children:[(0,i.jsxs)("div",{className:"flex flex-col items-center cursor-pointer transition-all duration-200",style:{padding:"5px"},onClick:()=>g("Portrait"),children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-3 border-none relative text-white transition-all duration-200",style:{width:"60px",height:"60px",backgroundColor:"Portrait"===f?"#20a8d8":"#9e9e9e",fontSize:"24px"},children:(0,i.jsx)("i",{className:"fas fa-bars",style:{transform:"rotate(90deg)"}})}),(0,i.jsx)("span",{className:"text-gray-800",style:{fontSize:"17px",fontWeight:"normal",fontFamily:"Segoe UI, sans-serif"},children:"Portrait"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center cursor-pointer transition-all duration-200",style:{padding:"5px"},onClick:()=>g("Landscape"),children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-3 border-none relative text-white transition-all duration-200",style:{width:"60px",height:"60px",backgroundColor:"Landscape"===f?"#20a8d8":"#9e9e9e",fontSize:"24px"},children:(0,i.jsx)("i",{className:"fas fa-bars"})}),(0,i.jsx)("span",{className:"text-gray-800",style:{fontSize:"17px",fontWeight:"normal",fontFamily:"Segoe UI, sans-serif"},children:"Landscape"})]})]})}),(0,i.jsx)("div",{className:"text-center bg-transparent",style:{padding:"15px 20px 20px 20px",borderTop:"none"},children:(0,i.jsx)("button",{className:"border-none cursor-pointer text-gray-800 transition-all duration-200 hover:bg-gray-300",style:{backgroundColor:"#dbdbdb",padding:"15px 17px",marginBottom:"-20px",fontSize:"13px",fontFamily:"Segoe UI, sans-serif",fontWeight:"normal"},onClick:()=>{console.log("Creating template:",h,f),u(!1),console.log("Continue clicked. Template:",h,"Orientation:",f),console.log("Navigating to fabric-canvas page"),r("fabric-canvas")},children:"Continue"})})]})]})}),c&&p&&(0,i.jsx)("div",{className:"fixed bottom-2 left-[85px] px-3 py-1 cursor-pointer text-xs text-gray-800 z-[1500] rounded-t shadow-lg transition-all duration-200",style:{background:"linear-gradient(to bottom, #e8e8e8, #d0d0d0)",border:"1px solid #999",borderBottom:"none",fontFamily:"Segoe UI, sans-serif"},onClick:()=>m(!1),children:(0,i.jsx)("span",{className:"whitespace-nowrap",children:"Select Page Orientation"})}),b&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-64",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllSel",checked:10===C.length,onChange:e=>{return t=e.target.checked,void _(t?[0,1,2,3,4,5,6,7,8,9]:[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllSel",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{v(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-0",children:[(0,i.jsx)("button",{className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-sm py-2 px-4 transition-colors",onClick:()=>{console.log("Applying Sel filter:",w),v(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-sm py-2 px-4 transition-colors",onClick:()=>{S({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),_([])},children:"Clear Filter"})]})]})}),k&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllBc",checked:10===O.length,onChange:e=>{return t=e.target.checked,void E(t?[0,1,2,3,4,5,6,7,8,9]:[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllBc",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{j(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:T.condition1.operator,onChange:e=>le("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:T.condition1.value,onChange:e=>le("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:T.condition2.operator,onChange:e=>le("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:T.condition2.value,onChange:e=>le("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying BC # filter:",T),j(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{N({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),E([])},children:"Clear Filter"})]})]})}),D&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllItem",checked:10===F.length,onChange:e=>{return t=e.target.checked,void L(t?[0,1,2,3,4,5,6,7,8,9]:[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllItem",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{P(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:M.condition1.operator,onChange:e=>ce("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:M.condition1.value,onChange:e=>ce("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:M.condition2.operator,onChange:e=>ce("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:M.condition2.value,onChange:e=>ce("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Item filter:",M),P(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{A({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),L([])},children:"Clear Filter"})]})]})}),I&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllDescription",checked:10===V.length,onChange:e=>{return t=e.target.checked,void W(t?[0,1,2,3,4,5,6,7,8,9]:[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllDescription",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{R(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:z.condition1.operator,onChange:e=>ue("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:z.condition1.value,onChange:e=>ue("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:z.condition2.operator,onChange:e=>ue("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:z.condition2.value,onChange:e=>ue("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Description filter:",z),R(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{B({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),W([])},children:"Clear Filter"})]})]})}),U&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllTemplate",checked:10===G.length,onChange:e=>{return t=e.target.checked,void q(t?[0,1,2,3,4,5,6,7,8,9]:[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllTemplate",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{H(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:X.condition1.operator,onChange:e=>he("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:X.condition1.value,onChange:e=>he("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:X.condition2.operator,onChange:e=>he("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:X.condition2.value,onChange:e=>he("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Template filter:",X),H(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{Y({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),q([])},children:"Clear Filter"})]})]})}),$&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllDateCreated",checked:10===Z.length,onChange:e=>{return t=e.target.checked,void ee(t?[0,1,2,3,4,5,6,7,8,9]:[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllDateCreated",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{K(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:Q.condition1.operator,onChange:e=>de("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:Q.condition1.value,onChange:e=>de("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:Q.condition2.operator,onChange:e=>de("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:Q.condition2.value,onChange:e=>de("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Date Created filter:",Q),K(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{J({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),ee([])},children:"Clear Filter"})]})]})}),te&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded shadow-lg w-96 max-h-[80vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"selectAllCreatedBy",checked:10===ie.length,onChange:e=>{return t=e.target.checked,void oe(t?[0,1,2,3,4,5,6,7,8,9]:[]);var t},className:"mr-2"}),(0,i.jsx)("label",{htmlFor:"selectAllCreatedBy",className:"text-white text-sm cursor-pointer",children:"Select All"})]}),(0,i.jsx)("button",{className:"text-gray-400 hover:text-white text-xl cursor-pointer",onClick:()=>{re(!1)},children:"\xd7"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 border-b border-gray-600",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium mb-3",children:"Show rows with value that"}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsxs)("select",{value:ne.condition1.operator,onChange:e=>fe("condition1","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:ne.condition1.value,onChange:e=>fe("condition1","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]}),(0,i.jsx)("div",{className:"text-center text-gray-400 text-sm mb-3",children:"And"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:ne.condition2.operator,onChange:e=>fe("condition2","operator",e.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded mb-2",children:[(0,i.jsx)("option",{children:"Is equal to"}),(0,i.jsx)("option",{children:"Is not equal to"}),(0,i.jsx)("option",{children:"Contains"}),(0,i.jsx)("option",{children:"Does not contain"}),(0,i.jsx)("option",{children:"Starts with"}),(0,i.jsx)("option",{children:"Ends with"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"text",value:ne.condition2.value,onChange:e=>fe("condition2","value",e.target.value),placeholder:"Enter value",className:"flex-1 bg-gray-700 border border-gray-600 text-white text-sm p-2 rounded"}),(0,i.jsx)("button",{className:"bg-gray-700 border border-gray-600 text-white text-sm px-3 py-2 rounded hover:bg-gray-600",children:"aA"})]})]})]}),(0,i.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,i.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{console.log("Applying Created By filter:",ne),re(!1)},children:"Filter"}),(0,i.jsx)("button",{className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-4 rounded transition-colors",onClick:()=>{se({condition1:{operator:"Is equal to",value:""},condition2:{operator:"Is equal to",value:""}}),oe([])},children:"Clear Filter"})]})]})})]})]})};function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}class f{constructor(){l(this,"browserShadowBlurConstant",1),l(this,"DPI",96),l(this,"devicePixelRatio","undefined"!=typeof window?window.devicePixelRatio:1),l(this,"perfLimitSizeTotal",2097152),l(this,"maxCacheSideLimit",4096),l(this,"minCacheSideLimit",256),l(this,"disableStyleCopyPaste",!1),l(this,"enableGLFiltering",!0),l(this,"textureSize",4096),l(this,"forceGLPutImageData",!1),l(this,"cachesBoundsOfCurve",!1),l(this,"fontPaths",{}),l(this,"NUM_FRACTION_DIGITS",4)}}const g=new class extends f{constructor(e){super(),this.configure(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}addFonts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fontPaths=u(u({},this.fontPaths),e)}removeFonts(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(e=>{delete this.fontPaths[e]})}clearFonts(){this.fontPaths={}}restoreDefaults(e){const t=new f,r=(null==e?void 0:e.reduce((e,r)=>(e[r]=t[r],e),{}))||t;this.configure(r)}},p=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return console[e]("fabric",...r)};class m extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class x extends m{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class y{}class b extends y{testPrecision(e,t){const r="precision ".concat(t," float;\nvoid main(){}"),n=e.createShader(e.FRAGMENT_SHADER);return!!n&&(e.shaderSource(n,r),e.compileShader(n),!!e.getShaderParameter(n,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(e=>this.testPrecision(t,e)),t.getExtension("WEBGL_lose_context").loseContext(),p("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const v={};let w;const S=()=>w||(w={document:document,window:window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new b,dispose(){},copyPasteData:v}),C=()=>S().document,_=()=>S().window,k=()=>{var e;return Math.max(null!==(e=g.devicePixelRatio)&&void 0!==e?e:_().devicePixelRatio,1)},j=new class{constructor(){l(this,"charWidthsCache",{}),l(this,"boundsOfCurveCache",{})}getFontCache(e){let{fontFamily:t,fontStyle:r,fontWeight:n}=e;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const s=this.charWidthsCache[t],i="".concat(r.toLowerCase(),"_").concat((n+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(e){(e=(e||"").toLowerCase())?this.charWidthsCache[e]&&delete this.charWidthsCache[e]:this.charWidthsCache={}}limitDimsByArea(e){const{perfLimitSizeTotal:t}=g,r=Math.sqrt(t*e);return[Math.floor(r),Math.floor(t/r)]}},T="6.7.1";function N(){}const O=Math.PI/2,E=2*Math.PI,D=Math.PI/180,P=Object.freeze([1,0,0,1,0,0]),M=16,A=.4477152502,F="center",L="left",I="top",R="bottom",z="right",B="none",V=/\r?\n/,W="moving",U="scaling",H="rotating",X="rotate",Y="skewing",G="resizing",q="modifyPoly",$="modifyPath",K="changed",Q="scale",J="scaleX",Z="scaleY",ee="skewX",te="skewY",re="fill",ne="stroke",se="modified",ie="json",oe="svg",ae=new class{constructor(){this[ie]=new Map,this[oe]=new Map}has(e){return this[ie].has(e)}getClass(e){const t=this[ie].get(e);if(!t)throw new m("No class registered for ".concat(e));return t}setClass(e,t){t?this[ie].set(t,e):(this[ie].set(e.type,e),this[ie].set(e.type.toLowerCase(),e))}getSVGClass(e){return this[oe].get(e)}setSVGClass(e,t){this[oe].set(null!=t?t:e.type.toLowerCase(),e)}},le=new class extends Array{remove(e){const t=this.indexOf(e);t>-1&&this.splice(t,1)}cancelAll(){const e=this.splice(0);return e.forEach(e=>e.abort()),e}cancelByCanvas(e){if(!e)return[];const t=this.filter(t=>{var r;return t.target===e||"object"==typeof t.target&&(null===(r=t.target)||void 0===r?void 0:r.canvas)===e});return t.forEach(e=>e.abort()),t}cancelByTarget(e){if(!e)return[];const t=this.filter(t=>t.target===e);return t.forEach(e=>e.abort()),t}};class ce{constructor(){l(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),"object"==typeof e)return Object.entries(e).forEach(e=>{let[t,r]=e;this.on(t,r)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if("object"==typeof e){const t=[];return Object.entries(e).forEach(e=>{let[r,n]=e;t.push(this.once(r,n))}),()=>t.forEach(e=>e())}if(t){const r=this.on(e,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.call(this,...n),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],n=r.indexOf(t);n>-1&&r.splice(n,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(void 0===e)for(const r in this.__eventListeners)this._removeEventListener(r);else"object"==typeof e?Object.entries(e).forEach(e=>{let[t,r]=e;this._removeEventListener(t,r)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const n=null===(r=this.__eventListeners[e])||void 0===r?void 0:r.concat();if(n)for(let s=0;s<n.length;s++)n[s].call(this,t||{})}}const ue=(e,t)=>{const r=e.indexOf(t);return-1!==r&&e.splice(r,1),e},he=e=>{if(0===e)return 1;switch(Math.abs(e)/O){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},de=e=>{if(0===e)return 0;const t=e/O,r=Math.sign(e);switch(t){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(e)};class fe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new fe(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new fe(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new fe(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new fe(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new fe(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new fe(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new fe(this.x/e.x,this.y/e.y)}scalarDivide(e){return new fe(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new fe(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new fe(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new fe(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new fe(this.x,this.y)}rotate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge;const r=de(e),n=he(e),s=this.subtract(t);return new fe(s.x*n-s.y*r,s.x*r+s.y*n).add(t)}transform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new fe(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const ge=new fe(0,0),pe=e=>!!e&&Array.isArray(e._objects);function me(e){class t extends e{constructor(){super(...arguments),l(this,"_objects",[])}_onObjectAdded(e){}_onObjectRemoved(e){}_onStackOrderChanged(e){}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=this._objects.push(...t);return t.forEach(e=>this._onObjectAdded(e)),n}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this._objects.splice(e,0,...r),r.forEach(e=>this._onObjectAdded(e)),this._objects.length}remove(){const e=this._objects,t=[];for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return n.forEach(r=>{const n=e.indexOf(r);-1!==n&&(e.splice(n,1),t.push(r),this._onObjectRemoved(r))}),t}forEachObject(e){this.getObjects().forEach((t,r,n)=>e(t,r,n))}getObjects(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?[...this._objects]:this._objects.filter(e=>e.isType(...t))}item(e){return this._objects[e]}isEmpty(){return 0===this._objects.length}size(){return this._objects.length}contains(e,r){return!!this._objects.includes(e)||!!r&&this._objects.some(r=>r instanceof t&&r.contains(e,!0))}complexity(){return this._objects.reduce((e,t)=>e+(t.complexity?t.complexity():0),0)}sendObjectToBack(e){return!(!e||e===this._objects[0])&&(ue(this._objects,e),this._objects.unshift(e),this._onStackOrderChanged(e),!0)}bringObjectToFront(e){return!(!e||e===this._objects[this._objects.length-1])&&(ue(this._objects,e),this._objects.push(e),this._onStackOrderChanged(e),!0)}sendObjectBackwards(e,t){if(!e)return!1;const r=this._objects.indexOf(e);if(0!==r){const n=this.findNewLowerIndex(e,r,t);return ue(this._objects,e),this._objects.splice(n,0,e),this._onStackOrderChanged(e),!0}return!1}bringObjectForward(e,t){if(!e)return!1;const r=this._objects.indexOf(e);if(r!==this._objects.length-1){const n=this.findNewUpperIndex(e,r,t);return ue(this._objects,e),this._objects.splice(n,0,e),this._onStackOrderChanged(e),!0}return!1}moveObjectTo(e,t){return e!==this._objects[t]&&(ue(this._objects,e),this._objects.splice(t,0,e),this._onStackOrderChanged(e),!0)}findNewLowerIndex(e,t,r){let n;if(r){n=t;for(let r=t-1;r>=0;--r)if(e.isOverlapping(this._objects[r])){n=r;break}}else n=t-1;return n}findNewUpperIndex(e,t,r){let n;if(r){n=t;for(let r=t+1;r<this._objects.length;++r)if(e.isOverlapping(this._objects[r])){n=r;break}}else n=t+1;return n}collectObjects(e){let{left:t,top:r,width:n,height:s}=e,{includeIntersecting:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=[],a=new fe(t,r),l=a.add(new fe(n,s));for(let c=this._objects.length-1;c>=0;c--){const e=this._objects[c];e.selectable&&e.visible&&(i&&e.intersectsWithRect(a,l)||e.isContainedWithinRect(a,l)||i&&e.containsPoint(a)||i&&e.containsPoint(l))&&o.push(e)}return o}}return t}class xe extends ce{_setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this}get(e){return this[e]}}function ye(e){return _().requestAnimationFrame(e)}function be(e){return _().cancelAnimationFrame(e)}let ve=0;const we=()=>ve++,Se=()=>{const e=C().createElement("canvas");if(!e||void 0===e.getContext)throw new m("Failed to create `canvas` element");return e},Ce=()=>C().createElement("img"),_e=e=>{const t=Se();return t.width=e.width,t.height=e.height,t},ke=(e,t,r)=>e.toDataURL("image/".concat(t),r),je=(e,t,r)=>new Promise((n,s)=>{e.toBlob(n,"image/".concat(t),r)}),Te=e=>e*D,Ne=e=>e/D,Oe=e=>e.every((e,t)=>e===P[t]),Ee=(e,t,r)=>new fe(e).transform(t,r),De=e=>{const t=1/(e[0]*e[3]-e[1]*e[2]),r=[t*e[3],-t*e[1],-t*e[2],t*e[0],0,0],{x:n,y:s}=new fe(e[4],e[5]).transform(r,!0);return r[4]=-n,r[5]=-s,r},Pe=(e,t,r)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],r?0:e[0]*t[4]+e[2]*t[5]+e[4],r?0:e[1]*t[4]+e[3]*t[5]+e[5]],Me=(e,t)=>e.reduceRight((e,r)=>r&&e?Pe(r,e,t):r||e,void 0)||P.concat(),Ae=e=>{let[t,r]=e;return Math.atan2(r,t)},Fe=e=>{const t=Ae(e),r=Math.pow(e[0],2)+Math.pow(e[1],2),n=Math.sqrt(r),s=(e[0]*e[3]-e[2]*e[1])/n,i=Math.atan2(e[0]*e[2]+e[1]*e[3],r);return{angle:Ne(t),scaleX:n,scaleY:s,skewX:Ne(i),skewY:0,translateX:e[4]||0,translateY:e[5]||0}},Le=function(e){return[1,0,0,1,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]};function Ie(){let{angle:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:t=0,y:r=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Te(e),s=he(n),i=de(n);return[s,i,-i,s,t?t-(s*t-i*r):0,r?r-(i*t+s*r):0]}const Re=function(e){return[e,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,0,0]},ze=e=>Math.tan(Te(e)),Be=e=>[1,0,ze(e),1,0,0],Ve=e=>[1,ze(e),0,1,0,0],We=e=>{let{scaleX:t=1,scaleY:r=1,flipX:n=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=e,a=Re(n?-t:t,s?-r:r);return i&&(a=Pe(a,Be(i),!0)),o&&(a=Pe(a,Ve(o),!0)),a},Ue=e=>{const{translateX:t=0,translateY:r=0,angle:n=0}=e;let s=Le(t,r);n&&(s=Pe(s,Ie({angle:n})));const i=We(e);return Oe(i)||(s=Pe(s,i)),s},He=function(e){let{signal:t,crossOrigin:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,s){if(t&&t.aborted)return s(new x("loadImage"));const i=Ce();let o;t&&(o=function(e){i.src="",s(e)},t.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(null==t||t.removeEventListener("abort",o)),n(i)};e?(i.onload=a,i.onerror=function(){o&&(null==t||t.removeEventListener("abort",o)),s(new m("Error loading ".concat(i.src)))},r&&(i.crossOrigin=r),i.src=e):a()})},Xe=function(e){let{signal:t,reviver:r=N}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,s)=>{const i=[];t&&t.addEventListener("abort",s,{once:!0}),Promise.all(e.map(e=>ae.getClass(e.type).fromObject(e,{signal:t}).then(t=>(r(e,t),i.push(t),t)))).then(n).catch(e=>{i.forEach(e=>{e.dispose&&e.dispose()}),s(e)}).finally(()=>{t&&t.removeEventListener("abort",s)})})},Ye=function(e){let{signal:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,n)=>{const s=[];t&&t.addEventListener("abort",n,{once:!0});const i=Object.values(e).map(e=>e&&e.type&&ae.has(e.type)?Xe([e],{signal:t}).then(e=>{let[t]=e;return s.push(t),t}):e),o=Object.keys(e);Promise.all(i).then(e=>e.reduce((e,t,r)=>(e[o[r]]=t,e),{})).then(r).catch(e=>{s.forEach(e=>{e.dispose&&e.dispose()}),n(e)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},Ge=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{})},qe=(e,t)=>Object.keys(e).reduce((r,n)=>(t(e[n],n,e)&&(r[n]=e[n]),r),{}),$e=(e,t)=>parseFloat(Number(e).toFixed(t)),Ke=e=>"matrix("+e.map(e=>$e(e,g.NUM_FRACTION_DIGITS)).join(" ")+")",Qe=e=>!!e&&void 0!==e.toLive,Je=e=>!!e&&"function"==typeof e.toObject,Ze=e=>!!e&&void 0!==e.offsetX&&"source"in e,et=e=>!!e&&"multiSelectionStacking"in e;function tt(e){const t=e&&rt(e);let r=0,n=0;if(!e||!t)return{left:r,top:n};let s=e;const i=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===t?(r=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(r+=s.scrollLeft||0,n+=s.scrollTop||0),1!==s.nodeType||"fixed"!==s.style.position););return{left:r,top:n}}const rt=e=>e.ownerDocument||null,nt=e=>{var t;return(null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)||null},st=function(e,t,r){let{width:n,height:s}=r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.width=n,e.height=s,i>1&&(e.setAttribute("width",(n*i).toString()),e.setAttribute("height",(s*i).toString()),t.scale(i,i))},it=(e,t)=>{let{width:r,height:n}=t;r&&(e.style.width="number"==typeof r?"".concat(r,"px"):r),n&&(e.style.height="number"==typeof n?"".concat(n,"px"):n)};function ot(e){return void 0!==e.onselectstart&&(e.onselectstart=()=>!1),e.style.userSelect=B,e}class at{constructor(e){l(this,"_originalCanvasStyle",void 0),l(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&void 0!==r.getContext?e:e&&C().getElementById(e)||Se();var r;if(t.hasAttribute("data-fabric"))throw new m("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(t)),n.setAttribute("height","".concat(r)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:n}=this.lower;st(r,n,e,t)}setCSSDimensions(e){it(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&rt(e),n={left:0,top:0};if(!r)return n;const s=(null===(t=nt(e))||void 0===t?void 0:t.getComputedStyle(e,null))||{};n.left+=parseInt(s.borderLeftWidth,10)||0,n.top+=parseInt(s.borderTopWidth,10)||0,n.left+=parseInt(s.paddingLeft,10)||0,n.top+=parseInt(s.paddingTop,10)||0;let i={left:0,top:0};const o=r.documentElement;void 0!==e.getBoundingClientRect&&(i=e.getBoundingClientRect());const a=tt(e);return{left:i.left+a.left-(o.clientLeft||0)+n.left,top:i.top+a.top-(o.clientTop||0)+n.top}}(this.lower.el)}dispose(){S().dispose(this.lower.el),delete this.lower}}const lt={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...P]};class ct extends(me(xe)){get lowerCanvasEl(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.el}get contextContainer(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.ctx}static getDefaults(){return ct.ownDefaults}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new at(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(p("warn","Canvas is trying to add an object that belongs to a different canvas.\nResulting to default behavior: removing object from previous canvas and adding to new canvas"),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?k():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t){const t=u({width:this.width,height:this.height},e);this.elements.setDimensions(t,this.getRetinaScaling()),this.hasLostContext=!0,this.width=t.width,this.height=t.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,n=[...this.viewportTransform],s=Ee(e,De(n));n[0]=t,n[3]=t;const i=Ee(s,n);n[4]+=r.x-i.x,n[5]+=r.y-i.y,this.setViewportTransform(n)}setZoom(e){this.zoomToPoint(new fe(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new fe(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ye(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=De(this.viewportTransform),n=Ee({x:0,y:0},r),s=Ee({x:e,y:t},r),i=n.min(s),o=n.max(s);return this.vptCoords={tl:i,tr:new fe(o.x,i.y),bl:new fe(i.x,o.y),br:o}}cancelRequestedRender(){this.nextRenderHandle&&(be(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,n)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,n=t.length;r<n;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],n=this["".concat(t,"Image")],s=this.viewportTransform,i=this["".concat(t,"Vpt")];if(!r&&!n)return;const o=Qe(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=o?r.toLive(e):r,i&&e.transform(...s),o){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const t=r.gradientTransform||r.patternTransform;t&&e.transform(...t)}e.fill(),e.restore()}if(n){e.save();const{skipOffscreen:t}=this;this.skipOffscreen=i,i&&e.transform(...s),n.render(e),this.skipOffscreen=t,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new fe(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new fe(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new fe(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new fe(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new fe(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Ee(this.getCenterPoint(),De(this.viewportTransform))}_centerObject(e,t){e.setXY(t,F,F),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,n=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return u(u(u({version:T},Ge(this,t)),{},{objects:this._objects.filter(e=>!e.excludeFromExport).map(r=>this._toObject(r,e,t))},this.__serializeBgOverlay(e,t)),n?{clipPath:n}:null)}_toObject(e,t,r){let n;this.includeDefaultValues||(n=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!n),s}__serializeBgOverlay(e,t){const r={},n=this.backgroundImage,s=this.overlayImage,i=this.backgroundColor,o=this.overlayColor;return Qe(i)?i.excludeFromExport||(r.background=i.toObject(t)):i&&(r.background=i),Qe(o)?o.excludeFromExport||(r.overlay=o.toObject(t)):o&&(r.overlay=o),n&&!n.excludeFromExport&&(r.backgroundImage=this._toObject(n,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,')" >\n')),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push("</g>\n"),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),n=t.height||"".concat(this.height),s=g.NUM_FRACTION_DIGITS,i=t.viewBox;let o;if(i)o='viewBox="'.concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height,'" ');else if(this.svgViewportTransformation){const e=this.viewportTransform;o='viewBox="'.concat($e(-e[4]/e[0],s)," ").concat($e(-e[5]/e[3],s)," ").concat($e(this.width/e[0],s)," ").concat($e(this.height/e[3],s),'" ')}else o='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',o,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",T,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(we()),'<clipPath id="'.concat(t.clipPathId,'" >\n').concat(t.toClipPathSVG(e.reviver),"</clipPath>\n")):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Qe(t)){const r=this["".concat(e,"Vpt")],n=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?n[0]:1),height:this.height/(r?n[3]:1)};return t.toSVG(s,{additionalTransform:r?Ke(n):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=g.fontPaths;this._objects.forEach(function t(r){e.push(r),pe(r)&&r._objects.forEach(t)}),e.forEach(e=>{if(!(n=e)||"function"!=typeof n._renderText)return;var n;const{styles:s,fontFamily:i}=e;!t[i]&&r[i]&&(t[i]=!0,s&&Object.values(s).forEach(e=>{Object.values(e).forEach(e=>{let{fontFamily:n=""}=e;!t[n]&&r[n]&&(t[n]=!0)})}))});const n=Object.keys(t).map(e=>"\t\t@font-face {\n\t\t\tfont-family: '".concat(e,"';\n\t\t\tsrc: url('").concat(r[e],"');\n\t\t}\n")).join("");return n?'\t<style type="text/css"><![CDATA[\n'.concat(n,"]]></style>\n"):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const n=this[t];n&&!n.excludeFromExport&&n.toSVG&&e.push(n.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Qe(r)){const n=r.repeat||"",s=this.width,i=this.height,o=this["".concat(t,"Vpt")]?Ke(De(this.viewportTransform)):"";e.push('<rect transform="'.concat(o," translate(").concat(s/2,",").concat(i/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-i/2,'" width="').concat("repeat-y"!==n&&"no-repeat"!==n||!Ze(r)?s:r.source.width,'" height="').concat("repeat-x"!==n&&"no-repeat"!==n||!Ze(r)?i:r.source.height,'" fill="url(#SVGID_').concat(r.id,')"></rect>\n'))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',"></rect>\n")}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return Promise.reject(new m("`json` is undefined"));const n="string"==typeof e?JSON.parse(e):e,{objects:s=[],backgroundImage:i,background:o,overlayImage:a,overlay:l,clipPath:c}=n,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Xe(s,{reviver:t,signal:r}),Ye({backgroundImage:i,backgroundColor:o,overlayImage:a,overlayColor:l,clipPath:c},{signal:r})]).then(e=>{let[t,r]=e;return this.clear(),this.add(...t),this.set(n),this.set(r),this.renderOnAddRemove=u,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=_e(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:n=1,enableRetinaScaling:s=!1}=e,i=n*(s?this.getRetinaScaling():1);return ke(this.toCanvasElement(i,e),t,r)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:n=1,enableRetinaScaling:s=!1}=e,i=n*(s?this.getRetinaScaling():1);return je(this.toCanvasElement(i,e),t,r)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{width:t,height:r,left:n,top:s,filter:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=(t||this.width)*e,a=(r||this.height)*e,l=this.getZoom(),c=this.width,u=this.height,h=this.skipControlsDrawing,d=l*e,f=this.viewportTransform,g=[d,0,0,d,(f[4]-(n||0))*e,(f[5]-(s||0))*e],p=this.enableRetinaScaling,m=_e({width:o,height:a}),x=i?this._objects.filter(e=>i(e)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=g,this.width=o,this.height=a,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(m.getContext("2d"),x),this.viewportTransform=f,this.width=c,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=p,this.skipControlsDrawing=h,m}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),le.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}l(ct,"ownDefaults",lt);const ut=["touchstart","touchmove","touchend"],ht=e=>{const t=tt(e.target),r=function(e){const t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return new fe(r.clientX+t.left,r.clientY+t.top)},dt=e=>ut.includes(e.type)||"touch"===e.pointerType,ft=e=>{e.preventDefault(),e.stopPropagation()},gt=e=>{let t=0,r=0,n=0,s=0;for(let i=0,o=e.length;i<o;i++){const{x:o,y:a}=e[i];(o>n||!i)&&(n=o),(o<t||!i)&&(t=o),(a>s||!i)&&(s=a),(a<r||!i)&&(r=a)}return{left:t,top:r,width:n-t,height:s-r}},pt=["translateX","translateY","scaleX","scaleY"],mt=(e,t)=>xt(e,Pe(t,e.calcOwnMatrix())),xt=(e,t)=>{const r=Fe(t),{translateX:n,translateY:s,scaleX:i,scaleY:o}=r,a=h(r,pt),l=new fe(n,s);e.flipX=!1,e.flipY=!1,Object.assign(e,a),e.set({scaleX:i,scaleY:o}),e.setPositionByOrigin(l,F,F)},yt=e=>{e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},bt=e=>({scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}),vt=(e,t,r)=>{const n=e/2,s=t/2,i=[new fe(-n,-s),new fe(n,-s),new fe(-n,s),new fe(n,s)].map(e=>e.transform(r)),o=gt(i);return new fe(o.width,o.height)},wt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return Pe(De(arguments.length>1&&void 0!==arguments[1]?arguments[1]:P),e)},St=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P;return e.transform(wt(t,r))},Ct=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P;return e.transform(wt(t,r),!0)},_t=(e,t,r)=>{const n=wt(t,r);return xt(e,Pe(n,e.calcOwnMatrix())),n},kt=(e,t)=>{var r;const{transform:{target:n}}=t;null===(r=n.canvas)||void 0===r||r.fire("object:".concat(e),u(u({},t),{},{target:n})),n.fire(e,t)},jt={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Tt=e=>"string"==typeof e?jt[e]:e-.5,Nt="not-allowed";function Ot(e){return Tt(e.originX)===Tt(F)&&Tt(e.originY)===Tt(F)}function Et(e){return.5-Tt(e)}const Dt=(e,t)=>e[t],Pt=(e,t,r,n)=>({e:e,transform:t,pointer:new fe(r,n)});function Mt(e,t){const r=e.getTotalAngle()+Ne(Math.atan2(t.y,t.x))+360;return Math.round(r%360/45)}function At(e,t,r,n,s){var i;let{target:o,corner:a}=e;const l=o.controls[a],c=(null===(i=o.canvas)||void 0===i?void 0:i.getZoom())||1,u=o.padding/c,h=function(e,t,r,n){const s=e.getRelativeCenterPoint(),i=void 0!==r&&void 0!==n?e.translateToGivenOrigin(s,F,F,r,n):new fe(e.left,e.top);return(e.angle?t.rotate(-Te(e.angle),s):t).subtract(i)}(o,new fe(n,s),t,r);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const Ft=(e,t,r,n)=>{const{target:s,offsetX:i,offsetY:o}=t,a=r-i,l=n-o,c=!Dt(s,"lockMovementX")&&s.left!==a,u=!Dt(s,"lockMovementY")&&s.top!==l;return c&&s.set(L,a),u&&s.set(I,l),(c||u)&&kt(W,Pt(e,t,r,n)),c||u},Lt={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},It=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),Rt=(e,t,r,n)=>{e/=255,t/=255,r/=255;const s=Math.max(e,t,r),i=Math.min(e,t,r);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const n=s-i;switch(a=l>.5?n/(2-s-i):n/(s+i),s){case e:o=(t-r)/n+(t<r?6:0);break;case t:o=(r-e)/n+2;break;case r:o=(e-t)/n+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),n]},zt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";return parseFloat(e)/(e.endsWith("%")?100:1)},Bt=e=>Math.min(Math.round(e),255).toString(16).toUpperCase().padStart(2,"0"),Vt=e=>{let[t,r,n,s=1]=e;const i=Math.round(.3*t+.59*r+.11*n);return[i,i,i,s]};class Wt{constructor(e){if(l(this,"isUnrecognised",!1),e)if(e instanceof Wt)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,n,s=1]=e;this.setSource([t,r,n,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Lt&&(e=Lt[e]),"transparent"===e?[255,255,255,0]:Wt.sourceFromHex(e)||Wt.sourceFromRgb(e)||Wt.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Rt(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,n]=Rt(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,n]=this.getSource();return"".concat(Bt(e)).concat(Bt(t)).concat(Bt(r)).concat(Bt(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Vt(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Vt(this.getSource()),n=t<(e||127)?0:255;return this.setSource([n,n,n,r]),this}overlayWith(e){e instanceof Wt||(e=new Wt(e));const t=this.getSource(),r=e.getSource(),[n,s,i]=t.map((e,t)=>Math.round(.5*e+.5*r[t]));return this.setSource([n,s,i,t[3]]),this}static fromRgb(e){return Wt.fromRgba(e)}static fromRgba(e){return new Wt(Wt.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[e,r,n]=t.slice(1,4).map(e=>{const t=parseFloat(e);return e.endsWith("%")?Math.round(2.55*t):t});return[e,r,n,zt(t[4])]}}static fromHsl(e){return Wt.fromHsla(e)}static fromHsla(e){return new Wt(Wt.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(Wt.parseAngletoDegrees(t[1])%360+360)%360/360,n=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let i,o,a;if(0===n)i=o=a=s;else{const e=s<=.5?s*(n+1):s+n-s*n,t=2*s-e;i=It(t,e,r+1/3),o=It(t,e,r),a=It(t,e,r-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*a),zt(t[4])]}static fromHex(e){return new Wt(Wt.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(e=>e+e):t.match(/.{2}/g);const[n,s,i,o=255]=r.map(e=>parseInt(e,16));return[n,s,i,o/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Ne(r):t.includes("turn")?360*r:r}}const Ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;const r=/\D{0,2}$/.exec(e),n=parseFloat(e),s=g.DPI;switch(null==r?void 0:r[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*t;default:return n}},Ht=e=>{const[t,r]=e.trim().split(" "),[n,s]=(i=t)&&i!==B?[i.slice(1,4),i.slice(5,8)]:i===B?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:r||"meet",alignX:n,alignY:s}},Xt=function(e,t){let r,n,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(t.toLive)r="url(#SVGID_".concat(t.id,")");else{const e=new Wt(t),s=e.getAlpha();r=e.toRgb(),1!==s&&(n=s.toString())}else r="none";return s?"".concat(e,": ").concat(r,"; ").concat(n?"".concat(e,"-opacity: ").concat(n,"; "):""):"".concat(e,'="').concat(r,'" ').concat(n?"".concat(e,'-opacity="').concat(n,'" '):"")};class Yt{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):B,s=this.strokeDashOffset?this.strokeDashOffset:"0",i=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),h=Xt(re,this.fill);return[Xt(ne,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",i,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",a,"; ",h,"fill-rule: ",t,"; ","opacity: ",l,";",u,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(Ke(r));return"".concat(n).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=n,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:n,additionalTransform:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?"":'style="'.concat(this.getSvgStyles(),'" '),o=n?'style="'.concat(this.getSvgFilter(),'" '):"",a=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=a&&a.absolutePositioned,u=this.stroke,h=this.fill,d=this.shadow,f=[],g=e.indexOf("COMMON_PARTS");let p;a&&(a.clipPathId="CLIPPATH_".concat(we()),p='<clipPath id="'.concat(a.clipPathId,'" >\n').concat(a.toClipPathSVG(r),"</clipPath>\n")),c&&f.push("<g ",o,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),c?"":o+this.getSvgCommons()," >\n");const m=[i,l,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[g]=m,Qe(h)&&f.push(h.toSVG(this)),Qe(u)&&f.push(u.toSVG(this)),d&&f.push(d.toSVG(this)),a&&f.push(p),f.push(e.join("")),f.push("</g>\n"),c&&f.push("</g>\n"),r?r(f.join("")):f.join("")}addPaintOrder(){return this.paintFirst!==re?' paint-order="'.concat(this.paintFirst,'" '):""}}function Gt(e){return new RegExp("^("+e.join("|")+")\\b","i")}const qt="textDecorationThickness",$t=["fontSize","fontWeight","fontFamily","fontStyle"],Kt=["underline","overline","linethrough"],Qt=[...$t,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Jt=[...Qt,...Kt,"textBackgroundColor","direction",qt],Zt=[...$t,...Kt,ne,"strokeWidth",re,"deltaY","textBackgroundColor",qt],er={_reNewline:V,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:L,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:L,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[qt]:66.667},tr="justify",rr="justify-left",nr="justify-right",sr="justify-center";var ir,or,ar;const lr=String.raw(ir||(ir=d(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),cr=String.raw(or||(or=d(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),ur=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+lr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+lr+"))?\\s+(.*)"),hr={cx:L,x:L,r:"radius",cy:I,y:I,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":qt},dr="font-size",fr="clip-path",gr=(Gt(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),Gt(["symbol","image","marker","pattern","view","svg"]),Gt(["symbol","g","a","svg","clipPath","defs"])),pr=(new RegExp(String.raw(ar||(ar=d(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),lr,cr,lr,cr,lr,cr,lr)),new fe(1,0)),mr=new fe,xr=(e,t)=>e.rotate(t),yr=(e,t)=>new fe(t).subtract(e),br=e=>e.distanceFrom(mr),vr=(e,t)=>Math.atan2(_r(e,t),kr(e,t)),wr=e=>vr(pr,e),Sr=e=>e.eq(mr)?e:e.scalarDivide(br(e)),Cr=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Sr(new fe(-e.y,e.x).scalarMultiply(t?1:-1))},_r=(e,t)=>e.x*t.y-e.y*t.x,kr=(e,t)=>e.x*t.x+e.y*t.y,jr=(e,t,r)=>{if(e.eq(t)||e.eq(r))return!0;const n=_r(t,r),s=_r(t,e),i=_r(r,e);return n>=0?s>=0&&i<=0:!(s<=0&&i>=0)},Tr="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Nr=new RegExp("(?:\\s|^)"+Tr+Tr+"("+lr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Or{constructor(e){const t="string"==typeof e?Or.parseShadow(e):e;Object.assign(this,Or.ownDefaults,t),this.id=we()}static parseShadow(e){const t=e.trim(),[,r=0,n=0,s=0]=(Nr.exec(t)||[]).map(e=>parseFloat(e)||0);return{color:(t.replace(Nr,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:n,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=xr(new fe(this.offsetX,this.offsetY),Te(-e.angle)),r=new Wt(this.color);let n=40,s=40;return e.width&&e.height&&(n=100*$e((Math.abs(t.x)+this.blur)/e.width,g.NUM_FRACTION_DIGITS)+20,s=100*$e((Math.abs(t.y)+this.blur)/e.height,g.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(n,'%" width="').concat(100+2*n,'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="').concat($e(this.blur?this.blur/2:0,g.NUM_FRACTION_DIGITS),'"></feGaussianBlur>\n\t<feOffset dx="').concat($e(t.x,g.NUM_FRACTION_DIGITS),'" dy="').concat($e(t.y,g.NUM_FRACTION_DIGITS),'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="').concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n')}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Or.ownDefaults;return this.includeDefaultValues?e:qe(e,(e,r)=>e!==t[r])}static async fromObject(e){return new this(e)}}l(Or,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),l(Or,"type","shadow"),ae.setClass(Or,"shadow");const Er=(e,t,r)=>Math.max(e,Math.min(t,r)),Dr=[I,L,J,Z,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",ee,te],Pr=[re,ne,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Mr={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:L,originY:I,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:re,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Ar=(e,t,r,n)=>(e<Math.abs(t)?(e=t,n=r/4):n=0===t&&0===e?r/E*Math.asin(1):r/E*Math.asin(t/e),{a:e,c:t,p:r,s:n}),Fr=(e,t,r,n,s)=>e*Math.pow(2,10*(n-=1))*Math.sin((n*s-t)*E/r),Lr=(e,t,r,n)=>-r*Math.cos(e/n*O)+r+t,Ir=(e,t,r,n)=>(e/=n)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t,Rr=(e,t,r,n)=>r-Ir(n-e,0,r,n)+t;var zr=Object.freeze({__proto__:null,defaultEasing:Lr,easeInBack:function(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return r*(e/=n)*e*((s+1)*e-s)+t},easeInBounce:Rr,easeInCirc:(e,t,r,n)=>-r*(Math.sqrt(1-(e/=n)*e)-1)+t,easeInCubic:(e,t,r,n)=>r*(e/n)**3+t,easeInElastic:(e,t,r,n)=>{const s=r;let i=0;if(0===e)return t;if(1===(e/=n))return t+r;i||(i=.3*n);const{a:o,s:a,p:l}=Ar(s,r,i,1.70158);return-Fr(o,a,l,e,n)+t},easeInExpo:(e,t,r,n)=>0===e?t:r*2**(10*(e/n-1))+t,easeInOutBack:function(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return(e/=n/2)<1?r/2*(e*e*((1+(s*=1.525))*e-s))+t:r/2*((e-=2)*e*((1+(s*=1.525))*e+s)+2)+t},easeInOutBounce:(e,t,r,n)=>e<n/2?.5*Rr(2*e,0,r,n)+t:.5*Ir(2*e-n,0,r,n)+.5*r+t,easeInOutCirc:(e,t,r,n)=>(e/=n/2)<1?-r/2*(Math.sqrt(1-e**2)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t,easeInOutCubic:(e,t,r,n)=>(e/=n/2)<1?r/2*e**3+t:r/2*((e-2)**3+2)+t,easeInOutElastic:(e,t,r,n)=>{const s=r;let i=0;if(0===e)return t;if(2===(e/=n/2))return t+r;i||(i=n*(.3*1.5));const{a:o,s:a,p:l,c:c}=Ar(s,r,i,1.70158);return e<1?-.5*Fr(o,a,l,e,n)+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*n-a)*E/l)*.5+c+t},easeInOutExpo:(e,t,r,n)=>0===e?t:e===n?t+r:(e/=n/2)<1?r/2*2**(10*(e-1))+t:r/2*-(2**(-10*--e)+2)+t,easeInOutQuad:(e,t,r,n)=>(e/=n/2)<1?r/2*e**2+t:-r/2*(--e*(e-2)-1)+t,easeInOutQuart:(e,t,r,n)=>(e/=n/2)<1?r/2*e**4+t:-r/2*((e-=2)*e**3-2)+t,easeInOutQuint:(e,t,r,n)=>(e/=n/2)<1?r/2*e**5+t:r/2*((e-2)**5+2)+t,easeInOutSine:(e,t,r,n)=>-r/2*(Math.cos(Math.PI*e/n)-1)+t,easeInQuad:(e,t,r,n)=>r*(e/=n)*e+t,easeInQuart:(e,t,r,n)=>r*(e/=n)*e**3+t,easeInQuint:(e,t,r,n)=>r*(e/n)**5+t,easeInSine:(e,t,r,n)=>-r*Math.cos(e/n*O)+r+t,easeOutBack:function(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return r*((e=e/n-1)*e*((s+1)*e+s)+1)+t},easeOutBounce:Ir,easeOutCirc:(e,t,r,n)=>r*Math.sqrt(1-(e=e/n-1)*e)+t,easeOutCubic:(e,t,r,n)=>r*((e/n-1)**3+1)+t,easeOutElastic:(e,t,r,n)=>{const s=r;let i=0;if(0===e)return t;if(1===(e/=n))return t+r;i||(i=.3*n);const{a:o,s:a,p:l,c:c}=Ar(s,r,i,1.70158);return o*2**(-10*e)*Math.sin((e*n-a)*E/l)+c+t},easeOutExpo:(e,t,r,n)=>e===n?t+r:r*-(2**(-10*e/n)+1)+t,easeOutQuad:(e,t,r,n)=>-r*(e/=n)*(e-2)+t,easeOutQuart:(e,t,r,n)=>-r*((e=e/n-1)*e**3-1)+t,easeOutQuint:(e,t,r,n)=>r*((e/n-1)**5+1)+t,easeOutSine:(e,t,r,n)=>r*Math.sin(e/n*O)+t});const Br=()=>!1;class Vr{constructor(e){let{startValue:t,byValue:r,duration:n=500,delay:s=0,easing:i=Lr,onStart:o=N,onChange:a=N,onComplete:c=N,abort:u=Br,target:h}=e;l(this,"_state","pending"),l(this,"durationProgress",0),l(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n,this.delay=s,this.easing=i,this._onStart=o,this._onChange=a,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return"aborted"===this._state||"completed"===this._state}start(){const e=e=>{"pending"===this._state&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ye(e),this.delay):ye(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:n,valueProgress:s}=this.calculate(r);this.value=Object.freeze(n),this.valueProgress=s,"aborted"!==this._state&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ye(this.tick)))}register(){le.push(this)}unregister(){le.remove(this)}abort(){this._state="aborted",this.unregister()}}const Wr=["startValue","endValue"];class Ur extends Vr{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(u(u({},h(e,Wr)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const Hr=["startValue","endValue"];class Xr extends Vr{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(u(u({},h(e,Hr)),{},{startValue:t,byValue:r.map((e,r)=>e-t[r])}))}calculate(e){const t=this.startValue.map((t,r)=>this.easing(e,t,this.byValue[r],this.duration,r));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const Yr=["startValue","endValue","easing","onChange","onComplete","abort"],Gr=(e,t,r,n)=>t+r*(1-Math.cos(e/n*O)),qr=e=>e&&((t,r,n)=>e(new Wt(t).toRgba(),r,n));class $r extends Vr{constructor(e){let{startValue:t,endValue:r,easing:n=Gr,onChange:s,onComplete:i,abort:o}=e,a=h(e,Yr);const l=new Wt(t).getSource(),c=new Wt(r).getSource();super(u(u({},a),{},{startValue:l,byValue:c.map((e,t)=>e-l[t]),easing:n,onChange:qr(s),onComplete:qr(i),abort:qr(o)}))}calculate(e){const[t,r,n,s]=this.startValue.map((t,r)=>this.easing(e,t,this.byValue[r],this.duration,r)),i=[...[t,r,n].map(Math.round),Er(0,s,1)];return{value:i,valueProgress:i.map((e,t)=>0!==this.byValue[t]?Math.abs((e-this.startValue[t])/this.byValue[t]):0).find(e=>0!==e)||0}}}function Kr(e){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(e)?new Xr(e):new Ur(e);return t.start(),t}function Qr(e){const t=new $r(e);return t.start(),t}class Jr{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(e=>!this.includes(e))),this}static isPointContained(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(n||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(n||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=yr(t,r),i=yr(t,e).divide(s);return n?Math.abs(i.x)===Math.abs(i.y):i.x===i.y&&i.x>=0&&i.x<=1}}static isPointInPolygon(e,t){const r=new fe(e).setX(Math.min(e.x-1,...t.map(e=>e.x)));let n=0;for(let s=0;s<t.length;s++){const i=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(i.includes(e))return!0;n+=Number("Intersection"===i.status)}return n%2==1}static intersectLineLine(e,t,r,n){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const o=t.x-e.x,a=t.y-e.y,l=n.x-r.x,c=n.y-r.y,u=e.x-r.x,h=e.y-r.y,d=l*h-c*u,f=o*h-a*u,g=c*o-l*a;if(0!==g){const t=d/g,r=f/g;return(s||0<=t&&t<=1)&&(i||0<=r&&r<=1)?new Jr("Intersection").append(new fe(e.x+t*o,e.y+t*a)):new Jr}if(0===d||0===f){const o=s||i||Jr.isPointContained(e,r,n)||Jr.isPointContained(t,r,n)||Jr.isPointContained(r,e,t)||Jr.isPointContained(n,e,t);return new Jr(o?"Coincident":void 0)}return new Jr("Parallel")}static intersectSegmentLine(e,t,r,n){return Jr.intersectLineLine(e,t,r,n,!1,!0)}static intersectSegmentSegment(e,t,r,n){return Jr.intersectLineLine(e,t,r,n,!1,!1)}static intersectLinePolygon(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=new Jr,i=r.length;for(let o,a,l,c=0;c<i;c++){if(o=r[c],a=r[(c+1)%i],l=Jr.intersectLineLine(e,t,o,a,n,!1),"Coincident"===l.status)return l;s.append(...l.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return Jr.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Jr,n=e.length,s=[];for(let i=0;i<n;i++){const o=e[i],a=e[(i+1)%n],l=Jr.intersectSegmentPolygon(o,a,t);"Coincident"===l.status?(s.push(l),r.append(o,a)):r.append(...l.points)}return s.length>0&&s.length===e.length?new Jr("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const n=t.min(r),s=t.max(r),i=new fe(s.x,n.y),o=new fe(n.x,s.y);return Jr.intersectPolygonPolygon(e,[n,i,s,o])}}class Zr extends xe{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Ee(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=Ee(e,De(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new fe(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.originX,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:n}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,n];if(this.group){const e=this.group.calcTransformMatrix();return s.map(t=>Ee(t,e))}return s}intersectsWithRect(e,t){return"Intersection"===Jr.intersectPolygonRectangle(this.getCoords(),e,t).status}intersectsWithObject(e){const t=Jr.intersectPolygonPolygon(this.getCoords(),e.getCoords());return"Intersection"===t.status||"Coincident"===t.status||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:n,width:s,height:i}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&n>=e.y&&n+i<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Jr.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.intersectsWithRect(e,t)||this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return gt(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(J,e),this._set(Z,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Ne(Ae(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.viewportTransform)||P.concat()}calcACoords(){const e=Ie({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),n=Le(t,r),s=Pe(n,e),i=this._getTransformedDimensions(),o=i.x/2,a=i.y/2;return{tl:Ee({x:-o,y:-a},s),tr:Ee({x:o,y:-a},s),bl:Ee({x:-o,y:a},s),br:Ee({x:o,y:a},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Tt(this.originX),Tt(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),n=this.matrixCache;return n&&n.key.every((e,t)=>e===r[t])?n.value:(this.group&&(t=Pe(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),n={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=Ue(n);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new fe(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=u({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let n=r,s=0;this.strokeUniform&&(n=0,s=r);const i=t.width+n,o=t.height+n;let a;return a=0===t.skewX&&0===t.skewY?new fe(i*t.scaleX,o*t.scaleY):vt(i,o,We(t)),a.scalarAdd(s)}translateToGivenOrigin(e,t,r,n,s){let i=e.x,o=e.y;const a=Tt(n)-Tt(t),l=Tt(s)-Tt(r);if(a||l){const e=this._getTransformedDimensions();i+=a*e.x,o+=l*e.y}return new fe(i,o)}translateToCenterPoint(e,t,r){if(t===F&&r===F)return e;const n=this.translateToGivenOrigin(e,t,r,F,F);return this.angle?n.rotate(Te(this.angle),e):n}translateToOriginPoint(e,t,r){const n=this.translateToGivenOrigin(e,F,F,t,r);return this.angle?n.rotate(Te(this.angle),e):n}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Ee(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new fe(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const n=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),L,I)}}const en=["type"],tn=["extraParam"];let rn=class e extends Zr{static getDefaults(){return e.ownDefaults}get type(){const e=this.constructor.type;return"FabricObject"===e?"object":e.toLowerCase()}set type(e){p("warn","Setting type has no effect",e)}constructor(t){super(),l(this,"_cacheContext",null),Object.assign(this,e.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Se(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,n=g.maxCacheSideLimit,s=g.minCacheSideLimit;if(t<=n&&r<=n&&t*r<=g.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const i=t/r,[o,a]=j.limitDimsByArea(i),l=Er(s,o,n),c=Er(s,a,n);return t>l&&(e.zoomX/=t/l,e.width=l,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,n=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(n+2),zoomX:e.x,zoomY:e.y,x:r,y:n}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:n,zoomX:s,zoomY:i,x:o,y:a}=this._limitCacheSize(this._getCacheCanvasDimensions()),l=r!==e.width||n!==e.height,c=this.zoomX!==s||this.zoomY!==i;if(!e||!t)return!1;if(l||c){r!==e.width||n!==e.height?(e.width=r,e.height=n):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const l=o/2,c=a/2;return this.cacheTranslationX=Math.round(e.width/2-l)+l,this.cacheTranslationY=Math.round(e.height/2-c)+c,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,i),this.zoomX=s,this.zoomY=i,!0}return!1}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new fe(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Fe(this.calcTransformMatrix());return new fe(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e}_set(e,t){e!==J&&e!==Z||(t=this._constrainScale(t)),e===J&&t<0?(this.flipX=!this.flipX,t*=-1):"scaleY"===e&&t<0?(this.flipY=!this.flipY,t*=-1):"shadow"!==e||!t||t instanceof Or||(t=new Or(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:n,cacheTranslationY:s}=this,{width:i,height:o}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:n,cacheTranslationY:s,width:i,height:o,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth}hasFill(){return this.fill&&"transparent"!==this.fill}needsItsOwnCache(){return!!(this.paintFirst===ne&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const n=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=n,this.stroke=s}createClipPathLayer(e,t){const r=_e(t),n=r.getContext("2d");if(n.translate(t.cacheTranslationX,t.cacheTranslationY),n.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(e=>{e.transform(n)}),t.parentClipPaths.push(e),e.absolutePositioned){const e=De(this.calcTransformMatrix());n.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return e.transform(n),e.drawObject(n,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const n=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,n)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Qe(r)?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Qe(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&0!==t.length&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,n=this.getCanvasRetinaScaling(),[s,,,i]=(null==r?void 0:r.viewportTransform)||P,o=s*n,a=i*n,l=t.nonScaling?new fe(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*g.browserShadowBlurConstant*(o+a)*(l.x+l.y)/4,e.shadowOffsetX=t.offsetX*o*l.x,e.shadowOffsetY=t.offsetY*a*l.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Qe(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,n=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,n,s):e.transform(1,0,0,1,n,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:n,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===ne?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),i=n.x/this.scaleX/s,o=n.y/this.scaleY/s,a=_e({width:Math.ceil(i),height:Math.ceil(o)}),l=a.getContext("2d");l&&(l.beginPath(),l.moveTo(0,0),l.lineTo(i,0),l.lineTo(i,o),l.lineTo(0,o),l.closePath(),l.translate(i/2,o/2),l.scale(n.zoomX/this.scaleX/s,n.zoomY/this.scaleY/s),this._applyPatternGradientTransform(l,t),l.fillStyle=t.toLive(e),l.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/n.zoomX,s*this.scaleY/n.zoomY),e.strokeStyle=null!==(r=l.createPattern(a,"no-repeat"))&&void 0!==r?r:"")}_findCenterFromElement(){return new fe(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(ae.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=bt(this),r=this.group,n=this.shadow,s=Math.abs,i=e.enableRetinaScaling?k():1,o=(e.multiplier||1)*i,a=e.canvasProvider||(e=>new ct(e,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&yt(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&_t(this,this.getViewportTransform()),this.setCoords();const l=Se(),c=this.getBoundingRect(),u=this.shadow,h=new fe;if(u){const e=u.blur,t=u.nonScaling?new fe(1,1):this.getObjectScaling();h.x=2*Math.round(s(u.offsetX)+e)*s(t.x),h.y=2*Math.round(s(u.offsetY)+e)*s(t.y)}const d=c.width+h.x,f=c.height+h.y;l.width=Math.ceil(d),l.height=Math.ceil(f);const g=a(l);"jpeg"===e.format&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new fe(g.width/2,g.height/2),F,F);const p=this.canvas;g._objects=[this],this.set("canvas",g),this.setCoords();const m=g.toCanvasElement(o||1,e);return this.set("canvas",p),this.shadow=n,r&&(this.group=r),this.set(t),this.setCoords(),g._objects=[],g.destroy(),m}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ke(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return je(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:n}=this;if(t){const{x:e,y:t}=this.getRelativeCenterPoint();this.originX=F,this.originY=F,this.left=e,this.top=t}if(this.set("angle",e),t){const{x:e,y:t}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,n);this.left=e,this.top=t,this.originX=r,this.originY=n}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){le.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&S().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((e,r)=>{let[n,s]=r;return e[n]=this._animate(n,s,t),e},{})}_animate(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.split("."),s=this.constructor.colorProperties.includes(n[n.length-1]),{abort:i,startValue:o,onChange:a,onComplete:l}=r,c=u(u({},r),{},{target:this,startValue:null!=o?o:n.reduce((e,t)=>e[t],this),endValue:t,abort:null==i?void 0:i.bind(this),onChange:(e,t,r)=>{n.reduce((t,r,s)=>(s===n.length-1&&(t[r]=e),t[r]),this),a&&a(e,t,r)},onComplete:(e,t,r)=>{this.setCoords(),l&&l(e,t,r)}});return s?Qr(c):Kr(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do{t=t.parent,t&&e.push(t)}while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(0===t.length&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let n,s=0;s<t.length;s++){if(n=t[s],n===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let i=0;i<r.length;i++){if(this===r[i])return{fork:[],otherFork:[e,...r.slice(0,i)],common:[this,...t]};if(n===r[i])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,i)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const n=t.fork.pop(),s=t.otherFork.pop(),i=r._objects.indexOf(n),o=r._objects.indexOf(s);return i>-1&&i>o}toObject(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).concat(e.customProperties,this.constructor.customProperties||[]);let r;const n=g.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:h,originX:d,originY:f,width:p,height:m,strokeWidth:x,strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:v,strokeUniform:w,strokeMiterLimit:S,scaleX:C,scaleY:_,angle:k,flipX:j,flipY:N,opacity:O,visible:E,backgroundColor:D,fillRule:P,paintFirst:M,globalCompositeOperation:A,skewX:F,skewY:L}=this;s&&!s.excludeFromExport&&(r=s.toObject(t.concat("inverted","absolutePositioned")));const I=e=>$e(e,n),R=u(u({},Ge(this,t)),{},{type:this.constructor.type,version:T,originX:d,originY:f,left:I(c),top:I(h),width:I(p),height:I(m),fill:Je(i)?i.toObject():i,stroke:Je(o)?o.toObject():o,strokeWidth:I(x),strokeDashArray:l?l.concat():l,strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:v,strokeUniform:w,strokeMiterLimit:I(S),scaleX:I(C),scaleY:I(_),angle:I(k),flipX:j,flipY:N,opacity:I(O),shadow:a?a.toObject():a,visible:E,backgroundColor:D,fillRule:P,paintFirst:M,globalCompositeOperation:A,skewX:I(F),skewY:I(L)},r?{clipPath:r}:null);return this.includeDefaultValues?R:this._removeDefaultValues(R)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return qe(e,(e,t)=>{if(t===L||t===I||"type"===t)return!0;const n=r[t];return e!==n&&!(Array.isArray(e)&&Array.isArray(n)&&0===e.length&&0===n.length)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=h(e,en),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{extraParam:n}=r,s=h(r,tn);return Ye(t,s).then(e=>n?(delete e[n],new this(t[n],e)):new this(e))}static fromObject(e,t){return this._fromObject(e,t)}};l(rn,"stateProperties",Dr),l(rn,"cacheProperties",Pr),l(rn,"ownDefaults",Mr),l(rn,"type","FabricObject"),l(rn,"colorProperties",[re,ne,"backgroundColor"]),l(rn,"customProperties",[]),ae.setClass(rn),ae.setClass(rn,"object");const nn=(e,t,r)=>(n,s,i,o)=>{const a=t(n,s,i,o);return a&&kt(e,u(u({},Pt(n,s,i,o)),r)),a};function sn(e){return(t,r,n,s)=>{const{target:i,originX:o,originY:a}=r,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),u=e(t,r,n,s);return i.setPositionByOrigin(c,r.originX,r.originY),u}}const on=nn(G,sn((e,t,r,n)=>{const s=At(t,t.originX,t.originY,r,n);if(Tt(t.originX)===Tt(F)||Tt(t.originX)===Tt(z)&&s.x<0||Tt(t.originX)===Tt(L)&&s.x>0){const{target:e}=t,r=e.strokeWidth/(e.strokeUniform?e.scaleX:1),n=Ot(t)?2:1,i=e.width,o=Math.abs(s.x*n/e.scaleX)-r;return e.set("width",Math.max(o,1)),i!==e.width}return!1}));function an(e,t,r,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=void 0!==n.transparentCorners?n.transparentCorners:s.transparentCorners,l=a?ne:re,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor);let u,h=t,d=r;e.save(),e.fillStyle=n.cornerColor||s.cornerColor||"",e.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(u=i,e.scale(1,o/i),d=r*i/o):o>i?(u=o,e.scale(i/o,1),h=t*o/i):u=i,e.beginPath(),e.arc(h,d,u/2,0,E,!1),e[l](),c&&e.stroke(),e.restore()}function ln(e,t,r,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=void 0!==n.transparentCorners?n.transparentCorners:s.transparentCorners,l=a?ne:re,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor),u=i/2,h=o/2;e.save(),e.fillStyle=n.cornerColor||s.cornerColor||"",e.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",e.translate(t,r);const d=s.getTotalAngle();e.rotate(Te(d)),e["".concat(l,"Rect")](-u,-h,i,o),c&&e.strokeRect(-u,-h,i,o),e.restore()}class cn{constructor(e){l(this,"visible",!0),l(this,"actionName",Q),l(this,"angle",0),l(this,"x",0),l(this,"y",0),l(this,"offsetX",0),l(this,"offsetY",0),l(this,"sizeX",0),l(this,"sizeY",0),l(this,"touchSizeX",0),l(this,"touchSizeY",0),l(this,"cursorStyle","crosshair"),l(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,n){var s;let{tl:i,tr:o,br:a,bl:l}=n;return(null===(s=t.canvas)||void 0===s?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&Jr.isPointInPolygon(r,[i,o,a,l])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,n;return null!==(r=null===(n=e._controlsVisibility)||void 0===n?void 0:n[t])&&void 0!==r?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,n){return new fe(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,n,s,i){const o=Me([Le(r,n),Ie({angle:e}),Re((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new fe(-.5,-.5).transform(o),tr:new fe(.5,-.5).transform(o),br:new fe(.5,.5).transform(o),bl:new fe(-.5,.5).transform(o)}}render(e,t,r,n,s){"circle"===((n=n||{}).cornerStyle||s.cornerStyle)?an.call(this,e,t,r,n,s):ln.call(this,e,t,r,n,s)}}const un=(e,t,r)=>r.lockRotation?Nt:t.cursorStyle,hn=nn(H,sn((e,t,r,n)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=t;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(Dt(s,"lockRotation"))return!1;const h=Math.atan2(o-u.y,i-u.x),d=Math.atan2(n-u.y,r-u.x);let f=Ne(d-h+a);if(s.snapAngle&&s.snapAngle>0){const e=s.snapAngle,t=s.snapThreshold||e,r=Math.ceil(f/e)*e,n=Math.floor(f/e)*e;Math.abs(f-n)<t?f=n:Math.abs(f-r)<t&&(f=r)}f<0&&(f=360+f),f%=360;const g=s.angle!==f;return s.angle=f,g}));function dn(e,t){const r=t.canvas,n=e[r.uniScaleKey];return r.uniformScaling&&!n||!r.uniformScaling&&n}function fn(e,t,r){const n=Dt(e,"lockScalingX"),s=Dt(e,"lockScalingY");if(n&&s)return!0;if(!t&&(n||s)&&r)return!0;if(n&&"x"===t)return!0;if(s&&"y"===t)return!0;const{width:i,height:o,strokeWidth:a}=e;return 0===i&&0===a&&"y"!==t||0===o&&0===a&&"x"!==t}const gn=["e","se","s","sw","w","nw","n","ne","e"],pn=(e,t,r)=>{const n=dn(e,r);if(fn(r,0!==t.x&&0===t.y?"x":0===t.x&&0!==t.y?"y":"",n))return Nt;const s=Mt(r,t);return"".concat(gn[s],"-resize")};function mn(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=t.target,o=s.by,a=dn(e,i);let l,c,u,h,d,f;if(fn(i,o,a))return!1;if(t.gestureScale)c=t.scaleX*t.gestureScale,u=t.scaleY*t.gestureScale;else{if(l=At(t,t.originX,t.originY,r,n),d="y"!==o?Math.sign(l.x||t.signX||1):1,f="x"!==o?Math.sign(l.y||t.signY||1):1,t.signX||(t.signX=d),t.signY||(t.signY=f),Dt(i,"lockScalingFlip")&&(t.signX!==d||t.signY!==f))return!1;if(h=i._getTransformedDimensions(),a&&!o){const e=Math.abs(l.x)+Math.abs(l.y),{original:r}=t,n=e/(Math.abs(h.x*r.scaleX/i.scaleX)+Math.abs(h.y*r.scaleY/i.scaleY));c=r.scaleX*n,u=r.scaleY*n}else c=Math.abs(l.x*i.scaleX/h.x),u=Math.abs(l.y*i.scaleY/h.y);Ot(t)&&(c*=2,u*=2),t.signX!==d&&"y"!==o&&(t.originX=Et(t.originX),c*=-1,t.signX=d),t.signY!==f&&"x"!==o&&(t.originY=Et(t.originY),u*=-1,t.signY=f)}const g=i.scaleX,p=i.scaleY;return o?("x"===o&&i.set(J,c),"y"===o&&i.set(Z,u)):(!Dt(i,"lockScalingX")&&i.set(J,c),!Dt(i,"lockScalingY")&&i.set(Z,u)),g!==i.scaleX||p!==i.scaleY}const xn=nn(U,sn((e,t,r,n)=>mn(e,t,r,n))),yn=nn(U,sn((e,t,r,n)=>mn(e,t,r,n,{by:"x"}))),bn=nn(U,sn((e,t,r,n)=>mn(e,t,r,n,{by:"y"}))),vn=["target","ex","ey","skewingSide"],wn={x:{counterAxis:"y",scale:J,skew:ee,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Z,skew:te,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Sn=["ns","nesw","ew","nwse"],Cn=(e,t,r)=>{if(0!==t.x&&Dt(r,"lockSkewingY"))return Nt;if(0!==t.y&&Dt(r,"lockSkewingX"))return Nt;const n=Mt(r,t)%4;return"".concat(Sn[n],"-resize")};function _n(e,t,r,n,s){const{target:i}=r,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:d}=wn[e];if(Dt(i,l))return!1;const{origin:f,flip:g}=wn[o],p=Tt(r[f])*(i[g]?-1:1),m=-Math.sign(p)*(i[d]?-1:1),x=-(0===i[c]&&At(r,F,F,n,s)[e]>0||i[c]>0?1:-1)*m*.5+.5,y=nn(Y,sn((t,r,n,s)=>function(e,t,r){let{target:n,ex:s,ey:i,skewingSide:o}=t,a=h(t,vn);const{skew:l}=wn[e],c=r.subtract(new fe(s,i)).divide(new fe(n.scaleX,n.scaleY))[e],u=n[l],d=a[l],f=Math.tan(Te(d)),g="y"===e?n._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:n._getTransformedDimensions({scaleX:1,scaleY:1}).y,p=2*c*o/Math.max(g,1)+f,m=Ne(Math.atan(p));n.set(l,m);const x=u!==n[l];if(x&&"y"===e){const{skewX:e,scaleX:t}=n,r=n._getTransformedDimensions({skewY:u}),s=n._getTransformedDimensions(),i=0!==e?r.x/s.x:1;1!==i&&n.set(J,i*t)}return x}(e,r,new fe(n,s))));return y(t,u(u({},r),{},{[a]:x,skewingSide:m}),n,s)}const kn=(e,t,r,n)=>_n("x",e,t,r,n),jn=(e,t,r,n)=>_n("y",e,t,r,n);function Tn(e,t){return e[t.canvas.altActionKey]}const Nn=(e,t,r)=>{const n=Tn(e,r);return 0===t.x?n?ee:Z:0===t.y?n?te:J:""},On=(e,t,r)=>Tn(e,r)?Cn(0,t,r):pn(e,t,r),En=(e,t,r,n)=>Tn(e,t.target)?jn(e,t,r,n):yn(e,t,r,n),Dn=(e,t,r,n)=>Tn(e,t.target)?kn(e,t,r,n):bn(e,t,r,n),Pn=()=>({ml:new cn({x:-.5,y:0,cursorStyleHandler:On,actionHandler:En,getActionName:Nn}),mr:new cn({x:.5,y:0,cursorStyleHandler:On,actionHandler:En,getActionName:Nn}),mb:new cn({x:0,y:.5,cursorStyleHandler:On,actionHandler:Dn,getActionName:Nn}),mt:new cn({x:0,y:-.5,cursorStyleHandler:On,actionHandler:Dn,getActionName:Nn}),tl:new cn({x:-.5,y:-.5,cursorStyleHandler:pn,actionHandler:xn}),tr:new cn({x:.5,y:-.5,cursorStyleHandler:pn,actionHandler:xn}),bl:new cn({x:-.5,y:.5,cursorStyleHandler:pn,actionHandler:xn}),br:new cn({x:.5,y:.5,cursorStyleHandler:pn,actionHandler:xn}),mtr:new cn({x:0,y:-.5,actionHandler:hn,cursorStyleHandler:un,offsetY:-40,withConnection:!0,actionName:X})}),Mn=()=>({mr:new cn({x:.5,y:0,actionHandler:on,cursorStyleHandler:On,actionName:G}),ml:new cn({x:-.5,y:0,actionHandler:on,cursorStyleHandler:On,actionName:G})}),An=()=>u(u({},Pn()),Mn());class Fn extends rn{static getDefaults(){return u(u({},super.getDefaults()),Fn.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Fn.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Pn()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,n=t.action;if(this===r&&n&&n.startsWith(Q))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let n=r.length-1;n>=0;n--){const[s,i]=r[n],o=this.controls[s];if(o.shouldActivate(s,this,e,t?i.touchCorner:i.corner))return this.__corner=s,{key:s,control:o,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Le(t.x,t.y),n=Ie({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Pe(r,n),i=Pe(e,s),o=Pe(i,[1/e[0],0,0,1/e[3],0,0]),a=this.group?Fe(this.calcTransformMatrix()):void 0;a&&(a.scaleX=Math.abs(a.scaleX),a.scaleY=Math.abs(a.scaleY));const l=this._calculateCurrentDimensions(a),c={};return this.forEachControl((e,t)=>{const r=e.positionHandler(l,o,this,e);c[t]=Object.assign(r,this._calcCornerCoords(e,r))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),n=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/n[0],1/n[3]),e.rotate(Te(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=u({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=n.borderColor,this._setLineDash(e,n.borderDashArray),this.strokeBorders(e,t),n.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{hasBorders:r,hasControls:n}=this,s=u({hasBorders:r,hasControls:n},t),i=this.getViewportTransform(),o=s.hasBorders,a=s.hasControls,l=Pe(i,this.calcTransformMatrix()),c=Fe(l);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(Te(this.group?c.angle:this.angle)),o&&this.drawBorders(e,c,t),a&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let n;if(r&&r.forActiveSelection||this.group){const e=vt(this.width,this.height,We(t)),r=this.isStrokeAccountedForInDimensions()?ge:(this.strokeUniform?(new fe).scalarAdd(this.canvas?this.canvas.getZoom():1):new fe(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);n=e.add(r).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,n,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((n,s)=>{n.withConnection&&n.getVisibility(this,s)&&(r=!0,e.moveTo(n.x*t.x,n.y*t.y),e.lineTo(n.x*t.x+n.offsetX,n.y*t.y+n.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:n,cornerDashArray:s,cornerColor:i}=this,o=u({cornerStrokeColor:n,cornerDashArray:s,cornerColor:i},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=o.cornerColor,this.transparentCorners||(e.strokeStyle=o.cornerStrokeColor),this._setLineDash(e,o.cornerDashArray),this.forEachControl((t,r)=>{if(t.getVisibility(this,r)){const n=this.oCoords[r];t.render(e,n.x,n.y,o,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(e=>{let[t,r]=e;return this.setControlVisible(t,r)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const n=this.width+4,s=this.height+4;return t.clearRect(-n/2,-s/2,n,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Ln(e,t){return t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),e}l(Fn,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class In extends Fn{}Ln(In,[Yt]),ae.setClass(In),ae.setClass(In,"object");const Rn=(e,t,r,n)=>{const s=2*(n=Math.round(n))+1,{data:i}=e.getImageData(t-n,r-n,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class zn{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new fe(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new fe(1/this.options.scaleX,1/this.options.scaleY):new fe(1,1)}createSideVector(e,t){const r=yr(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return 0!==this.options.skewX||0!==this.options.skewY}applySkew(e){const t=new fe(e);return t.y+=t.x*Math.tan(Te(this.options.skewY)),t.x+=t.y*Math.tan(Te(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const Bn=new fe;class Vn extends zn{static getOrthogonalRotationFactor(e,t){const r=t?vr(e,t):wr(e);return Math.abs(r)<O?-1:1}constructor(e,t,r,n){super(n),l(this,"AB",void 0),l(this,"AC",void 0),l(this,"alpha",void 0),l(this,"bisector",void 0),this.A=new fe(e),this.B=new fe(t),this.C=new fe(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=vr(this.AB,this.AC),this.bisector=Sr(xr(this.AB.eq(Bn)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t),s=Cr(n),i=Vn.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*i)}projectBevel(){const e=[];return(this.alpha%E==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),n=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?br(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return br(n)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(n))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],n=new fe(Vn.getOrthogonalRotationFactor(this.bisector),Vn.getOrthogonalRotationFactor(new fe(this.bisector.y,this.bisector.x)));return[new fe(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n),new fe(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n)].forEach(n=>{jr(n,e,t)&&r.push(this.A.add(n))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:n,skewY:s,scaleX:i,scaleY:o,strokeUniform:a}=this.options,l=new fe(Math.tan(Te(n)),Math.tan(Te(s))),c=this.strokeProjectionMagnitude,u=a?c/o/Math.sqrt(1/o**2+1/i**2*l.y**2):c/Math.sqrt(1+l.y**2),h=new fe(Math.sqrt(Math.max(c**2-u**2,0)),u),d=a?c/Math.sqrt(1+l.x**2*(1/o)**2/(1/i+1/i*l.x*l.y)**2):c/Math.sqrt(1+l.x**2/(1+l.x*l.y)**2),f=new fe(d,Math.sqrt(Math.max(c**2-d**2,0)));return[f,f.scalarMultiply(-1),h,h.scalarMultiply(-1)].map(e=>this.applySkew(a?e.multiply(this.strokeUniformScalar):e)).forEach(n=>{jr(n,e,t)&&r.push(this.applySkew(this.A).add(n))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%E==0,r=this.applySkew(this.A),n=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),i=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),o=_r(n,i)>0,a=o?n:s,l=o?s:n;return this.isSkewed()?e.push(...this.projectRoundWithSkew(a,l)):e.push(...this.projectRoundNoSkew(a,l)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Wn extends zn{constructor(e,t,r){super(r),this.A=new fe(e),this.T=new fe(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t);return this.scaleUnitVector(Cr(n),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new fe(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Vn(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new fe(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(Sr(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n=this.A.add(r);e.push(n.add(t),n.subtract(t))}return e.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const Un=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[];if(0===e.length)return n;const s=e.reduce((e,t)=>(e[e.length-1].eq(t)||e.push(new fe(t)),e),[new fe(e[0])]);if(1===s.length)r=!0;else if(!r){const e=s[0],t=((e,t)=>{for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return-1})(s,t=>!t.eq(e));s.splice(t+1)}return s.forEach((e,s,i)=>{let o,a;0===s?(a=i[1],o=r?e:i[i.length-1]):s===i.length-1?(o=i[s-1],a=r?e:i[0]):(o=i[s-1],a=i[s+1]),r&&1===i.length?n.push(...new Wn(e,e,t).project()):!r||0!==s&&s!==i.length-1?n.push(...new Vn(e,o,a,t).project()):n.push(...new Wn(e,0===s?a:o,t).project())}),n},Hn=e=>{const t={};return Object.keys(e).forEach(r=>{t[r]={},Object.keys(e[r]).forEach(n=>{t[r][n]=u({},e[r][n])})}),t},Xn=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Yn;const Gn=e=>{if(Yn||Yn||(Yn="Intl"in _()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Yn){const t=Yn.segment(e);return Array.from(t).map(e=>{let{segment:t}=e;return t})}return qn(e)},qn=e=>{const t=[];for(let r,n=0;n<e.length;n++)!1!==(r=$n(e,n))&&t.push(r);return t},$n=(e,t)=>{const r=e.charCodeAt(t);if(isNaN(r))return"";if(r<55296||r>57343)return e.charAt(t);if(55296<=r&&r<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";const r=e.charCodeAt(t+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";const n=e.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var Kn=Object.freeze({__proto__:null,capitalize:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(e.charAt(0).toUpperCase()).concat(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:Xn,graphemeSplit:Gn});const Qn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textDecorationThickness!==t.textDecorationThickness||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||r&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},Jn=(e,t)=>{const r=t.split("\n"),n=[];let s=-1,i={};e=Hn(e);for(let o=0;o<r.length;o++){const t=Gn(r[o]);if(e[o])for(let r=0;r<t.length;r++){s++;const t=e[o][r];t&&Object.keys(t).length>0&&(Qn(i,t,!0)?n.push({start:s,end:s+1,style:t}):n[n.length-1].end++),i=t||{}}else s+=t.length,i={}}return n},Zn=(e,t)=>{if(!Array.isArray(e))return Hn(e);const r=t.split(V),n={};let s=-1,i=0;for(let o=0;o<r.length;o++){const t=Gn(r[o]);for(let r=0;r<t.length;r++)s++,e[i]&&e[i].start<=s&&s<e[i].end&&(n[o]=n[o]||{},n[o][r]=u({},e[i].style),s===e[i].end-1&&i++)}return n},es=["display","transform",re,"fill-opacity","fill-rule","opacity",ne,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function ts(e,t){const r=e.nodeName,n=e.getAttribute("class"),s=e.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+r,"i"),t=t.replace(o,""),s&&t.length&&(o=new RegExp("#"+s+i,"i"),t=t.replace(o,"")),n&&t.length){const e=n.split(" ");for(let r=e.length;r--;)o=new RegExp("\\."+e[r]+i,"i"),t=t.replace(o,"")}return 0===t.length}function rs(e,t){let r=!0;const n=ts(e,t.pop());return n&&t.length&&(r=function(e,t){let r,n=!0;for(;e.parentElement&&1===e.parentElement.nodeType&&t.length;)n&&(r=t.pop()),n=ts(e=e.parentElement,r);return 0===t.length}(e,t)),n&&r&&0===t.length}const ns=e=>{var t;return null!==(t=hr[e])&&void 0!==t?t:e},ss=new RegExp("(".concat(lr,")"),"gi");var is,os,as,ls,cs,us,hs;const ds="(".concat(lr,")"),fs=String.raw(is||(is=d(["(skewX)(",")"],["(skewX)\\(","\\)"])),ds),gs=String.raw(os||(os=d(["(skewY)(",")"],["(skewY)\\(","\\)"])),ds),ps=String.raw(as||(as=d(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),ds,ds,ds),ms=String.raw(ls||(ls=d(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),ds,ds),xs=String.raw(cs||(cs=d(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),ds,ds),ys=String.raw(us||(us=d(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),ds,ds,ds,ds,ds,ds),bs="(?:".concat(ys,"|").concat(xs,"|").concat(ps,"|").concat(ms,"|").concat(fs,"|").concat(gs,")"),vs="(?:".concat(bs,"*)"),ws=String.raw(hs||(hs=d(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),vs),Ss=new RegExp(ws),Cs=new RegExp(bs),_s=new RegExp(bs,"g");function ks(e){const t=[];if(!(e=(e=>e.replace(ss," $1 ").replace(/,/gi," ").replace(/\s+/gi," "))(e).replace(/\s*([()])\s*/gi,"$1"))||e&&!Ss.test(e))return[...P];for(const r of e.matchAll(_s)){const e=Cs.exec(r[0]);if(!e)continue;let n=P;const s=e.filter(e=>!!e),[,i,...o]=s,[a,l,c,u,h,d]=o.map(e=>parseFloat(e));switch(i){case"translate":n=Le(a,l);break;case X:n=Ie({angle:a},{x:l,y:c});break;case Q:n=Re(a,l);break;case ee:n=Be(a);break;case te:n=Ve(a);break;case"matrix":n=[a,l,c,u,h,d]}t.push(n)}return Me(t)}function js(e,t,r,n){const s=Array.isArray(t);let i,o=t;if(e!==re&&e!==ne||t!==B){if("strokeUniform"===e)return"non-scaling-stroke"===t;if("strokeDashArray"===e)o=t===B?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)o=r&&r.transformMatrix?Pe(r.transformMatrix,ks(t)):ks(t);else if("visible"===e)o=t!==B&&"hidden"!==t,r&&!1===r.visible&&(o=!1);else if("opacity"===e)o=parseFloat(t),r&&void 0!==r.opacity&&(o*=r.opacity);else if("textAnchor"===e)o="start"===t?L:"end"===t?z:F;else if("charSpacing"===e||e===qt)i=Ut(t,n)/n*1e3;else if("paintFirst"===e){const e=t.indexOf(re),r=t.indexOf(ne);o=re,(e>-1&&r>-1&&r<e||-1===e&&r>-1)&&(o=ne)}else{if("href"===e||"xlink:href"===e||"font"===e||"id"===e)return t;if("imageSmoothing"===e)return"optimizeQuality"===t;i=s?t.map(Ut):Ut(t,n)}}else o="";return!s&&isNaN(i)?o:i}function Ts(e,t){e.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[r,n]=e.split(":");t[r.trim().toLowerCase()]=n.trim()})}const Ns={stroke:"strokeOpacity",fill:"fillOpacity"};function Os(e,t,r){if(!e)return{};let n,s={},i=M;e.parentNode&&gr.test(e.parentNode.nodeName)&&(s=Os(e.parentElement,t,r),s.fontSize&&(n=i=Ut(s.fontSize)));const o=u(u(u({},t.reduce((t,r)=>{const n=e.getAttribute(r);return n&&(t[r]=n),t},{})),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(const n in t)rs(e,n.split(" "))&&(r=u(u({},r),t[n]));return r}(e,r)),function(e){const t={},r=e.getAttribute("style");return r?("string"==typeof r?Ts(r,t):function(e,t){Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&(t[r.toLowerCase()]=n)})}(r,t),t):t}(e));o[fr]&&e.setAttribute(fr,o[fr]),o[dr]&&(n=Ut(o[dr],i),o[dr]="".concat(n));const a={};for(const c in o){const e=ns(c),t=js(e,o[c],s,n);a[e]=t}a&&a.font&&function(e,t){const r=e.match(ur);if(!r)return;const n=r[1],s=r[3],i=r[4],o=r[5],a=r[6];n&&(t.fontStyle=n),s&&(t.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(t.fontSize=Ut(i)),a&&(t.fontFamily=a),o&&(t.lineHeight="normal"===o?1:o)}(a.font,a);const l=u(u({},s),a);return gr.test(e.nodeName)?l:function(e){const t=In.getDefaults();return Object.entries(Ns).forEach(r=>{let[n,s]=r;if(void 0===e[s]||""===e[n])return;if(void 0===e[n]){if(!t[n])return;e[n]=t[n]}if(0===e[n].indexOf("url("))return;const i=new Wt(e[n]);e[n]=i.setAlpha($e(i.getAlpha()*e[s],2)).toRgba()}),e}(l)}const Es=["left","top","width","height","visible"],Ds=["rx","ry"];class Ps extends In{static getDefaults(){return u(u({},super.getDefaults()),Ps.ownDefaults)}constructor(e){super(),Object.assign(this,Ps.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,n=-t/2,s=-r/2,i=this.rx?Math.min(this.rx,t/2):0,o=this.ry?Math.min(this.ry,r/2):0,a=0!==i||0!==o;e.beginPath(),e.moveTo(n+i,s),e.lineTo(n+t-i,s),a&&e.bezierCurveTo(n+t-A*i,s,n+t,s+A*o,n+t,s+o),e.lineTo(n+t,s+r-o),a&&e.bezierCurveTo(n+t,s+r-A*o,n+t-A*i,s+r,n+t-i,s+r),e.lineTo(n+i,s+r),a&&e.bezierCurveTo(n+A*i,s+r,n,s+r-A*o,n,s+r-o),e.lineTo(n,s+o),a&&e.bezierCurveTo(n,s+A*o,n+A*i,s,n+i,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Ds,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(n,'" width="').concat(e,'" height="').concat(t,'" />\n')]}static async fromElement(e,t,r){const n=Os(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,width:o=0,height:a=0,visible:l=!0}=n,c=h(n,Es);return new this(u(u(u({},t),c),{},{left:s,top:i,width:o,height:a,visible:Boolean(l&&o&&a)}))}}l(Ps,"type","Rect"),l(Ps,"cacheProperties",[...Pr,...Ds]),l(Ps,"ownDefaults",{rx:0,ry:0}),l(Ps,"ATTRIBUTE_NAMES",[...es,"x","y","rx","ry","width","height"]),ae.setClass(Ps),ae.setSVGClass(Ps);const Ms="initialization",As="added",Fs="removed",Ls="imperative",Is=(e,t)=>{const{strokeUniform:r,strokeWidth:n,width:s,height:i,group:o}=t,a=o&&o!==e?wt(o.calcTransformMatrix(),e.calcTransformMatrix()):null,l=a?t.getRelativeCenterPoint().transform(a):t.getRelativeCenterPoint(),c=!t.isStrokeAccountedForInDimensions(),u=r&&c?Ct(new fe(n,n),void 0,e.calcTransformMatrix()):ge,h=!r&&c?n:0,d=vt(s+h,i+h,Me([a,t.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class Rs{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:n}=e;return t===Ms||t===Ls||!!r&&n!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==Ms&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:n}=t;if(r===Ls&&t.overrides)return t.overrides;if(0===e.length)return;const{left:s,top:i,width:o,height:a}=gt(e.map(e=>Is(n,e)).reduce((e,t)=>e.concat(t),[])),l=new fe(o,a),c=new fe(s,i).add(l.scalarDivide(2));if(r===Ms){const e=this.getInitialSize(t,{size:l,center:c});return{center:c,relativeCorrection:new fe(0,0),size:e}}return{center:c.transform(n.calcOwnMatrix()),size:l}}}l(Rs,"type","strategy");class zs extends Rs{shouldPerformLayout(e){return!0}}l(zs,"type","fit-content"),ae.setClass(zs);const Bs=["strategy"],Vs=["target","strategy","bubbles","prevStrategy"],Ws="layoutManager";class Us{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zs;l(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=u(u({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[se,W,G,H,U,Y,K,q,$].map(t=>e.on(t,e=>this.performLayout(t===se?{type:"object_modified",trigger:t,e:e,target:r}:{type:"object_modifying",trigger:t,e:e,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(e=>e()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:n}=t;if(r===Ms||r===As?this.subscribeTargets(e):r===Fs&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),n&&n.fire("object:layout:before",{target:t,context:e}),r===Ls&&e.deep){const r=h(e,Bs);t.forEachObject(e=>e.layoutManager&&e.layoutManager.performLayout(u(u({},r),{},{bubbles:!1,target:e})))}}getLayoutResult(e){const{target:t,strategy:r,type:n}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const i=n===Ms?new fe:t.getRelativeCenterPoint(),{center:o,correction:a=new fe,relativeCorrection:l=new fe}=s,c=i.subtract(o).add(a).transform(n===Ms?P:De(t.calcOwnMatrix()),!0).add(l);return{result:s,prevCenter:i,nextCenter:o,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:n},nextCenter:s}=t;var i,o;r.set({width:n.x,height:n.y}),this.layoutObjects(e,t),e.type===Ms?r.set({left:null!==(i=e.x)&&void 0!==i?i:s.x+n.x*Tt(r.originX),top:null!==(o=e.y)&&void 0!==o?o:s.y+n.y*Tt(r.originY)}):(r.setPositionByOrigin(s,F,F),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(n=>{n.group===r&&this.layoutObject(e,t,n)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:n}=t;r.set({left:r.left+n.x,top:r.top+n.y})}onAfterLayout(e,t){const{target:r,strategy:n,bubbles:s,prevStrategy:i}=e,o=h(e,Vs),{canvas:a}=r;r.fire("layout:after",{context:e,result:t}),a&&a.fire("object:layout:after",{context:e,result:t,target:r});const l=r.parent;s&&null!=l&&l.layoutManager&&((o.path||(o.path=[])).push(r),l.layoutManager.performLayout(u(u({},o),{},{target:l}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(e=>e.forEach(e=>e())),e.clear()}toObject(){return{type:Ws,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ae.setClass(Us,Ws);const Hs=["type","objects","layoutManager"];class Xs extends Us{performLayout(){}}class Ys extends(me(In)){static getDefaults(){return u(u({},super.getDefaults()),Ys.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),l(this,"_activeObjects",[]),l(this,"__objectSelectionTracker",void 0),l(this,"__objectSelectionDisposer",void 0),Object.assign(this,Ys.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(e=>{this.enterGroup(e,!1)}),this.layoutManager=null!==(r=t.layoutManager)&&void 0!==r?r:new Us,this.layoutManager.performLayout({type:Ms,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(p("error","Group: circular object trees are not supported, this call has no effect"),!1):-1===this._objects.indexOf(e)||(p("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((e,t,r)=>this.canEnterGroup(e)&&r.indexOf(e)===t)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...n);return this._onAfterObjectsChange(As,n),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(r),i=super.insertAt(e,...s);return this._onAfterObjectsChange(As,s),i}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Fs,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),"canvas"===e&&r!==t&&(this._objects||[]).forEach(r=>{r._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const n=this._activeObjects;if(e)n.push(r),this._set("dirty",!0);else if(n.length>0){const e=n.indexOf(r);e>-1&&(n.splice(e,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&xt(e,Pe(De(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(xt(e,Pe(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=In.prototype.shouldCache.call(this);if(e)for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1;return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var n;const t=this._objects[s];null!==(n=this.canvas)&&void 0!==n&&n.preserveObjectStacking&&t.group!==this?(e.save(),e.transform(...De(this.calcTransformMatrix())),t.render(e),e.restore()):t.group===this&&t.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.layoutManager.performLayout(u({target:this,type:Ls},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(n){const s=n.includeDefaultValues;n.includeDefaultValues=r;const i=n[e||"toObject"](t);return n.includeDefaultValues=s,i})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.layoutManager.toObject();return u(u(u({},super.toObject(["subTargetCheck","interactive",...e])),"fit-content"!==t.strategy||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Ps.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const n=t.join("");return e?e(n):n}_toSVG(e){const t=["<g ","COMMON_PARTS"," >\n"],r=this._createSVGBgRect(e);r&&t.push("\t\t",r);for(let n=0;n<this._objects.length;n++)t.push("\t\t",this._objects[n].toSVG(e));return t.push("</g>\n"),t}getSvgStyles(){const e=void 0!==this.opacity&&1!==this.opacity?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("\t",r);for(let n=0;n<this._objects.length;n++)t.push("\t",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:n=[],layoutManager:s}=e,i=h(e,Hs);return Promise.all([Xe(n,t),Ye(i,t)]).then(e=>{let[t,r]=e;const n=new this(t,u(u(u({},i),r),{},{layoutManager:new Xs}));if(s){const e=ae.getClass(s.type),t=ae.getClass(s.strategy);n.layoutManager=new e(new t)}else n.layoutManager=new Us;return n.layoutManager.subscribeTargets({type:Ms,target:n,targets:n.getObjects()}),n.setCoords(),n})}}l(Ys,"type","Group"),l(Ys,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ae.setClass(Ys);const Gs=(e,t)=>Math.min(t.width/e.width,t.height/e.height),qs=(e,t)=>Math.max(t.width/e.width,t.height/e.height),$s="\\s*,?\\s*",Ks="".concat($s,"(").concat(lr,")"),Qs="".concat(Ks).concat(Ks).concat(Ks).concat($s,"([01])").concat($s,"([01])").concat(Ks).concat(Ks),Js={m:"l",M:"L"},Zs=(e,t,r,n,s,i,o,a,l,c,u)=>{const h=he(e),d=de(e),f=he(t),g=de(t),p=r*s*f-n*i*g+o,m=n*s*f+r*i*g+a;return["C",c+l*(-r*s*d-n*i*h),u+l*(-n*s*d+r*i*h),p+l*(r*s*g+n*i*f),m+l*(n*s*g-r*i*f),p,m]},ei=(e,t,r,n)=>{const s=Math.atan2(t,e),i=Math.atan2(n,r);return i>=s?i-s:2*Math.PI-(s-i)};function ti(e,t,r,n,s,i,o,a){let l;if(g.cachesBoundsOfCurve&&(l=[...arguments].join(),j.boundsOfCurveCache[l]))return j.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*e-12*r+6*s,p=-3*e+9*r-9*s+3*o,m=3*r-3*e;for(let g=0;g<2;++g){if(g>0&&(f=6*t-12*n+6*i,p=-3*t+9*n-9*i+3*a,m=3*n-3*t),u(p)<1e-12){if(u(f)<1e-12)continue;const e=-m/f;0<e&&e<1&&h.push(e);continue}const e=f*f-4*m*p;if(e<0)continue;const r=c(e),s=(-f+r)/(2*p);0<s&&s<1&&h.push(s);const o=(-f-r)/(2*p);0<o&&o<1&&h.push(o)}let x=h.length;const y=x,b=ii(e,t,r,n,s,i,o,a);for(;x--;){const{x:e,y:t}=b(h[x]);d[0][x]=e,d[1][x]=t}d[0][y]=e,d[1][y]=t,d[0][y+1]=o,d[1][y+1]=a;const v=[new fe(Math.min(...d[0]),Math.min(...d[1])),new fe(Math.max(...d[0]),Math.max(...d[1]))];return g.cachesBoundsOfCurve&&(j.boundsOfCurveCache[l]=v),v}const ri=(e,t,r)=>{let[n,s,i,o,a,l,c,u]=r;const h=((e,t,r,n,s,i,o)=>{if(0===r||0===n)return[];let a=0,l=0,c=0;const u=Math.PI,h=o*D,d=de(h),f=he(h),g=.5*(-f*e-d*t),p=.5*(-f*t+d*e),m=r**2,x=n**2,y=p**2,b=g**2,v=m*x-m*y-x*b;let w=Math.abs(r),S=Math.abs(n);if(v<0){const e=Math.sqrt(1-v/(m*x));w*=e,S*=e}else c=(s===i?-1:1)*Math.sqrt(v/(m*y+x*b));const C=c*w*p/S,_=-c*S*g/w,k=f*C-d*_+.5*e,j=d*C+f*_+.5*t;let T=ei(1,0,(g-C)/w,(p-_)/S),N=ei((g-C)/w,(p-_)/S,(-g-C)/w,(-p-_)/S);0===i&&N>0?N-=2*u:1===i&&N<0&&(N+=2*u);const O=Math.ceil(Math.abs(N/u*2)),E=[],P=N/O,M=8/3*Math.sin(P/4)*Math.sin(P/4)/Math.sin(P/2);let A=T+P;for(let D=0;D<O;D++)E[D]=Zs(T,A,f,d,w,S,k,j,M,a,l),a=E[D][5],l=E[D][6],T=A,A+=P;return E})(c-e,u-t,s,i,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=e,h[d][2]+=t,h[d][3]+=e,h[d][4]+=t,h[d][5]+=e,h[d][6]+=t;return h},ni=e=>{let t=0,r=0,n=0,s=0;const i=[];let o,a=0,l=0;for(const c of e){const e=[...c];let u;switch(e[0]){case"l":e[1]+=t,e[2]+=r;case"L":t=e[1],r=e[2],u=["L",t,r];break;case"h":e[1]+=t;case"H":t=e[1],u=["L",t,r];break;case"v":e[1]+=r;case"V":r=e[1],u=["L",t,r];break;case"m":e[1]+=t,e[2]+=r;case"M":t=e[1],r=e[2],n=e[1],s=e[2],u=["M",t,r];break;case"c":e[1]+=t,e[2]+=r,e[3]+=t,e[4]+=r,e[5]+=t,e[6]+=r;case"C":a=e[3],l=e[4],t=e[5],r=e[6],u=["C",e[1],e[2],a,l,t,r];break;case"s":e[1]+=t,e[2]+=r,e[3]+=t,e[4]+=r;case"S":"C"===o?(a=2*t-a,l=2*r-l):(a=t,l=r),t=e[3],r=e[4],u=["C",a,l,e[1],e[2],t,r],a=u[3],l=u[4];break;case"q":e[1]+=t,e[2]+=r,e[3]+=t,e[4]+=r;case"Q":a=e[1],l=e[2],t=e[3],r=e[4],u=["Q",a,l,t,r];break;case"t":e[1]+=t,e[2]+=r;case"T":"Q"===o?(a=2*t-a,l=2*r-l):(a=t,l=r),t=e[1],r=e[2],u=["Q",a,l,t,r];break;case"a":e[6]+=t,e[7]+=r;case"A":ri(t,r,e).forEach(e=>i.push(e)),t=e[6],r=e[7];break;case"z":case"Z":t=n,r=s,u=["Z"]}u?(i.push(u),o=u[0]):o=""}return i},si=(e,t,r,n)=>Math.sqrt((r-e)**2+(n-t)**2),ii=(e,t,r,n,s,i,o,a)=>l=>{const c=l**3,u=(e=>3*e**2*(1-e))(l),h=(e=>3*e*(1-e)**2)(l),d=(e=>(1-e)**3)(l);return new fe(o*c+s*u+r*h+e*d,a*c+i*u+n*h+t*d)},oi=e=>e**2,ai=e=>2*e*(1-e),li=e=>(1-e)**2,ci=(e,t,r,n,s,i,o,a)=>l=>{const c=oi(l),u=ai(l),h=li(l),d=3*(h*(r-e)+u*(s-r)+c*(o-s)),f=3*(h*(n-t)+u*(i-n)+c*(a-i));return Math.atan2(f,d)},ui=(e,t,r,n,s,i)=>o=>{const a=oi(o),l=ai(o),c=li(o);return new fe(s*a+r*l+e*c,i*a+n*l+t*c)},hi=(e,t,r,n,s,i)=>o=>{const a=1-o,l=2*(a*(r-e)+o*(s-r)),c=2*(a*(n-t)+o*(i-n));return Math.atan2(c,l)},di=(e,t,r)=>{let n=new fe(t,r),s=0;for(let i=1;i<=100;i+=1){const t=e(i/100);s+=si(n.x,n.y,t.x,t.y),n=t}return s},fi=e=>{let t,r,n=0,s=0,i=0,o=0,a=0;const l=[];for(const c of e){const e={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":r=e,r.x=o=s=c[1],r.y=a=i=c[2];break;case"L":r=e,r.length=si(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":t=ii(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),r=e,r.iterator=t,r.angleFinder=ci(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),r.length=di(t,s,i),s=c[5],i=c[6];break;case"Q":t=ui(s,i,c[1],c[2],c[3],c[4]),r=e,r.iterator=t,r.angleFinder=hi(s,i,c[1],c[2],c[3],c[4]),r.length=di(t,s,i),s=c[3],i=c[4];break;case"Z":r=e,r.destX=o,r.destY=a,r.length=si(s,i,o,a),s=o,i=a}n+=r.length,l.push(r)}return l.push({length:n,x:s,y:i}),l},gi=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fi(e),n=0;for(;t-r[n].length>0&&n<r.length-2;)t-=r[n].length,n++;const s=r[n],i=t/s.length,o=e[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return u(u({},new fe(s.x,s.y).lerp(new fe(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return u(u({},new fe(s.x,s.y).lerp(new fe(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return((e,t)=>{let r,n=0,s=0,i={x:e.x,y:e.y},o=u({},i),a=.01,l=0;const c=e.iterator,h=e.angleFinder;for(;s<t&&a>1e-4;)o=c(n),l=n,r=si(i.x,i.y,o.x,o.y),r+s>t?(n-=a,a/=2):(i=o,n+=a,s+=r);return u(u({},o),{},{angle:h(l)})})(s,t)}},pi=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),mi=new RegExp(Qs,"g"),xi=new RegExp(lr,"gi"),yi={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},bi=e=>{var t;const r=[],n=null!==(t=e.match(pi))&&void 0!==t?t:[];for(const s of n){const e=s[0];if("z"===e||"Z"===e){r.push([e]);continue}const t=yi[e.toLowerCase()];let n=[];if("a"===e||"A"===e){mi.lastIndex=0;for(let e=null;e=mi.exec(s);)n.push(...e.slice(1))}else n=s.match(xi)||[];for(let s=0;s<n.length;s+=t){const i=new Array(t),o=Js[e];i[0]=s>0&&o?o:e;for(let e=0;e<t;e++)i[e+1]=parseFloat(n[s+e]);r.push(i)}}return r},vi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new fe(e[0]),n=new fe(e[1]),s=1,i=0;const o=[],a=e.length,l=a>2;let c;for(l&&(s=e[2].x<n.x?-1:e[2].x===n.x?0:1,i=e[2].y<n.y?-1:e[2].y===n.y?0:1),o.push(["M",r.x-s*t,r.y-i*t]),c=1;c<a;c++){if(!r.eq(n)){const e=r.midPointFrom(n);o.push(["Q",r.x,r.y,e.x,e.y])}r=e[c],c+1<e.length&&(n=e[c+1])}return l&&(s=r.x>e[c-2].x?1:r.x===e[c-2].x?0:-1,i=r.y>e[c-2].y?1:r.y===e[c-2].y?0:-1),o.push(["L",r.x+s*t,r.y+i*t]),o},wi=(e,t)=>e.map(e=>e.map((e,r)=>0===r||void 0===t?e:$e(e,t)).join(" ")).join(" ");function Si(e,t){const r=e.style;r&&t&&("string"==typeof t?r.cssText+=";"+t:Object.entries(t).forEach(e=>{let[t,n]=e;return r.setProperty(t,n)}))}const Ci=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function _i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.onComplete||N,n=new(_().XMLHttpRequest),s=t.signal,i=function(){n.abort()},o=function(){s&&s.removeEventListener("abort",i),n.onerror=n.ontimeout=N};if(s&&s.aborted)throw new x("request");return s&&s.addEventListener("abort",i,{once:!0}),n.onreadystatechange=function(){4===n.readyState&&(o(),r(n),n.onreadystatechange=N)},n.onerror=n.ontimeout=o,n.open("get",e,!0),n.send(),n}const ki=(e,t)=>{let r=e._findCenterFromElement();e.transformMatrix&&((e=>{if(e.transformMatrix){const{scaleX:t,scaleY:r,angle:n,skewX:s}=Fe(e.transformMatrix);e.flipX=!1,e.flipY=!1,e.set(J,t),e.set(Z,r),e.angle=n,e.skewX=s,e.skewY=0}})(e),r=r.transform(e.transformMatrix)),delete e.transformMatrix,t&&(e.scaleX*=t.scaleX,e.scaleY*=t.scaleY,e.cropX=t.cropX,e.cropY=t.cropY,r.x+=t.offsetLeft,r.y+=t.offsetTop,e.width=t.width,e.height=t.height),e.setPositionByOrigin(r,F,F)};Object.freeze({__proto__:null,addTransformToObject:mt,animate:Kr,animateColor:Qr,applyTransformToObject:xt,calcAngleBetweenVectors:vr,calcDimensionsMatrix:We,calcPlaneChangeMatrix:wt,calcVectorRotation:wr,cancelAnimFrame:be,capValue:Er,composeMatrix:Ue,copyCanvasElement:e=>{var t;const r=_e(e);return null===(t=r.getContext("2d"))||void 0===t||t.drawImage(e,0,0),r},cos:he,createCanvasElement:Se,createImage:Ce,createRotateMatrix:Ie,createScaleMatrix:Re,createSkewXMatrix:Be,createSkewYMatrix:Ve,createTranslateMatrix:Le,createVector:yr,crossProduct:_r,degreesToRadians:Te,dotProduct:kr,ease:zr,enlivenObjectEnlivables:Ye,enlivenObjects:Xe,findScaleToCover:qs,findScaleToFit:Gs,getBoundsOfCurve:ti,getOrthonormalVector:Cr,getPathSegmentsInfo:fi,getPointOnPath:gi,getPointer:ht,getRandomInt:Ci,getRegularPolygonPath:(e,t)=>{const r=2*Math.PI/e;let n=-O;e%2==0&&(n+=r/2);const s=new Array(e+1);for(let i=0;i<e;i++){const e=i*r+n,{x:o,y:a}=new fe(he(e),de(e)).scalarMultiply(t);s[i]=[0===i?"M":"L",o,a]}return s[e]=["Z"],s},getSmoothPathFromPoints:vi,getSvgAttributes:e=>{const t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:Sr,groupSVGElements:(e,t)=>e&&1===e.length?e[0]:new Ys(e,t),hasStyleChanged:Qn,invertTransform:De,isBetweenVectors:jr,isIdentityMatrix:Oe,isTouchEvent:dt,isTransparent:Rn,joinPath:wi,loadImage:He,magnitude:br,makeBoundingBoxFromPoints:gt,makePathSimpler:ni,matrixToSVG:Ke,mergeClipPaths:(e,t)=>{var r;let n=e,s=t;n.inverted&&!s.inverted&&(n=t,s=e),_t(s,null===(r=s.group)||void 0===r?void 0:r.calcTransformMatrix(),n.calcTransformMatrix());const i=n.inverted&&s.inverted;return i&&(n.inverted=s.inverted=!1),new Ys([n],{clipPath:s,inverted:i})},multiplyTransformMatrices:Pe,multiplyTransformMatrixArray:Me,parsePath:bi,parsePreserveAspectRatioAttribute:Ht,parseUnit:Ut,pick:Ge,projectStrokeOnPoints:Un,qrDecompose:Fe,radiansToDegrees:Ne,removeFromArray:ue,removeTransformFromObject:(e,t)=>{const r=De(t),n=Pe(r,e.calcOwnMatrix());xt(e,n)},removeTransformMatrixForSvgParsing:ki,request:_i,requestAnimFrame:ye,resetObjectTransform:yt,rotatePoint:(e,t,r)=>e.rotate(r,t),rotateVector:xr,saveObjectTransform:bt,sendObjectToPlane:_t,sendPointToPlane:St,sendVectorToPlane:Ct,setStyle:Si,sin:de,sizeAfterTransform:vt,string:Kn,stylesFromArray:Zn,stylesToArray:Jn,toBlob:je,toDataURL:ke,toFixed:$e,transformPath:(e,t,r)=>(r&&(t=Pe(t,[1,0,0,1,-r.x,-r.y])),e.map(e=>{const r=[...e];for(let n=1;n<e.length-1;n+=2){const{x:s,y:i}=Ee({x:e[n],y:e[n+1]},t);r[n]=s,r[n+1]=i}return r})),transformPoint:Ee});class ji extends at{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),l(this,"upper",void 0),l(this,"container",void 0);const{el:n}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(n,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const i=this.createContainerElement();i.classList.add(r),n.parentNode&&n.parentNode.replaceChild(i,n),i.append(n,s),this.container=i}createUpperCanvas(){const{el:e}=this.lower,t=Se();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=C().createElement("div");return e.setAttribute("data-fabric","wrapper"),Si(e,{position:"relative"}),ot(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:n}=t;Si(e,u(u({},r),{},{"touch-action":n?"manipulation":B})),ot(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:n}=this.upper;st(r,n,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),it(this.upper.el,e),it(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:n}=this.upper;super.cleanupDOM(e),t.removeChild(n),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),S().dispose(this.upper.el),delete this.upper,delete this.container}}class Ti extends ct{constructor(){super(...arguments),l(this,"targets",[]),l(this,"_hoveredTargets",[]),l(this,"_objectsToRender",void 0),l(this,"_currentTransform",null),l(this,"_groupSelector",null),l(this,"contextTopDirty",!1)}static getDefaults(){return u(u({},super.getDefaults()),Ti.ownDefaults)}get upperCanvasEl(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.el}get contextTop(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new ji(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const n=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+n,-r+n),s.transform(...this.viewportTransform);const i=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=i,s.restore();const o=Math.round(n*this.getRetinaScaling());return Rn(s,o,o,o)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(t=>!!t&&!0===e[t]):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),n=this._activeObject;return!!(!t||t&&n&&r.length>1&&-1===r.indexOf(t)&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let n;return t===Q||t===J||t===Z||t===G?n=this.centeredScaling||e.centeredScaling:t===X&&(n=this.centeredRotation||e.centeredRotation),n?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t?(["ml","tl","bl"].includes(t)?r.x=z:["mr","tr","br"].includes(t)&&(r.x=L),["tl","mt","tr"].includes(t)?r.y=R:["bl","mb","br"].includes(t)&&(r.y=I),r):r}_setupCurrentTransform(e,t,r){var n;const s=t.group?St(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:i="",control:o}=t.getActiveControl()||{},a=r&&o?null===(n=o.getActionHandler(e,t,o))||void 0===n?void 0:n.bind(o):Ft,l=((e,t,r,n)=>{if(!t||!e)return"drag";const s=n.controls[t];return s.getActionName(r,s,n)})(r,i,e,t),c=e[this.centeredKey],h=this._shouldCenterTransform(t,l,c)?{x:F,y:F}:this._getOriginFromCorner(t,i),d={target:t,action:l,actionHandler:a,actionPerformed:!1,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:h.x,originY:h.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Te(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:u(u({},bt(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e:e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:n,deltaY:s}=this._groupSelector,i=new fe(t,r).transform(this.viewportTransform),o=new fe(t+n,r+s).transform(this.viewportTransform),a=this.selectionLineWidth/2;let l=Math.min(i.x,o.x),c=Math.min(i.y,o.y),u=Math.max(i.x,o.x),h=Math.max(i.y,o.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(l,c,u-l,h-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,l+=a,c+=a,u-=a,h-=a,In.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(l,c,u-l,h-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,n=this.getActiveObjects();if(this.targets=[],r&&n.length>=1){if(r.findControl(t,dt(e)))return r;if(n.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const n=this.targets;this.targets=[];const s=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&s&&s!==r?(this.targets=n,r):s}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const n=this.getZoom(),s=e.padding/n;if(s){const[e,t,n,i]=r,o=Math.atan2(t.y-e.y,t.x-e.x),a=he(o)*s,l=de(o)*s,c=a+l,u=a-l;r=[new fe(e.x-u,e.y-c),new fe(t.x+c,t.y-u),new fe(n.x+u,n.y+c),new fe(i.x-c,i.y+u)]}return Jr.isPointInPolygon(t,r)}_checkTarget(e,t){if(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,St(t,void 0,this.viewportTransform))){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}return!1}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const n=e[r];if(this._checkTarget(n,t)){if(pe(n)&&n.subTargetCheck){const e=this._searchPossibleTargets(n._objects,t);e&&this.targets.push(e)}return n}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&pe(r)&&r.interactive&&this.targets[0]){const e=this.targets;for(let t=e.length-1;t>0;t--){const r=e[t];if(!pe(r)||!r.interactive)return r}return e[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.upperCanvasEl,n=r.getBoundingClientRect();let s=ht(e),i=n.width||0,o=n.height||0;i&&o||(I in n&&R in n&&(o=Math.abs(n.top-n.bottom)),z in n&&L in n&&(i=Math.abs(n.right-n.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=St(s,void 0,this.viewportTransform));const a=this.getRetinaScaling();1!==a&&(s.x/=a,s.y/=a);const l=0===i||0===o?new fe(1,1):new fe(r.width/i,r.height/o);return s.multiply(l)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Se(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return et(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,n=!1;const s=this.getActiveObjects(),i=[],o=[];e.forEach(e=>{s.includes(e)||(r=!0,e.fire("deselected",{e:t,target:e}),o.push(e))}),s.forEach(n=>{e.includes(n)||(r=!0,n.fire("selected",{e:t,target:n}),i.push(n))}),e.length>0&&s.length>0?(n=!0,r&&this.fire("selection:updated",{e:t,selected:i,deselected:o})):s.length>0?(n=!0,this.fire("selection:created",{e:t,selected:i})):e.length>0&&(n=!0,this.fire("selection:cleared",{e:t,deselected:o})),n&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),n=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),n}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,et(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e:e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),et(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e:e,deselected:[r]});const n=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),n}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,n={e:e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",n),r.fire(se,n))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;et(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const n=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(n),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&et(t)&&this._activeObject===t){const r=Ge(e,["angle","flipX","flipY",L,J,Z,ee,te,I]);return mt(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const n=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(n)}}l(Ti,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Ni{constructor(e){l(this,"targets",[]),l(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:t}=e.getActiveObject()||{};t&&t.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),ue(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;(null===(t=this.target)||void 0===t?void 0:t.isEditing)&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Oi=["target","oldTarget","fireCanvas","e"],Ei={passive:!1},Di=(e,t)=>{const r=e.getViewportPoint(t),n=e.getScenePoint(t);return{viewportPoint:r,scenePoint:n,pointer:r,absolutePointer:n}},Pi=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.addEventListener(...r)},Mi=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.removeEventListener(...r)},Ai={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Fi extends Ti{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),l(this,"_isClick",void 0),l(this,"textEditingManager",new Ni(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(Pi,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,n=this._getEventPrefix();e(nt(r),"resize",this._onResize),e(r,n+"down",this._onMouseDown),e(r,"".concat(n,"move"),this._onMouseMove,Ei),e(r,"".concat(n,"out"),this._onMouseOut),e(r,"".concat(n,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,Ei)}removeListeners(){this.addOrRemove(Mi,"remove");const e=this._getEventPrefix(),t=rt(this.upperCanvasEl);Mi(t,"".concat(e,"up"),this._onMouseUp),Mi(t,"touchend",this._onTouchEnd,Ei),Mi(t,"".concat(e,"move"),this._onMouseMove,Ei),Mi(t,"touchmove",this._onMouseMove,Ei),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=u({e:e},Di(this,e));this.fire("mouse:out",u(u({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",u({},r)),this._hoveredTargets.forEach(e=>{this.fire("mouse:out",u(u({},r),{},{target:e})),e&&e.fire("mouseout",u({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",u({e:e},Di(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e:e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Pi(this.upperCanvasEl,"drag",this._onDragProgress)}ft(e)}_renderDragEffects(e,t,r){let n=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),n=!0),null==t||t.clearContextTop(),r!==t&&(null==r||r.clearContextTop());const i=this.contextTop;i.save(),i.transform(...this.viewportTransform),t&&(i.save(),t.transform(i),t.renderDragSourceEffect(e),i.restore(),n=!0),r&&(i.save(),r.transform(i),r.renderDropTargetEffect(e),i.restore(),n=!0),i.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==B,r=t?this._activeObject:void 0,n={e:e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Mi(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e:e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:n}=this.findDragTargets(e),s=this._dragSource,i={e:e,target:r,subTargets:n,dragSource:s,canDrop:!1,dropTarget:void 0};let o;this.fire(t,i),this._fireEnterLeaveEvents(r,i),r&&(r.canDrop(e)&&(o=r),r.fire(t,i));for(let a=0;a<n.length;a++){const r=n[a];r.canDrop(e)&&(o=r),r.fire(t,i)}this._renderDragEffects(e,s,o),this._dropTarget=o}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),n={e:e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(t,n)}_onDragLeave(e){const t={e:e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),n=this._basicEventHandler("drop:before",u({e:e,target:t,subTargets:r,dragSource:this._dragSource},Di(this,e)));n.didDrop=!1,n.dropTarget=void 0,this._basicEventHandler("drop",n),this.fire("drop:after",n)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e:e,target:t,subTargets:r});return this.stopContextMenu&&ft(e),this._basicEventHandler("contextmenu",n),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),2==t&&"dblclick"===e.type&&this._handleEvent(e,"dblclick"),3==t&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;void 0===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const n=this.upperCanvasEl,s=this._getEventPrefix(),i=rt(n);Pi(i,"touchend",this._onTouchEnd,Ei),t&&Pi(i,"touchmove",this._onMouseMove,Ei),Mi(n,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Mi(t,"".concat(r,"move"),this._onMouseMove,Ei);const n=rt(t);Pi(n,"".concat(r,"up"),this._onMouseUp),Pi(n,"".concat(r,"move"),this._onMouseMove,Ei)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=rt(this.upperCanvasEl);Mi(r,"touchend",this._onTouchEnd,Ei),Mi(r,"touchmove",this._onMouseMove,Ei),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Pi(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const e=rt(this.upperCanvasEl);Mi(e,"".concat(r,"up"),this._onMouseUp),Mi(e,"".concat(r,"move"),this._onMouseMove,Ei),Pi(t,"".concat(r,"move"),this._onMouseMove,Ei)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,n=this._isClick,s=this._target,{button:i}=e;if(i)return(this.fireMiddleClick&&1===i||this.fireRightClick&&2===i)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let o,a,l=!1;if(r&&(this._finalizeCurrentTransform(e),l=r.actionPerformed),!n){const t=s===this._activeObject;this.handleSelection(e),l||(l=this._shouldRender(s)||!t&&s===this._activeObject)}if(s){const t=s.findControl(this.getViewportPoint(e),dt(e)),{key:n,control:i}=t||{};if(a=n,s.selectable&&s!==this._activeObject&&"up"===s.activeOn)this.setActiveObject(s,e),l=!0;else if(i){const t=i.getMouseUpHandler(e,s,i);t&&(o=this.getScenePoint(e),t.call(i,e,r,o.x,o.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==a)){const t=r.target&&r.target.controls[r.corner],n=t&&t.getMouseUpHandler(e,r.target,t);o=o||this.getScenePoint(e),n&&n.call(t,e,r,o.x,o.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),l?this.requestRenderAll():n||null!==(t=this._activeObject)&&void 0!==t&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:n=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<n.length;s++)n[s]!==r&&n[s].fire(e,t);return t}_handleEvent(e,t,r){const n=this._target,s=this.targets||[],i=u(u(u({e:e,target:n,subTargets:s},Di(this,e)),{},{transform:this._currentTransform},"up:before"===t||"up"===t?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),"down:before"===t||"down"===t?r:{});this.fire("mouse:".concat(t),i),n&&n.fire("mouse".concat(t),i);for(let o=0;o<s.length;o++)s[o]!==n&&s[o].fire("mouse".concat(t),i)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:n}=e;if(n)return(this.fireMiddleClick&&1===n||this.fireRightClick&&2===n)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e))return;if(this._currentTransform)return;let s=this._shouldRender(t),i=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,i=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const t=this.getScenePoint(e);this._groupSelector={x:t.x,y:t.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);const n=t.findControl(this.getViewportPoint(e),dt(e));if(t===this._activeObject&&(n||!i)){this._setupCurrentTransform(e,t,r);const s=n?n.control:void 0,i=this.getScenePoint(e),o=s&&s.getMouseDownHandler(e,t,s);o&&o.call(s,e,this._currentTransform,i.x,i.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=St(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const t=this.findTarget(e);this._setCursorFromEvent(e,t),this._fireOverOutEvents(e,t)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,n=this._hoveredTargets,s=this.targets,i=Math.max(n.length,s.length);this.fireSyntheticInOutEvents("mouse",{e:e,target:t,oldTarget:r,fireCanvas:!0});for(let o=0;o<i;o++)this.fireSyntheticInOutEvents("mouse",{e:e,target:s[o],oldTarget:n[o]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,n=this._hoveredTargets,s=this.targets,i=Math.max(n.length,s.length);this.fireSyntheticInOutEvents("drag",u(u({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let o=0;o<i;o++)this.fireSyntheticInOutEvents("drag",u(u({},t),{},{target:s[o],oldTarget:n[o]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:n,fireCanvas:s,e:i}=t,o=h(t,Oi);const{targetIn:a,targetOut:l,canvasIn:c,canvasOut:d}=Ai[e],f=n!==r;if(n&&f){const e=u(u({},o),{},{e:i,target:n,nextTarget:r},Di(this,i));s&&this.fire(d,e),n.fire(l,e)}if(r&&f){const e=u(u({},o),{},{e:i,target:r,previousTarget:n},Di(this,i));s&&this.fire(c,e),r.fire(a,e)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,n=r.target,s=n.group?St(t,void 0,n.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:n,actionHandler:s,target:i}=t,o=!!s&&s(e,t,r.x,r.y);o&&i.setCoords(),"drag"===n&&o&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||o}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const n=et(this._activeObject)?this._activeObject:null,s=(!n||t.group!==n)&&t.findControl(this.getViewportPoint(e));if(s){const r=s.control;this.setCursor(r.cursorStyleHandler(e,r,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(e=>{r=e.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,n=et(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||n)&&(n||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e:e})&&!r.getActiveControl()){if(n){const n=r.getObjects();if(t===r){const r=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(n,r)||this.searchPossibleTargets(this._objects,r))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],1===r.size()&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(n,e)}else{r.isEditing&&r.exitEditing();const n=new(ae.getClass("ActiveSelection"))([],{canvas:this});n.multiSelectAdd(r,t),this._hoveredTarget=n,this._setActiveObject(n,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:n,deltaY:s}=this._groupSelector,i=new fe(t,r),o=i.add(new fe(n,s)),a=i.min(o),l=i.max(o).subtract(a),c=this.collectObjects({left:a.x,top:a.y,width:l.x,height:l.y},{includeIntersecting:!this.selectionFullyContained}),u=i.eq(o)?c[0]?[c[0]]:[]:c.length>1?c.filter(t=>!t.onSelect({e:e})).reverse():c;if(1===u.length)this.setActiveObject(u[0],e);else if(u.length>1){const t=ae.getClass("ActiveSelection");this.setActiveObject(new t(u,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Li={x1:0,y1:0,x2:0,y2:0},Ii=u(u({},Li),{},{r1:0,r2:0}),Ri=(e,t)=>isNaN(e)&&"number"==typeof t?t:e,zi=/^(\d+\.\d+)%|(\d+)%$/;function Bi(e){return e&&zi.test(e)}function Vi(e,t){const r="number"==typeof e?e:"string"==typeof e?parseFloat(e)/(Bi(e)?100:1):NaN;return Er(0,Ri(r,t),1)}const Wi=/\s*;\s*/,Ui=/\s*:\s*/;function Hi(e,t){let r,n;const s=e.getAttribute("style");if(s){const e=s.split(Wi);""===e[e.length-1]&&e.pop();for(let t=e.length;t--;){const[s,i]=e[t].split(Ui).map(e=>e.trim());"stop-color"===s?r=i:"stop-opacity"===s&&(n=i)}}const i=new Wt(r||e.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Vi(e.getAttribute("offset"),0),color:i.toRgb(),opacity:Ri(parseFloat(n||e.getAttribute("stop-opacity")||""),1)*i.getAlpha()*t}}function Xi(e,t){const r=[],n=e.getElementsByTagName("stop"),s=Vi(t,1);for(let i=n.length;i--;)r.push(Hi(n[i],s));return r}function Yi(e){return"linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?"linear":"radial"}function Gi(e){return"userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage"}function qi(e,t){return e.getAttribute(t)}function $i(e,t){return function(e,t){let r,{width:n,height:s,gradientUnits:i}=t;return Object.keys(e).reduce((t,o)=>{const a=e[o];return"Infinity"===a?r=1:"-Infinity"===a?r=0:(r="string"==typeof a?parseFloat(a):a,"string"==typeof a&&Bi(a)&&(r*=.01,"pixels"===i&&("x1"!==o&&"x2"!==o&&"r2"!==o||(r*=n),"y1"!==o&&"y2"!==o||(r*=s)))),t[o]=r,t},{})}("linear"===Yi(e)?function(e){return{x1:qi(e,"x1")||0,y1:qi(e,"y1")||0,x2:qi(e,"x2")||"100%",y2:qi(e,"y2")||0}}(e):function(e){return{x1:qi(e,"fx")||qi(e,"cx")||"50%",y1:qi(e,"fy")||qi(e,"cy")||"50%",r1:0,x2:qi(e,"cx")||"50%",y2:qi(e,"cy")||"50%",r2:qi(e,"r")||"50%"}}(e),u(u({},t),{},{gradientUnits:Gi(e)}))}class Ki{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:n={},colorStops:s=[],offsetX:i=0,offsetY:o=0,gradientTransform:a,id:l}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:u(u({},"radial"===t?Ii:Li),n),colorStops:s,offsetX:i,offsetY:o,gradientTransform:a,id:l?"".concat(l,"_").concat(we()):we()})}addColorStop(e){for(const t in e){const r=new Wt(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return u(u({},Ge(this,e)),{},{type:this.type,coords:u({},this.coords),colorStops:this.colorStops.map(e=>u({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[],n=this.gradientTransform?this.gradientTransform.concat():P.concat(),s="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox",i=this.colorStops.map(e=>u({},e)).sort((e,t)=>e.offset-t.offset);let o=-this.offsetX,a=-this.offsetY;var l;"objectBoundingBox"===s?(o/=e.width,a/=e.height):(o+=e.width/2,a+=e.height/2),(l=e)&&"function"==typeof l._renderPathCommands&&"percentage"!==this.gradientUnits&&(o-=e.pathOffset.x,a-=e.pathOffset.y),n[4]-=o,n[5]-=a;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Ke(n),'"'),""].join(" ");if("linear"===this.type){const{x1:e,y1:t,x2:n,y2:s}=this.coords;r.push("<linearGradient ",c,' x1="',e,'" y1="',t,'" x2="',n,'" y2="',s,'">\n')}else if("radial"===this.type){const{x1:e,y1:t,x2:n,y2:s,r1:o,r2:a}=this.coords,l=o>a;r.push("<radialGradient ",c,' cx="',l?e:n,'" cy="',l?t:s,'" r="',l?o:a,'" fx="',l?n:e,'" fy="',l?s:t,'">\n'),l&&(i.reverse(),i.forEach(e=>{e.offset=1-e.offset}));const u=Math.min(o,a);if(u>0){const e=u/Math.max(o,a);i.forEach(t=>{t.offset+=e*(1-t.offset)})}}return i.forEach(e=>{let{color:t,offset:n,opacity:s}=e;r.push("<stop ",'offset="',100*n+"%",'" style="stop-color:',t,void 0!==s?";stop-opacity: "+s:";",'"/>\n')}),r.push("linear"===this.type?"</linearGradient>":"</radialGradient>","\n"),r.join("")}toLive(e){const{x1:t,y1:r,x2:n,y2:s,r1:i,r2:o}=this.coords,a="linear"===this.type?e.createLinearGradient(t,r,n,s):e.createRadialGradient(t,r,i,n,s,o);return this.colorStops.forEach(e=>{let{color:t,opacity:r,offset:n}=e;a.addColorStop(n,void 0!==r?new Wt(t).setAlpha(r).toRgba():t)}),a}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(u(u({},e),{},{colorStops:t?t.map(e=>u({},e)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const n=Gi(e),s=t._findCenterFromElement();return new this(u({id:e.getAttribute("id")||void 0,type:Yi(e),coords:$i(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:Xi(e,r.opacity),gradientUnits:n,gradientTransform:ks(e.getAttribute("gradientTransform")||"")},"pixels"===n?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}l(Ki,"type","Gradient"),ae.setClass(Ki,"gradient"),ae.setClass(Ki,"linear"),ae.setClass(Ki,"radial");const Qi=["type","source","patternTransform"];class Ji{get type(){return"pattern"}set type(e){p("warn","Setting type has no effect",e)}constructor(e){l(this,"repeat","repeat"),l(this,"offsetX",0),l(this,"offsetY",0),l(this,"crossOrigin",""),this.id=we(),Object.assign(this,e)}isImageSource(){return!!this.source&&"string"==typeof this.source.src}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&0!==this.source.naturalWidth&&0!==this.source.naturalHeight)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return u(u({},Ge(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:$e(this.offsetX,g.NUM_FRACTION_DIGITS),offsetY:$e(this.offsetY,g.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:n,repeat:s,id:i}=this,o=Ri(this.offsetX/t,0),a=Ri(this.offsetY/r,0),l="repeat-y"===s||"no-repeat"===s?1+Math.abs(o||0):Ri(n.width/t,0),c="repeat-x"===s||"no-repeat"===s?1+Math.abs(a||0):Ri(n.height/r,0);return['<pattern id="SVGID_'.concat(i,'" x="').concat(o,'" y="').concat(a,'" width="').concat(l,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join("\n")}static async fromObject(e,t){let{type:r,source:n,patternTransform:s}=e,i=h(e,Qi);const o=await He(n,u(u({},t),{},{crossOrigin:i.crossOrigin}));return new this(u(u({},i),{},{patternTransform:s&&s.slice(0),source:o}))}}l(Ji,"type","Pattern"),ae.setClass(Ji),ae.setClass(Ji,"pattern");const Zi=["path","left","top"],eo=["d"];class to extends In{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:r,left:n,top:s}=t,i=h(t,Zi);super(),Object.assign(this,to.ownDefaults),this.setOptions(i),this._setPath(e||[],!0),"number"==typeof n&&this.set(L,n),"number"==typeof s&&this.set(I,s)}_setPath(e,t){this.path=ni(Array.isArray(e)?e:bi(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new fe(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const n of this.path)switch(n[0]){case"L":e.lineTo(n[1]+t,n[2]+r);break;case"M":e.moveTo(n[1]+t,n[2]+r);break;case"C":e.bezierCurveTo(n[1]+t,n[2]+r,n[3]+t,n[4]+r,n[5]+t,n[6]+r);break;case"Q":e.quadraticCurveTo(n[1]+t,n[2]+r,n[3]+t,n[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u(u({},super.toObject(e)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=wi(this.path,g.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,'" stroke-linecap="round" />\n')]}_getOffsetTransform(){const e=g.NUM_FRACTION_DIGITS;return" translate(".concat($e(-this.pathOffset.x,e),", ").concat($e(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:n}=this._calcDimensions();this.set({width:t,height:r,pathOffset:n}),e&&this.setPositionByOrigin(n,F,F)}_calcBoundsFromPath(){const e=[];let t=0,r=0,n=0,s=0;for(const i of this.path)switch(i[0]){case"L":n=i[1],s=i[2],e.push({x:t,y:r},{x:n,y:s});break;case"M":n=i[1],s=i[2],t=n,r=s;break;case"C":e.push(...ti(n,s,i[1],i[2],i[3],i[4],i[5],i[6])),n=i[5],s=i[6];break;case"Q":e.push(...ti(n,s,i[1],i[2],i[1],i[2],i[3],i[4])),n=i[3],s=i[4];break;case"Z":n=t,s=r}return gt(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return u(u({},e),{},{pathOffset:new fe(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const n=Os(e,this.ATTRIBUTE_NAMES,r),{d:s}=n;return new this(s,u(u(u({},h(n,eo)),t),{},{left:void 0,top:void 0}))}}l(to,"type","Path"),l(to,"cacheProperties",[...Pr,"path","fillRule"]),l(to,"ATTRIBUTE_NAMES",[...es,"d"]),ae.setClass(to),ae.setSVGClass(to);const ro=["left","top","radius"],no=["radius","startAngle","endAngle","counterClockwise"];class so extends In{static getDefaults(){return u(u({},super.getDefaults()),so.ownDefaults)}constructor(e){super(),Object.assign(this,so.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),"radius"===e&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Te(this.startAngle),Te(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(J)}getRadiusY(){return this.get("radius")*this.get(Z)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...no,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(0===e)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),'" />\n'];{const{radius:t}=this,r=Te(this.startAngle),n=Te(this.endAngle),s=he(r)*t,i=de(r)*t,o=he(n)*t,a=de(n)*t,l=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(i," A ").concat(t," ").concat(t," 0 ").concat(l," ").concat(c," ").concat(o," ").concat(a,'" '),"COMMON_PARTS"," />\n"]}}static async fromElement(e,t,r){const n=Os(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:i=0,radius:o=0}=n;return new this(u(u({},h(n,ro)),{},{radius:o,left:s-o,top:i-o}))}static fromObject(e){return super._fromObject(e)}}l(so,"type","Circle"),l(so,"cacheProperties",[...Pr,...no]),l(so,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),l(so,"ATTRIBUTE_NAMES",["cx","cy","r",...es]),ae.setClass(so),ae.setSVGClass(so);const io=["x1","y1","x2","y2"],oo=["x1","y1","x2","y2"],ao=["x1","x2","y1","y2"];class lo extends In{constructor(){let[e,t,r,n]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,lo.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=n,this._setWidthHeight();const{left:i,top:o}=s;"number"==typeof i&&this.set(L,i),"number"==typeof o&&this.set(I,o)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:n}=this;this.width=Math.abs(r-e),this.height=Math.abs(n-t);const{left:s,top:i,width:o,height:a}=gt([{x:e,y:t},{x:r,y:n}]),l=new fe(s+o/2,i+a/2);this.setPositionByOrigin(l,F,F)}_set(e,t){return super._set(e,t),ao.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var n;Qe(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=null!==(n=this.stroke)&&void 0!==n?n:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new fe((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u(u({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:n,width:s,height:i}=this,o=e<=t?-1:1,a=r<=n?-1:1;return{x1:o*s/2,x2:o*-s/2,y1:a*i/2,y2:a*-i/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(n,'" />\n')]}static async fromElement(e,t,r){const n=Os(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:i=0,x2:o=0,y2:a=0}=n;return new this([s,i,o,a],h(n,io))}static fromObject(e){let{x1:t,y1:r,x2:n,y2:s}=e,i=h(e,oo);return this._fromObject(u(u({},i),{},{points:[t,r,n,s]}),{extraParam:"points"})}}l(lo,"type","Line"),l(lo,"cacheProperties",[...Pr,...ao]),l(lo,"ATTRIBUTE_NAMES",es.concat(ao)),ae.setClass(lo),ae.setSVGClass(lo);class co extends In{static getDefaults(){return u(u({},super.getDefaults()),co.ownDefaults)}constructor(e){super(),Object.assign(this,co.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}l(co,"type","Triangle"),l(co,"ownDefaults",{width:100,height:100}),ae.setClass(co),ae.setSVGClass(co);const uo=["rx","ry"];class ho extends In{static getDefaults(){return u(u({},super.getDefaults()),ho.ownDefaults)}constructor(e){super(),Object.assign(this,ho.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(J)}getRy(){return this.get("ry")*this.get(Z)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...uo,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,'" />\n')]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,E,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const n=Os(e,this.ATTRIBUTE_NAMES,r);return n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,new this(n)}}l(ho,"type","Ellipse"),l(ho,"cacheProperties",[...Pr,...uo]),l(ho,"ownDefaults",{rx:0,ry:0}),l(ho,"ATTRIBUTE_NAMES",[...es,"cx","cy","rx","ry"]),ae.setClass(ho),ae.setSVGClass(ho);const fo=["left","top"],go={exactBoundingBox:!1};class po extends In{static getDefaults(){return u(u({},super.getDefaults()),po.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),l(this,"strokeDiff",void 0),Object.assign(this,po.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:n}=t;this.initialized=!0,this.setBoundingBox(!0),"number"==typeof r&&this.set(L,r),"number"==typeof n&&this.set(I,n)}isOpen(){return!0}_projectStrokeOnPoints(e){return Un(this.points,e,this.isOpen())}_calcDimensions(e){e=u({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(e=>e.projectedPoint):this.points;if(0===t.length)return{left:0,top:0,width:0,height:0,pathOffset:new fe,strokeOffset:new fe,strokeDiff:new fe};const r=gt(t),n=We(u(u({},e),{},{scaleX:1,scaleY:1})),s=gt(this.points.map(e=>Ee(e,n,!0))),i=new fe(this.scaleX,this.scaleY);let o=r.left+r.width/2,a=r.top+r.height/2;return this.exactBoundingBox&&(o-=a*Math.tan(Te(this.skewX)),a-=o*Math.tan(Te(this.skewY))),u(u({},r),{},{pathOffset:new fe(o,a),strokeOffset:new fe(s.left,s.top).subtract(new fe(r.left,r.top)).multiply(i),strokeDiff:new fe(r.width,r.height).subtract(new fe(s.width,s.height)).multiply(i)})}_findCenterFromElement(){const e=gt(this.points);return new fe(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:n,height:s,pathOffset:i,strokeOffset:o,strokeDiff:a}=this._calcDimensions();this.set({width:n,height:s,pathOffset:i,strokeOffset:o,strokeDiff:a}),e&&this.setPositionByOrigin(new fe(t+n/2,r+s/2),F,F)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new fe(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.exactBoundingBox){let i;if(Object.keys(e).some(e=>this.strokeUniform||this.constructor.layoutProperties.includes(e))){var t,r;const{width:n,height:s}=this._calcDimensions(e);i=new fe(null!==(t=e.width)&&void 0!==t?t:n,null!==(r=e.height)&&void 0!==r?r:s)}else{var n,s;i=new fe(null!==(n=e.width)&&void 0!==n?n:this.width,null!==(s=e.height)&&void 0!==s?s:this.height)}return i.multiply(new fe(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,n=super._set(e,t);return this.exactBoundingBox&&r&&((e===J||e===Z)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),n}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u(u({},super.toObject(e)),{},{points:this.points.map(e=>{let{x:t,y:r}=e;return{x:t,y:r}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,n=g.NUM_FRACTION_DIGITS;for(let s=0,i=this.points.length;s<i;s++)e.push($e(this.points[s].x-t,n),",",$e(this.points[s].y-r,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),'" />\n')]}_render(e){const t=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-n);for(let s=0;s<t;s++){const t=this.points[s];e.lineTo(t.x-r,t.y-n)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(function(e){if(!e)return[];const t=e.replace(/,/g," ").trim().split(/\s+/),r=[];for(let n=0;n<t.length;n+=2)r.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return r}(e.getAttribute("points")),u(u({},h(Os(e,this.ATTRIBUTE_NAMES,r),fo)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}l(po,"ownDefaults",go),l(po,"type","Polyline"),l(po,"layoutProperties",[ee,te,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),l(po,"cacheProperties",[...Pr,"points"]),l(po,"ATTRIBUTE_NAMES",[...es]),ae.setClass(po),ae.setSVGClass(po);class mo extends po{isOpen(){return!1}}l(mo,"ownDefaults",go),l(mo,"type","Polygon"),ae.setClass(mo),ae.setSVGClass(mo);class xo extends In{isEmptyStyles(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;const t=void 0===e?this.styles:{line:this.styles[e]};for(const r in t)for(const e in t[r])for(const n in t[r][e])return!1;return!0}styleHas(e,t){if(!this.styles)return!1;if(void 0!==t&&!this.styles[t])return!1;const r=void 0===t?this.styles:{0:this.styles[t]};for(const n in r)for(const t in r[n])if(void 0!==r[n][t][e])return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,n,s=0,i=!0,o=0;for(const a in t){r=0;for(const o in t[a]){const l=t[a][o]||{};s++,void 0!==l[e]?(n?l[e]!==n&&(i=!1):n=l[e],l[e]===this[e]&&delete l[e]):i=!1,0!==Object.keys(l).length?r++:delete t[a][o]}0===r&&delete t[a]}for(let a=0;a<this._textLines.length;a++)o+=this._textLines[a].length;i&&s===o&&(this[e]=n,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,n,s;for(n in t){for(s in r=t[n],r)delete r[s][e],0===Object.keys(r[s]).length&&delete r[s];0===Object.keys(r).length&&delete t[n]}}_extendStyles(e,t){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=qe(u(u({},this._getStyleDeclaration(r,n)),t),e=>void 0!==e);this._setStyleDeclaration(r,n,s)}getSelectionStyles(e,t,r){const n=[];for(let s=e;s<(t||e);s++)n.push(this.getStyleAtPosition(s,r));return n}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,n):this._getStyleDeclaration(r,n)}setSelectionStyles(e,t,r){for(let n=t;n<(r||t);n++)this._extendStyles(n,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const n=this.styles&&this.styles[e];return n&&null!==(r=n[t])&&void 0!==r?r:{}}getCompleteStyleDeclaration(e,t){return u(u({},Ge(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}l(xo,"_styleProperties",Zt);const yo=/  +/g,bo=/"/g;function vo(e,t,r,n,s){return"\t\t".concat(function(e,t){let{left:r,top:n,width:s,height:i}=t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.NUM_FRACTION_DIGITS;const a=Xt(re,e,!1),[l,c,u,h]=[r,n,s,i].map(e=>$e(e,o));return"<rect ".concat(a,' x="').concat(l,'" y="').concat(c,'" width="').concat(u,'" height="').concat(h,'"></rect>')}(e,{left:t,top:r,width:n,height:s}),"\n")}const wo=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let So;class Co extends xo{static getDefaults(){return u(u({},super.getDefaults()),Co.ownDefaults)}constructor(e,t){super(),l(this,"__charBounds",[]),Object.assign(this,Co.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=fi(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(tr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,n,s,i,o;for(let a=0,l=this._textLines.length;a<l;a++)if((this.textAlign===tr||a!==l-1&&!this.isEndOfWrapping(a))&&(n=0,s=this._textLines[a],t=this.getLineWidth(a),t<this.width&&(o=this.textLines[a].match(this._reSpacesAndTabs)))){r=o.length,e=(this.width-t)/r;for(let t=0;t<=s.length;t++)i=this.__charBounds[a][t],this._reSpaceAndTab.test(s[t])?(i.width+=e,i.kernedWidth+=e,i.left+=n,n+=e):i.left+=n}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<r.length;n++){if(e<=r[n].length)return{lineIndex:n,charIndex:e};e-=r[n].length+this.missingNewlineOffset(n,t)}return{lineIndex:n-1,charIndex:r[n-1].length<e?r[n-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ne?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case F:e.textBaseline="middle";break;case"ascender":e.textBaseline=I;break;case"descender":e.textBaseline=R}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const r=this.getLineWidth(t);r>e&&(e=r)}return e}_renderTextLine(e,t,r,n,s,i){this._renderChars(e,t,r,n,s,i)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let n=this._getTopOffset();for(let s=0,i=this._textLines.length;s<i;s++){const t=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){n+=t;continue}const i=this._textLines[s].length,o=this._getLineLeftOffset(s);let a,l,c=0,u=0,h=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let d=0;d<i;d++){const i=this.__charBounds[s][d];l=this.getValueOfPropertyAt(s,d,"textBackgroundColor"),this.path?(e.save(),e.translate(i.renderLeft,i.renderTop),e.rotate(i.angle),e.fillStyle=l,l&&e.fillRect(-i.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),i.width,t/this.lineHeight),e.restore()):l!==h?(a=r+o+u,"rtl"===this.direction&&(a=this.width-a-c),e.fillStyle=h,h&&e.fillRect(a,n,c,t/this.lineHeight),u=i.left,c=i.width,h=l):c+=i.kernedWidth}l&&!this.path&&(a=r+o+u,"rtl"===this.direction&&(a=this.width-a-c),e.fillStyle=l,e.fillRect(a,n,c,t/this.lineHeight)),n+=t}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,n){const s=j.getFontCache(t),i=this._getFontDeclaration(t),o=r+e,a=r&&i===this._getFontDeclaration(n),l=t.fontSize/this.CACHE_FONT_SIZE;let c,u,h,d;if(r&&void 0!==s[r]&&(h=s[r]),void 0!==s[e]&&(d=c=s[e]),a&&void 0!==s[o]&&(u=s[o],d=u-h),void 0===c||void 0===h||void 0===u){const n=function(){if(!So){const e=_e({width:0,height:0});So=e.getContext("2d")}return So}();this._setTextStyles(n,t,!0),void 0===c&&(d=c=n.measureText(e).width,s[e]=c),void 0===h&&a&&r&&(h=n.measureText(r).width,s[r]=h),a&&void 0===u&&(u=n.measureText(o).width,s[o]=u,d=u-h)}return{width:c*l,kernedWidth:d*l}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,n=0;const s=this.pathSide===z,i=this.path,o=this._textLines[e],a=o.length,l=new Array(a);this.__charBounds[e]=l;for(let c=0;c<a;c++){const s=o[c];r=this._getGraphemeBox(s,e,c,t),l[c]=r,n+=r.kernedWidth,t=s}if(l[a]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},i&&i.segmentsInfo){let e=0;const t=i.segmentsInfo[i.segmentsInfo.length-1].length;switch(this.textAlign){case L:e=s?t-n:0;break;case F:e=(t-n)/2;break;case z:e=s?0:t-n}e+=this.pathStartOffset*(s?-1:1);for(let n=s?a-1:0;s?n>=0:n<a;s?n--:n++)r=l[n],e>t?e%=t:e<0&&(e+=t),this._setGraphemeOnPath(e,r),e+=r.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,n=this.path,s=gi(n.path,r,n.segmentsInfo);t.renderLeft=s.x-n.pathOffset.x,t.renderTop=s.y-n.pathOffset.y,t.angle=s.angle+(this.pathSide===z?Math.PI:0)}_getGraphemeBox(e,t,r,n,s){const i=this.getCompleteStyleDeclaration(t,r),o=n?this.getCompleteStyleDeclaration(t,r-1):{},a=this._measureChar(e,i,n,o);let l,c=a.kernedWidth,u=a.width;0!==this.charSpacing&&(l=this._getWidthOfCharSpacing(),u+=l,c+=l);const h={width:u,left:0,height:i.fontSize,kernedWidth:c,deltaY:i.deltaY};if(r>0&&!s){const e=this.__charBounds[t][r-1];h.left=e.left+e.width+a.kernedWidth-a.width}return h}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,n=this._textLines[e].length;r<n;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,n=this._textLines.length;r<n;r++)e=this.getHeightOfLine(r),t+=r===n-1?e/this.lineHeight:e;return t}_getLeftOffset(){return"ltr"===this.direction?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const n=this._getLeftOffset(),s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const o=this.getHeightOfLine(i),a=o/this.lineHeight,l=this._getLineLeftOffset(i);this._renderTextLine(t,e,this._textLines[i],n+l,s+r+a,i),r+=o}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(re))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,n,s,i){const o=this.getHeightOfLine(i),a=this.textAlign.includes(tr),l=this.path,c=!a&&0===this.charSpacing&&this.isEmptyStyles(i)&&!l,u="ltr"===this.direction,h="ltr"===this.direction?1:-1,d=t.direction;let f,g,p,m,x,y="",b=0;if(t.save(),d!==this.direction&&(t.canvas.setAttribute("dir",u?"ltr":"rtl"),t.direction=u?"ltr":"rtl",t.textAlign=u?L:z),s-=o*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,i,0,r.join(""),n,s),void t.restore();for(let v=0,w=r.length-1;v<=w;v++)m=v===w||this.charSpacing||l,y+=r[v],p=this.__charBounds[i][v],0===b?(n+=h*(p.kernedWidth-p.width),b+=p.width):b+=p.kernedWidth,a&&!m&&this._reSpaceAndTab.test(r[v])&&(m=!0),m||(f=f||this.getCompleteStyleDeclaration(i,v),g=this.getCompleteStyleDeclaration(i,v+1),m=Qn(f,g,!1)),m&&(l?(t.save(),t.translate(p.renderLeft,p.renderTop),t.rotate(p.angle),this._renderChar(e,t,i,v,y,-b/2,0),t.restore()):(x=n,this._renderChar(e,t,i,v,y,x,s)),y="",f=g,n+=h*b,b=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,n=_e({width:t,height:r}),s=n.getContext("2d");return n.width=t,n.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(n,"no-repeat")}handleFiller(e,t,r){let n,s;return Qe(r)?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?(n=-this.width/2,s=-this.height/2,e.translate(n,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:n,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:n}=t;return e.lineWidth=n,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,n,s,i,o){const a=this._getStyleDeclaration(r,n),l=this.getCompleteStyleDeclaration(r,n),c="fillText"===e&&l.fill,u="strokeText"===e&&l.stroke&&l.strokeWidth;if(u||c){if(t.save(),t.font=this._getFontDeclaration(l),a.textBackgroundColor&&this._removeShadow(t),a.deltaY&&(o+=a.deltaY),c){const e=this._setFillStyles(t,l);t.fillText(s,i-e.offsetX,o-e.offsetY)}if(u){const e=this._setStrokeStyles(t,l);t.strokeText(s,i-e.offsetX,o-e.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const n=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),i=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),o={fontSize:s*r.size,deltaY:i+s*r.baseline};this.setSelectionStyles(o,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,n=this.textAlign,s=this.direction,i=this.isEndOfWrapping(e);let o=0;return n===tr||n===sr&&!i||n===nr&&!i||n===rr&&!i?0:(n===F&&(o=r/2),n===z&&(o=r),n===sr&&(o=r/2),n===nr&&(o=r),"rtl"===s&&(n===z||n===tr||n===nr?o=0:n===L||n===rr?o=-r:n!==F&&n!==sr||(o=-r/2)),o)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var n;return null!==(n=this._getStyleDeclaration(e,t)[r])&&void 0!==n?n:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const n=this._getLeftOffset(),s=this.path,i=this._getWidthOfCharSpacing(),o="linethrough"===t?.5:"overline"===t?1:0,a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const c=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){r+=c;continue}const u=this._textLines[l],h=c/this.lineHeight,d=this._getLineLeftOffset(l);let f=0,g=0,p=this.getValueOfPropertyAt(l,0,t),m=this.getValueOfPropertyAt(l,0,re),x=this.getValueOfPropertyAt(l,0,qt),y=p,b=m,v=x;const w=r+h*(1-this._fontSizeFraction);let S=this.getHeightOfChar(l,0),C=this.getValueOfPropertyAt(l,0,"deltaY");for(let r=0,i=u.length;r<i;r++){const i=this.__charBounds[l][r];y=this.getValueOfPropertyAt(l,r,t),b=this.getValueOfPropertyAt(l,r,re),v=this.getValueOfPropertyAt(l,r,qt);const c=this.getHeightOfChar(l,r),u=this.getValueOfPropertyAt(l,r,"deltaY");if(s&&y&&b){const t=this.fontSize*v/1e3;e.save(),e.fillStyle=m,e.translate(i.renderLeft,i.renderTop),e.rotate(i.angle),e.fillRect(-i.kernedWidth/2,a*c+u-o*t,i.kernedWidth,t),e.restore()}else if((y!==p||b!==m||c!==S||v!==x||u!==C)&&g>0){const t=this.fontSize*x/1e3;let r=n+d+f;"rtl"===this.direction&&(r=this.width-r-g),p&&m&&x&&(e.fillStyle=m,e.fillRect(r,w+a*S+C-o*t,g,t)),f=i.left,g=i.width,p=y,x=v,m=b,S=c,C=u}else g+=i.kernedWidth}let _=n+d+f;"rtl"===this.direction&&(_=this.width-_-g),e.fillStyle=b;const k=this.fontSize*v/1e3;y&&b&&v&&e.fillRect(_,w+a*S+C-o*k,g-i,k),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:n=this.fontSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const i=e.includes("'")||e.includes('"')||e.includes(",")||Co.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:n,"px"),i].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Gn(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),n=["\n"];let s=[];for(let i=0;i<t.length;i++)r[i]=this.graphemeSplit(t[i]),s=s.concat(r[i],n);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u(u({},super.toObject([...Jt,...e])),{},{styles:Jn(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let n=!1,s=!1;if("object"==typeof e)for(const i in e)"path"===i&&this.setPathInfo(),n=n||r.includes(i),s=s||"path"===i;else n=r.includes(e),s="path"===e;return s&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const n=Os(e,Co.ATTRIBUTE_NAMES,r),s=u(u({},t),n),{textAnchor:i=L,textDecoration:o="",dx:a=0,dy:l=0,top:c=0,left:d=0,fontSize:f=M,strokeWidth:g=1}=s,p=h(s,wo),m=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),u({left:d+a,top:c+l,underline:o.includes("underline"),overline:o.includes("overline"),linethrough:o.includes("line-through"),strokeWidth:0,fontSize:f},p)),x=m.getScaledHeight()/m.height,y=((m.height+m.strokeWidth)*m.lineHeight-m.height)*x,b=m.getScaledHeight()+y;let v=0;return i===F&&(v=m.getScaledWidth()/2),i===z&&(v=m.getScaledWidth()),m.set({left:m.left-v,top:m.top-(b-m.fontSize*(.07+m._fontSizeFraction))/m.lineHeight,strokeWidth:g}),m}static fromObject(e){return this._fromObject(u(u({},e),{},{styles:Zn(e.styles||{},e.text)}),{extraParam:"text"})}}l(Co,"textLayoutProperties",Qt),l(Co,"cacheProperties",[...Pr,...Jt]),l(Co,"ownDefaults",er),l(Co,"type","Text"),l(Co,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),l(Co,"ATTRIBUTE_NAMES",es.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Ln(Co,[class extends Yt{_toSVG(){const e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(e){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0}),r=this.path;return r?t+r._createBaseSVGMarkup(r._toSVG(),{reviver:e,withShadow:!0,additionalTransform:Ke(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(e){let{textBgRects:t,textSpans:r}=e;const n=this.getSvgTextDecoration(this);return[t.join(""),'\t\t<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(bo,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"","rtl"===this.direction?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",r.join(""),"</text>\n"]}_getSVGTextAndBg(e,t){const r=[],n=[];let s,i=e;this.backgroundColor&&n.push(...vo(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),"rtl"===this.direction&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(n,o,t+s,i),this._setSVGTextLineText(r,o,t+s,i),i+=this.getHeightOfLine(o);return{textSpans:r,textBgRects:n}}_createTextCharSpan(e,t,r,n,s){const i=g.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(t,e!==e.trim()||!!e.match(yo)),a=o?'style="'.concat(o,'"'):"",l=t.deltaY,c=l?' dy="'.concat($e(l,i),'" '):"",{angle:u,renderLeft:h,renderTop:d,width:f}=s;let p="";if(void 0!==h){const e=f/2;u&&(p=' rotate="'.concat($e(Ne(u),i),'"'));const t=Ie({angle:Ne(u)});t[4]=h,t[5]=d;const s=new fe(-e,0).transform(t);r=s.x,n=s.y}return'<tspan x="'.concat($e(r,i),'" y="').concat($e(n,i),'" ').concat(c).concat(p).concat(a,">").concat(Xn(e),"</tspan>")}_setSVGTextLineText(e,t,r,n){const s=this.getHeightOfLine(t),i=this.textAlign.includes(tr),o=this._textLines[t];let a,l,c,u,h,d="",f=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,p=o.length-1;g<=p;g++)h=g===p||this.charSpacing||this.path,d+=o[g],c=this.__charBounds[t][g],0===f?(r+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,i&&!h&&this._reSpaceAndTab.test(o[g])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(t,g),l=this.getCompleteStyleDeclaration(t,g+1),h=Qn(a,l,!0)),h&&(u=this._getStyleDeclaration(t,g),e.push(this._createTextCharSpan(d,u,r,n,c)),d="",a=l,"rtl"===this.direction?r-=f:r+=f,f=0)}_setSVGTextLineBg(e,t,r,n){const s=this._textLines[t],i=this.getHeightOfLine(t)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:s,width:h,kernedWidth:d}=this.__charBounds[t][u];o=this.getValueOfPropertyAt(t,u,"textBackgroundColor"),o!==c?(c&&e.push(...vo(c,r+l,n,a,i)),l=s,a=h,c=o):a+=d}o&&e.push(...vo(c,r+l,n,a,i))}_getSVGLineTopOffset(e){let t,r=0;for(t=0;t<e;t++)r+=this.getHeightOfLine(t);const n=this.getHeightOfLine(t);return{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(e){return"".concat(super.getSvgStyles(e)," text-decoration-thickness: ").concat($e(this.textDecorationThickness*this.getObjectScaling().y/10,g.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(e,t){const{fontFamily:r,strokeWidth:n,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:u,linethrough:h,overline:d,underline:f}=e,p=this.getSvgTextDecoration({underline:null!=f?f:this.underline,overline:null!=d?d:this.overline,linethrough:null!=h?h:this.linethrough}),m=u||this.textDecorationThickness;return[s?Xt(ne,s):"",n?"stroke-width: ".concat(n,"; "):"",r?"font-family: ".concat(r.includes("'")||r.includes('"')?r:"'".concat(r,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",p?"text-decoration: ".concat(p,"; text-decoration-thickness: ").concat($e(m*this.getObjectScaling().y/10,g.NUM_FRACTION_DIGITS),"%; "):"",i?Xt(re,i):"",c?"baseline-shift: ".concat(-c,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(e){return["overline","underline","line-through"].filter(t=>e[t.replace("-","")]).join(" ")}}]),ae.setClass(Co),ae.setSVGClass(Co);class _o{constructor(e){l(this,"target",void 0),l(this,"__mouseDownInPlace",!1),l(this,"__dragStartFired",!1),l(this,"__isDraggingOver",!1),l(this,"__dragStartSelection",void 0),l(this,"__dragImageDisposer",void 0),l(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(e=>e()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:n,selectionEnd:s}=t;const i=this.target,o=i.canvas,a=new fe(i.flipX?-1:1,i.flipY?-1:1),l=i._getCursorBoundaries(n),c=new fe(l.left+l.leftOffset,l.top+l.topOffset).multiply(a).transform(i.calcTransformMatrix()),u=o.getScenePoint(e).subtract(c),h=i.getCanvasRetinaScaling(),d=i.getBoundingRect(),f=c.subtract(new fe(d.left,d.top)),g=o.viewportTransform,p=f.add(u).transform(g,!0),m=i.backgroundColor,x=Hn(i.styles);i.backgroundColor="";const y={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};i.setSelectionStyles(y,0,n),i.setSelectionStyles(y,s,i.text.length),i.dirty=!0;const b=i.toCanvasElement({enableRetinaScaling:o.enableRetinaScaling,viewportTransform:!0});i.backgroundColor=m,i.styles=x,i.dirty=!0,Si(b,{position:"fixed",left:"".concat(-b.width,"px"),border:B,width:"".concat(b.width/h,"px"),height:"".concat(b.height/h,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{b.remove()},rt(e.target||this.target.hiddenTextarea).body.appendChild(b),null===(r=e.dataTransfer)||void 0===r||r.setDragImage(b,p.x,p.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const r=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},n=t._text.slice(r.selectionStart,r.selectionEnd).join(""),s=u({text:t.text,value:n},r);e.dataTransfer.setData("text/plain",n),e.dataTransfer.setData("application/fabric",JSON.stringify({value:n,styles:t.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,s)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,n=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=null===(t=r.dataTransfer)||void 0===t?void 0:t.getData("text/plain");if(s&&!n){const t=this.target,n=t.canvas;let i=t.getSelectionStartFromPointer(r);const{styles:o}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},a=s[Math.max(0,s.length-1)],l=0;if(this.__dragStartSelection){const e=this.__dragStartSelection.selectionStart,r=this.__dragStartSelection.selectionEnd;i>e&&i<=r?i=e:i>r&&(i-=r-e),t.removeChars(e,r),delete this.__dragStartSelection}t._reNewline.test(a)&&(t._reNewline.test(t._text[i])||i===t._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=t,t.insertChars(s,o,i),n.setActiveObject(t),t.enterEditing(r),t.selectionStart=Math.min(i+l,t._text.length),t.selectionEnd=Math.min(t.selectionStart+s.length,t._text.length),t.hiddenTextarea.value=t.text,t._updateTextarea(),t.hiddenTextarea.focus(),t.fire(K,{index:i+l,action:"drop"}),n.fire("text:changed",{target:t}),n.contextTopDirty=!0,n.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const e=this.target,n=this.target.canvas,{selectionStart:s,selectionEnd:i}=this.__dragStartSelection,o=(null===(r=t.dataTransfer)||void 0===r?void 0:r.dropEffect)||B;o===B?(e.selectionStart=s,e.selectionEnd=i,e._updateTextarea(),e.hiddenTextarea.focus()):(e.clearContextTop(),"move"===o&&(e.removeChars(s,i),e.selectionStart=e.selectionEnd=s,e.hiddenTextarea&&(e.hiddenTextarea.value=e.text),e._updateTextarea(),e.fire(K,{index:s,action:"dragend"}),n.fire("text:changed",{target:e}),n.requestRenderAll()),e.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const ko=/[ \n\.,;!\?\-]/;class jo extends Co{constructor(){super(...arguments),l(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:n,onComplete:s}=e;return Kr({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:n,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:e=>{this._currentCursorOpacity=e,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;null===(e=this._currentTickCompleteState)||void 0===e||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let n=e>0&&this._reSpace.test(r[e])&&(-1===t||!V.test(r[e-1]))?e-1:e,s=r[n];for(;n>0&&n<r.length&&!ko.test(s);)n+=t,s=r[n];return-1===t&&ko.test(s)&&n++,n}selectWord(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),n=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e:e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;rt(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&n!==s||n!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const n=r.slice(0,e),s=this.graphemeSplit(n).length;if(e===t)return{selectionStart:s,selectionEnd:s};const i=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(i).length}}fromGraphemeToStringSelection(e,t,r){const n=r.slice(0,e).join("").length;return e===t?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),n=r.lineIndex,s=r.charIndex,i=this.getValueOfPropertyAt(n,s,"fontSize")*this.lineHeight,o=t.leftOffset,a=this.getCanvasRetinaScaling(),l=this.canvas.upperCanvasEl,c=l.width/a,u=l.height/a,h=c-i,d=u-i,f=new fe(t.left+o,t.top+t.topOffset+i).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new fe(l.clientWidth/c,l.clientHeight/u));return f.x<0&&(f.x=0),f.x>h&&(f.x=h),f.y<0&&(f.y=0),f.y>d&&(f.y=d),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:"".concat(f.x,"px"),top:"".concat(f.y,"px"),fontSize:"".concat(i,"px"),charHeight:i}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(se),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:i}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let e=n;e<this._unwrappedTextLines[r].length;e++)delete this.styles[r][e];if(this.styles[s])for(let e=i;e<this._unwrappedTextLines[s].length;e++){const t=this.styles[s][e];t&&(this.styles[r]||(this.styles[r]={}),this.styles[r][n+e-i]=t)}for(let e=r+1;e<=s;e++)delete this.styles[e];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const e=this.styles[r],t=i-n;for(let r=n;r<i;r++)delete e[r];for(const n in this.styles[r]){const r=parseInt(n,10);r>=i&&(e[r-t]=e[n],delete e[n])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const n in this.styles){const s=parseInt(n,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,n){const s={},i=this._unwrappedTextLines[e].length,o=i===t;let a=!1;r||(r=1),this.shiftLineStyles(e,r);const l=this.styles[e]?this.styles[e][0===t?t:t-1]:void 0;for(const u in this.styles[e]){const r=parseInt(u,10);r>=t&&(a=!0,s[r-t]=this.styles[e][u],o&&0===t||delete this.styles[e][u])}let c=!1;for(a&&!o&&(this.styles[e+r]=s,c=!0),(c||i>t)&&r--;r>0;)n&&n[r-1]?this.styles[e+r]={0:u({},n[r-1])}:l?this.styles[e+r]={0:u({},l)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,n){this.styles||(this.styles={});const s=this.styles[e],i=s?u({},s):{};r||(r=1);for(const a in i){const e=parseInt(a,10);e>=t&&(s[e+r]=i[e],i[e-r]||delete s[e])}if(this._forceClearCache=!0,n){for(;r--;)Object.keys(n[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=u({},n[r]));return}if(!s)return;const o=s[t?t-1:1];for(;o&&r--;)this.styles[e][t+r]=u({},o)}insertNewStyleBlock(e,t,r){const n=this.get2DCursorLocation(t,!0),s=[0];let i,o=0;for(let a=0;a<e.length;a++)"\n"===e[a]?(o++,s[o]=0):s[o]++;for(s[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),o&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+s[0],o),i=1;i<o;i++)s[i]>0?this.insertCharStyleObject(n.lineIndex+i,0,s[i],r):r&&this.styles[n.lineIndex+i]&&r[0]&&(this.styles[n.lineIndex+i][0]=r[0]),r=r&&r.slice(s[i]+1);s[i]>0&&this.insertCharStyleObject(n.lineIndex+i,0,s[i],r)}removeChars(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;n>r&&this.removeStyleFromTo(r,n);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=L:this._selectionDirection===z&&(this._selectionDirection=L,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===z?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=z:this._selectionDirection===L&&(this._selectionDirection=z,this.selectionStart=t),this.selectionEnd=r)}}class To extends jo{initHiddenTextarea(){const e=this.canvas&&rt(this.canvas.getElement())||C(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(e=>{let[r,n]=e;return t.setAttribute(r,n)});const{top:r,left:n,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(e=>{let[r,n]=e;return t.addEventListener(r,this[n].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:n,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const i=()=>{this.updateFromTextArea(),this.fire(K),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(""===this.hiddenTextarea.value)return this.styles={},void i();const o=this._splitTextIntoLines(r).graphemeText,a=this._text.length,l=o.length,c=this.selectionStart,u=this.selectionEnd,h=c!==u;let d,f,p,m,x=l-a;const y=this.fromStringToGraphemeSelection(n,s,r),b=c>y.selectionStart;h?(f=this._text.slice(c,u),x+=u-c):l<a&&(f=b?this._text.slice(u+x,u):this._text.slice(c,c-x));const v=o.slice(y.selectionEnd-x,y.selectionEnd);if(f&&f.length&&(v.length&&(d=this.getSelectionStyles(c,c+1,!1),d=v.map(()=>d[0])),h?(p=c,m=u):b?(p=u-f.length,m=u):(p=u,m=u+f.length),this.removeStyleFromTo(p,m)),v.length){const{copyPasteData:e}=S();t&&v.join("")===e.copiedText&&!g.disableStyleCopyPaste&&(d=e.copiedTextStyle),this.insertNewStyleBlock(v,c,d)}i()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:n}=t;this.compositionStart=r,this.compositionEnd=n,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=S();e.copiedText=this.getSelectedText(),g.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,n=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],n+=r.left+r.width),n}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(r),s=n.lineIndex;if(s===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-r;const i=n.charIndex,o=this._getWidthBeforeCursor(s,i),a=this._getIndexOnLine(s+1,o);return this._textLines[s].slice(i).length+a+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(r),s=n.lineIndex;if(0===s||e.metaKey||33===e.keyCode)return-r;const i=n.charIndex,o=this._getWidthBeforeCursor(s,i),a=this._getIndexOnLine(s-1,o),l=this._textLines[s].slice(0,i),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+a-l.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let n,s,i=this._getLineLeftOffset(e),o=0;for(let a=0,l=r.length;a<l;a++)if(n=this.__charBounds[e][a].width,i+=n,i>t){s=!0;const e=i-n,r=i,l=Math.abs(e-t);o=Math.abs(r-t)<l?a:a-1;break}return s||(o=r.length-1),o}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===z);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),0!==r){const e=this.text.length;this.selectionStart=Er(0,this.selectionStart,e),this.selectionEnd=Er(0,this.selectionEnd,e),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===L?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e}moveCursorLeft(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let n;if(e.altKey)n=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===r?-1:1,!0;n=this["findLineBoundary".concat(r)](this[t])}return void 0!==n&&this[t]!==n&&(this[t]=n,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=L,this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===z&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection=L,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===L&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=z,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=z,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const No=e=>!!e.button;class Oo extends To{constructor(){super(...arguments),l(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new _o(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!No(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const n=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const e=this.canvas._activeObject;if(e&&e!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||No(t)||n||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,n=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,n,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(De(this.calcTransformMatrix())).add(new fe(-this._getLeftOffset(),-this._getTopOffset()));let r=0,n=0,s=0;for(let l=0;l<this._textLines.length&&r<=t.y;l++)r+=this.getHeightOfLine(l),s=l,l>0&&(n+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));let i=Math.abs(this._getLineLeftOffset(s));const o=this._textLines[s].length,a=this.__charBounds[s];for(let l=0;l<o;l++){const e=i+a[l].kernedWidth;if(t.x<=e){Math.abs(t.x-e)<=Math.abs(t.x-i)&&n++;break}i=e,n++}return Math.min(this.flipX?o-n:n,this._text.length)}}const Eo="moveCursorUp",Do="moveCursorDown",Po="moveCursorLeft",Mo="moveCursorRight",Ao="exitEditing",Fo=(e,t)=>{const r=t.getRetinaScaling();e.setTransform(r,0,0,r,0,0);const n=t.viewportTransform;e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},Lo=u({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Ao,27:Ao,33:Eo,34:Do,35:Mo,36:Po,37:Po,38:Eo,39:Mo,40:Do},keysMapRtl:{9:Ao,27:Ao,33:Eo,34:Do,35:Po,36:Mo,37:Mo,38:Eo,39:Po,40:Do},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Io extends Oo{static getDefaults(){return u(u({},super.getDefaults()),Io.ownDefaults)}get type(){const e=super.type;return"itext"===e?"i-text":e}constructor(e,t){super(e,u(u({},Io.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):("canvas"===e&&(this.canvas instanceof Fi&&this.canvas.textEditingManager.remove(this),t instanceof Fi&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart||0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionStart||0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),n=r.length>0;let s,i=e;if(n){s=_e(e.canvas),i=s.getContext("2d"),Fo(i,this.canvas);const t=this.calcTransformMatrix();i.transform(t[0],t[1],t[2],t[3],t[4],t[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(i,t):this.renderCursor(i,t),n)for(const o of r){const t=o.clipPath,r=_e(e.canvas),n=r.getContext("2d");if(Fo(n,this.canvas),!t.absolutePositioned){const e=o.calcTransformMatrix();n.transform(e[0],e[1],e[2],e[3],e[4],e[5])}t.transform(n),t.drawObject(n,!0,{}),this.drawClipPathOnCache(i,t,r)}n&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),n=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:n,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:n,lineIndex:s}=this.get2DCursorLocation(e);for(let l=0;l<s;l++)t+=this.getHeightOfLine(l);const i=this._getLineLeftOffset(s),o=this.__charBounds[s][n];o&&(r=o.left),0!==this.charSpacing&&n===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const a={top:t,left:i+(r>0?r:0)};return"rtl"===this.direction&&(this.textAlign===z||this.textAlign===tr||this.textAlign===nr?a.left*=-1:this.textAlign===L||this.textAlign===rr?a.left=i-(r>0?r:0):this.textAlign!==F&&this.textAlign!==sr||(a.left=i-(r>0?r:0))),a}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),n=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,i=this.getValueOfPropertyAt(n,s,"fontSize"),o=this.getObjectScaling().x*this.canvas.getZoom(),a=this.cursorWidth/o,l=this.getValueOfPropertyAt(n,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-i*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(n,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-a/2,top:c+t.top+l,width:a,height:i}}_renderCursor(e,t,r){const{color:n,opacity:s,left:i,top:o,width:a,height:l}=this.getCursorRenderingData(r,t);e.fillStyle=n,e.globalAlpha=s,e.fillRect(i,o,a,l)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const n=t.selectionStart,s=t.selectionEnd,i=this.textAlign.includes(tr),o=this.get2DCursorLocation(n),a=this.get2DCursorLocation(s),l=o.lineIndex,c=a.lineIndex,u=o.charIndex<0?0:o.charIndex,h=a.charIndex<0?0:a.charIndex;for(let d=l;d<=c;d++){const t=this._getLineLeftOffset(d)||0;let n=this.getHeightOfLine(d),s=0,o=0,a=0;if(d===l&&(o=this.__charBounds[l][u].left),d>=l&&d<c)a=i&&!this.isEndOfWrapping(d)?this.width:this.getLineWidth(d)||5;else if(d===c)if(0===h)a=this.__charBounds[c][h].left;else{const e=this._getWidthOfCharSpacing();a=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-e}s=n,(this.lineHeight<1||d===c&&this.lineHeight>1)&&(n/=this.lineHeight);let f=r.left+t+o,g=n,p=0;const m=a-o;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",g=1,p=n):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(this.textAlign===z||this.textAlign===tr||this.textAlign===nr?f=this.width-f-m:this.textAlign===L||this.textAlign===rr?f=r.left+t-a:this.textAlign!==F&&this.textAlign!==sr||(f=r.left+t-a)),e.fillRect(f,r.top+r.topOffset+p,m,g),r.topOffset+=s}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,re)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}l(Io,"ownDefaults",Lo),l(Io,"type","IText"),ae.setClass(Io),ae.setClass(Io,"i-text");class Ro extends Io{static getDefaults(){return u(u({},super.getDefaults()),Ro.ownDefaults)}constructor(e,t){super(e,u(u({},Ro.ownDefaults),t))}static createControls(){return{controls:An()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(tr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,n=0;const s={};for(let i=0;i<e.graphemeLines.length;i++)"\n"===e.graphemeText[n]&&i>0?(r=0,n++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[n])&&i>0&&(r++,n++),s[i]={line:t,offset:r},n+=e.graphemeLines[i].length,r+=e.graphemeLines[i].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const e=this._styleMap[t];e&&(t=e.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,n=e+1,s=!1;const i=this._styleMap[e],o=this._styleMap[e+1];i&&(e=i.line,r=i.offset),o&&(n=o.line,s=n===e,t=o.offset);const a=void 0===e?this.styles:{line:this.styles[e]};for(const l in a)for(const e in a[l]){const n=parseInt(e,10);if(n>=r&&(!s||n<t))for(const t in a[l][e])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const n=this._styleMap[e];super._setStyleDeclaration(n.line,n.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),n=[];for(let s=0;s<r.wordsData.length;s++)n.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,n}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let n=0;return{wordsData:e.map((e,s)=>{let i=0;const o=t?this.graphemeSplit(e):this.wordSplit(e);return 0===o.length?[{word:[],width:0}]:o.map(e=>{const o=t?[e]:this.graphemeSplit(e),a=this._measureWord(o,s,i);return n=Math.max(a,n),i+=o.length+r.length,{word:o,width:a}})}),largestWordWidth:n}}_measureWord(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=0;for(let i=0,o=e.length;i<o;i++)s+=this._getGraphemeBox(e[i],t,i+n,r,!0).kernedWidth,r=e[i];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:n,wordsData:s}=r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=this._getWidthOfCharSpacing(),a=this.splitByGrapheme,l=[],c=a?"":" ";let u=0,h=[],d=0,f=0,g=!0;t-=i;const p=Math.max(t,n,this.dynamicMinWidth),m=s[e];let x;for(d=0,x=0;x<m.length;x++){const{word:t,width:r}=m[x];d+=t.length,u+=f+r-o,u>p&&!g?(l.push(h),h=[],u=r,g=!0):u+=o,g||a||h.push(c),h=h.concat(t),f=a?0:this._measureWord([c],e,d),d++,g=!1}return x&&l.push(h),n+i>this.dynamicMinWidth&&(this.dynamicMinWidth=n-o+i),l}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),n=new Array(r.length);for(let s=0;s<r.length;s++)n[s]=r[s].join("");return t.lines=n,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const r=this._styleMap[t].line;e.set("".concat(r),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}l(Ro,"type","Textbox"),l(Ro,"textLayoutProperties",[...Io.textLayoutProperties,"width"]),l(Ro,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ae.setClass(Ro);class zo extends Rs{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:n,group:s}=r;if(!n||!this.shouldPerformLayout(e))return;const{width:i,height:o}=gt(Is(r,n)),a=new fe(i,o);if(n.absolutePositioned)return{center:St(n.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:a};{const s=n.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:r=new fe,correction:n=new fe}=this.calcBoundingBox(t,e)||{};return{center:r.add(s),correction:n.subtract(s),size:a}}return{center:r.getRelativeCenterPoint().add(s),size:a}}}}l(zo,"type","clip-path"),ae.setClass(zo);class Bo extends Rs{getInitialSize(e,t){let{target:r}=e,{size:n}=t;return new fe(r.width||n.x,r.height||n.y)}}l(Bo,"type","fixed"),ae.setClass(Bo);class Vo extends Us{subscribeTargets(e){const t=e.target;e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{e.layoutManager.subscribeTargets({target:e,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{!r.some(t=>t.parent===e)&&e.layoutManager.unsubscribeTargets({target:e,targets:[t]})})}}class Wo extends Ys{static getDefaults(){return u(u({},super.getDefaults()),Wo.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,Wo.ownDefaults),this.setOptions(t);const{left:r,top:n,layoutManager:s}=t;this.groupInit(e,{left:r,top:n,layoutManager:null!=s?s:new Vo})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];"selection-order"===this.multiSelectionStacking?this.add(...t):t.forEach(e=>{const t=this._objects.findIndex(t=>t.isInFrontOf(e)),r=-1===t?this.size():t;this.insertAt(r,e)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(p("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(e=>{const{parent:t}=e;t&&r.add(t)}),e===Fs?r.forEach(e=>{e._onAfterObjectsChange(As,t)}):r.forEach(e=>{e._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const n=u(u({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,n);super._renderControls(e,t),e.restore()}}l(Wo,"type","ActiveSelection"),l(Wo,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ae.setClass(Wo),ae.setClass(Wo,"activeSelection");class Uo{constructor(){l(this,"resources",{})}applyFilters(e,t,r,n,s){const i=s.getContext("2d");if(!i)return;i.drawImage(t,0,0,r,n);const o={sourceWidth:r,sourceHeight:n,imageData:i.getImageData(0,0,r,n),originalEl:t,originalImageData:i.getImageData(0,0,r,n),canvasEl:s,ctx:i,filterBackend:this};e.forEach(e=>{e.applyTo(o)});const{imageData:a}=o;return a.width===r&&a.height===n||(s.width=a.width,s.height=a.height),i.putImageData(a,0,0),o}}class Ho{constructor(){let{tileSize:e=g.textureSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),l(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=_e({width:e,height:t}),n=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)}applyFilters(e,t,r,n,s,i){const o=this.gl,a=s.getContext("2d");if(!o||!a)return;let l;i&&(l=this.getCachedTexture(i,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:n,destinationWidth:r,destinationHeight:n,context:o,sourceTexture:this.createTexture(o,r,n,l?void 0:t),targetTexture:this.createTexture(o,r,n),originalTexture:l||this.createTexture(o,r,n,l?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=o.createFramebuffer();return o.bindFramebuffer(o.FRAMEBUFFER,u),e.forEach(e=>{e&&e.applyTo(c)}),function(e){const t=e.targetCanvas,r=t.width,n=t.height,s=e.destinationWidth,i=e.destinationHeight;r===s&&n===i||(t.width=s,t.height=i)}(c),this.copyGLTo2D(o,c),o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(c.sourceTexture),o.deleteTexture(c.targetTexture),o.deleteFramebuffer(u),a.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,n,s){const{NEAREST:i,TEXTURE_2D:o,RGBA:a,UNSIGNED_BYTE:l,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:d,TEXTURE_WRAP_T:f}=e,g=e.createTexture();return e.bindTexture(o,g),e.texParameteri(o,u,s||i),e.texParameteri(o,h,s||i),e.texParameteri(o,d,c),e.texParameteri(o,f,c),n?e.texImage2D(o,0,a,a,l,n):e.texImage2D(o,0,a,t,r,0,a,l,null),g}getCachedTexture(e,t,r){const{textureCache:n}=this;if(n[e])return n[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(n[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,n=t.targetCanvas,s=n.getContext("2d");if(!s)return;s.translate(0,n.height),s.scale(1,-1);const i=r.height-n.height;s.drawImage(r,0,i,n.width,n.height,0,0,n.width,n.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),n=t.destinationWidth,s=t.destinationHeight,i=n*s*4;if(!r)return;const o=new Uint8Array(this.imageBuffer,0,i),a=new Uint8ClampedArray(this.imageBuffer,0,i);e.readPixels(0,0,n,s,e.RGBA,e.UNSIGNED_BYTE,o);const l=new ImageData(a,n,s);r.putImageData(l,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const n=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);n&&(t.renderer=n.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Xo;function Yo(){return!Xo&&(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(Xo=function(){const{WebGLProbe:e}=S();return e.queryWebGL(Se()),g.enableGLFiltering&&e.isSupported(g.textureSize)?new Ho({tileSize:g.textureSize}):new Uo}()),Xo}const Go=["filters","resizeFilter","src","crossOrigin","type"],qo=["cropX","cropY"];class $o extends In{static getDefaults(){return u(u({},super.getDefaults()),$o.ownDefaults)}constructor(e,t){super(),l(this,"_lastScaleX",1),l(this,"_lastScaleY",1),l(this,"_filterScalingX",1),l(this,"_filterScalingY",1),this.filters=[],Object.assign(this,$o.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(we()),this.setElement("string"==typeof e?(this.canvas&&rt(this.canvas.getElement())||C()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),null===(t=e.classList)||void 0===t||t.add($o.CSS_CANVAS),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Yo(!1);t instanceof Ho&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&S().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||0===this.strokeWidth)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];return this.filters.forEach(e=>{e&&t.push(e.toObject())}),u(u({},super.toObject([...qo,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,n=-this.height/2;let s=[],i=[],o="",a="";if(!t)return[];if(this.hasCrop()){const e=we();s.push('<clipPath id="imageCrop_'+e+'">\n','\t<rect x="'+r+'" y="'+n+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),o=' clip-path="url(#imageCrop_'+e+')" '}if(this.imageSmoothing||(a=' image-rendering="optimizeSpeed"'),e.push("\t<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(n-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(a).concat(o,"></image>\n")),this.stroke||this.strokeDashArray){const e=this.fill;this.fill=null,i=['\t<rect x="'.concat(r,'" y="').concat(n,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),'" />\n')],this.fill=e}return s=this.paintFirst!==re?s.concat(i,e):s.concat(e,i),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return He(e,{crossOrigin:t,signal:r}).then(e=>{void 0!==t&&this.set({crossOrigin:t}),this.setElement(e)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),n=r.x,s=r.y,i=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||n>t&&s>t)return this._element=i,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=s);const o=_e(i),{width:a,height:l}=i;this._element=o,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=s,Yo().applyFilters([e],i,a,l,this._element),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filters||[];if(e=e.filter(e=>e&&!e.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),0===e.length)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){const e=_e({width:r,height:n});this._element=e,this._filteredEl=e}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,n),this._lastScaleX=1,this._lastScaleY=1);Yo().applyFilters(e,this._originalElement,r,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,n=this._filterScalingY,s=this.width,i=this.height,o=Math.max(this.cropX,0),a=Math.max(this.cropY,0),l=t.naturalWidth||t.width,c=t.naturalHeight||t.height,u=o*r,h=a*n,d=Math.min(s*r,l-u),f=Math.min(i*n,c-h),g=-s/2,p=-i/2,m=Math.min(s,l/r-o),x=Math.min(i,c/n-a);t&&e.drawImage(t,u,h,d,f,g,p,m,x)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=Ht(this.preserveAspectRatio||""),t=this.width,r=this.height,n={width:t,height:r};let s,i=this._element.width,o=this._element.height,a=1,l=1,c=0,u=0,h=0,d=0;return!e||e.alignX===B&&e.alignY===B?(a=t/i,l=r/o):("meet"===e.meetOrSlice&&(a=l=Gs(this._element,n),s=(t-i*a)/2,"Min"===e.alignX&&(c=-s),"Max"===e.alignX&&(c=s),s=(r-o*l)/2,"Min"===e.alignY&&(u=-s),"Max"===e.alignY&&(u=s)),"slice"===e.meetOrSlice&&(a=l=qs(this._element,n),s=i-t/a,"Mid"===e.alignX&&(h=s/2),"Max"===e.alignX&&(h=s),s=o-r/l,"Mid"===e.alignY&&(d=s/2),"Max"===e.alignY&&(d=s),i=t/a,o=r/l)),{width:i,height:o,scaleX:a,scaleY:l,offsetLeft:c,offsetTop:u,cropX:h,cropY:d}}static fromObject(e,t){let{filters:r,resizeFilter:n,src:s,crossOrigin:i,type:o}=e,a=h(e,Go);return Promise.all([He(s,u(u({},t),{},{crossOrigin:i})),r&&Xe(r,t),n&&Xe([n],t),Ye(a,t)]).then(e=>{let[t,r=[],[n]=[],i={}]=e;return new this(t,u(u({},a),{},{src:s,filters:r,resizeFilter:n},i))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return He(e,{crossOrigin:t,signal:r}).then(e=>new this(e,n))}static async fromElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n=Os(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(n["xlink:href"]||n.href,t,n).catch(e=>(p("log","Unable to parse Image",e),null))}}l($o,"type","Image"),l($o,"cacheProperties",[...Pr,...qo]),l($o,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),l($o,"CSS_CANVAS","canvas-img"),l($o,"ATTRIBUTE_NAMES",[...es,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ae.setClass($o),ae.setSVGClass($o);Gt(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ko=q,Qo=e=>function(t,r,n){const{points:s,pathOffset:i}=n;return new fe(s[e]).subtract(i).transform(Pe(n.getViewportTransform(),n.calcTransformMatrix()))},Jo=(e,t,r,n)=>{const{target:s,pointIndex:i}=t,o=s,a=St(new fe(r,n),void 0,o.calcOwnMatrix());return o.points[i]=a.add(o.pathOffset),o.setDimensions(),o.set("dirty",!0),!0},Zo=(e,t)=>function(r,n,s,i){const o=n.target,a=new fe(o.points[(e>0?e:o.points.length)-1]),l=a.subtract(o.pathOffset).transform(o.calcOwnMatrix()),c=t(r,u(u({},n),{},{pointIndex:e}),s,i),h=a.subtract(o.pathOffset).transform(o.calcOwnMatrix()).subtract(l);return o.left-=h.x,o.top-=h.y,c},ea=e=>nn(Ko,Zo(e,Jo)),ta=(e,t,r)=>{const{path:n,pathOffset:s}=e,i=n[t];return new fe(i[r]-s.x,i[r+1]-s.y).transform(Pe(e.getViewportTransform(),e.calcTransformMatrix()))};function ra(e,t,r){const{commandIndex:n,pointIndex:s}=this;return ta(r,n,s)}function na(e,t,r,n){const{target:s}=t,{commandIndex:i,pointIndex:o}=this,a=((e,t,r,n,s)=>{const{path:i,pathOffset:o}=e,a=i[(n>0?n:i.length)-1],l=new fe(a[s],a[s+1]),c=l.subtract(o).transform(e.calcOwnMatrix()),u=St(new fe(t,r),void 0,e.calcOwnMatrix());i[n][s]=u.x+o.x,i[n][s+1]=u.y+o.y,e.setDimensions();const h=l.subtract(e.pathOffset).transform(e.calcOwnMatrix()).subtract(c);return e.left-=h.x,e.top-=h.y,e.set("dirty",!0),!0})(s,r,n,i,o);return kt(this.actionName,u(u({},Pt(e,t,r,n)),{},{commandIndex:i,pointIndex:o})),a}class sa extends cn{constructor(e){super(e)}render(e,t,r,n,s){const i=u(u({},n),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,r,i,s)}}class ia extends sa{constructor(e){super(e)}render(e,t,r,n,s){const{path:i}=s,{commandIndex:o,pointIndex:a,connectToCommandIndex:l,connectToPointIndex:c}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[u]=i[o],h=ta(s,l,c);if("Q"===u){const n=ta(s,o,a+2);e.moveTo(n.x,n.y),e.lineTo(t,r)}else e.moveTo(t,r);e.lineTo(h.x,h.y),e.stroke(),e.restore(),super.render(e,t,r,n,s)}}const oa=(e,t,r,n,s,i)=>new(r?ia:sa)(u(u({commandIndex:e,pointIndex:t,actionName:"modifyPath",positionHandler:ra,actionHandler:na,connectToCommandIndex:s,connectToPointIndex:i},n),r?n.controlPointStyle:n.pointStyle));Object.freeze({__proto__:null,changeWidth:on,createObjectDefaultControls:Pn,createPathControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};let n="M";return e.path.forEach((e,s)=>{const i=e[0];switch("Z"!==i&&(r["c_".concat(s,"_").concat(i)]=oa(s,e.length-2,!1,t)),i){case"C":r["c_".concat(s,"_C_CP_1")]=oa(s,1,!0,t,s-1,(e=>"C"===e?5:"Q"===e?3:1)(n)),r["c_".concat(s,"_C_CP_2")]=oa(s,3,!0,t,s,5);break;case"Q":r["c_".concat(s,"_Q_CP_1")]=oa(s,1,!0,t,s,3)}n=i}),r},createPolyActionHandler:ea,createPolyControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};for(let n=0;n<("number"==typeof e?e:e.points.length);n++)r["p".concat(n)]=new cn(u({actionName:Ko,positionHandler:Qo(n),actionHandler:ea(n)},t));return r},createPolyPositionHandler:Qo,createResizeControls:Mn,createTextboxDefaultControls:An,dragHandler:Ft,factoryPolyActionHandler:Zo,getLocalPoint:At,polyActionHandler:Jo,renderCircleControl:an,renderSquareControl:ln,rotationStyleHandler:un,rotationWithSnapping:hn,scaleCursorStyleHandler:pn,scaleOrSkewActionName:Nn,scaleSkewCursorStyleHandler:On,scalingEqually:xn,scalingX:yn,scalingXOrSkewingY:En,scalingY:bn,scalingYOrSkewingX:Dn,skewCursorStyleHandler:Cn,skewHandlerX:kn,skewHandlerY:jn,wrapWithFireEvent:nn,wrapWithFixedAnchor:sn});const aa=e=>void 0!==e.webgl,la="precision highp float",ca="\n    ".concat(la,";\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n    void main() {\n      gl_FragColor = texture2D(uTexture, vTexCoord);\n    }"),ua=["type"],ha=["type"],da=new RegExp(la,"g");class fa{get type(){return this.constructor.type}constructor(){let e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ua);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return ca}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    void main() {\n      vTexCoord = aPosition;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }"}createProgram(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n="highp"}}=S();"highp"!==n&&(t=t.replace(da,la.replace("highp",n)));const s=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER),o=e.createProgram();if(!s||!i||!o)throw new m("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new m("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new m("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.attachShader(o,s),e.attachShader(o,i),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new m('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(o)));const a=this.getUniformLocations(e,o)||{};return a.uStepW=e.getUniformLocation(o,"uStepW"),a.uStepH=e.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:this.getAttributeLocations(e,o),uniformLocations:a}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,n={};for(let s=0;s<r.length;s++)n[r[s]]=e.getUniformLocation(t,r[s]);return n}sendAttributeData(e,t,r){const n=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,n=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===n||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,n)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){aa(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,n=_e({width:t,height:r});e.helpLayer=n}}toObject(){const e=Object.keys(this.constructor.defaults||{});return u({type:this.type},e.reduce((e,t)=>(e[t]=this[t],e),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(h(e,ha))}}l(fa,"type","BaseFilter"),l(fa,"uniformLocations",[]);const ga={multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",difference:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"\n    if (uColor.r < 0.5) {\n      gl_FragColor.r *= 2.0 * uColor.r;\n    } else {\n      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n    }\n    if (uColor.g < 0.5) {\n      gl_FragColor.g *= 2.0 * uColor.g;\n    } else {\n      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n    }\n    if (uColor.b < 0.5) {\n      gl_FragColor.b *= 2.0 * uColor.b;\n    } else {\n      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n    }\n    ",tint:"\n    gl_FragColor.rgb *= (1.0 - uColor.a);\n    gl_FragColor.rgb += uColor.rgb;\n    "};class pa extends fa{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec4 uColor;\n      varying vec2 vTexCoord;\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        gl_FragColor = color;\n        if (color.a > 0.0) {\n          ".concat(ga[this.mode],"\n        }\n      }\n      ")}applyTo2d(e){let{imageData:{data:t}}=e;const r=new Wt(this.color).getSource(),n=this.alpha,s=r[0]*n,i=r[1]*n,o=r[2]*n,a=1-n;for(let l=0;l<t.length;l+=4){const e=t[l],r=t[l+1],n=t[l+2];let c,u,h;switch(this.mode){case"multiply":c=e*s/255,u=r*i/255,h=n*o/255;break;case"screen":c=255-(255-e)*(255-s)/255,u=255-(255-r)*(255-i)/255,h=255-(255-n)*(255-o)/255;break;case"add":c=e+s,u=r+i,h=n+o;break;case"difference":c=Math.abs(e-s),u=Math.abs(r-i),h=Math.abs(n-o);break;case"subtract":c=e-s,u=r-i,h=n-o;break;case"darken":c=Math.min(e,s),u=Math.min(r,i),h=Math.min(n,o);break;case"lighten":c=Math.max(e,s),u=Math.max(r,i),h=Math.max(n,o);break;case"overlay":c=s<128?2*e*s/255:255-2*(255-e)*(255-s)/255,u=i<128?2*r*i/255:255-2*(255-r)*(255-i)/255,h=o<128?2*n*o/255:255-2*(255-n)*(255-o)/255;break;case"exclusion":c=s+e-2*s*e/255,u=i+r-2*i*r/255,h=o+n-2*o*n/255;break;case"tint":c=s+e*a,u=i+r*a,h=o+n*a}t[l]=c,t[l+1]=u,t[l+2]=h}}sendUniformData(e,t){const r=new Wt(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}l(pa,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),l(pa,"type","BlendColor"),l(pa,"uniformLocations",["uColor"]),ae.setClass(pa);const ma={multiply:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.rgba *= color2.rgba;\n      gl_FragColor = color;\n    }\n    ",mask:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.a = color2.a;\n      gl_FragColor = color;\n    }\n    "},xa=["type","image"];class ya extends fa{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return ma[this.mode]}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    uniform mat3 uTransformMatrix;\n    void main() {\n      vTexCoord = aPosition;\n      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }\n    "}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:n},filterBackend:{resources:s}}=e;const i=this.image;s.blendImage||(s.blendImage=Se());const o=s.blendImage,a=o.getContext("2d");o.width!==r||o.height!==n?(o.width=r,o.height=n):a.clearRect(0,0,r,n),a.setTransform(i.scaleX,0,0,i.scaleY,i.left,i.top),a.drawImage(i.getElement(),0,0,r,n);const l=a.getImageData(0,0,r,n).data;for(let c=0;c<t.length;c+=4){const e=t[c],r=t[c+1],n=t[c+2],s=t[c+3],i=l[c],o=l[c+1],a=l[c+2],u=l[c+3];switch(this.mode){case"multiply":t[c]=e*i/255,t[c+1]=r*o/255,t[c+2]=n*a/255,t[c+3]=s*u/255;break;case"mask":t[c+3]=u}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return u(u({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:n}=e,s=h(e,xa);return $o.fromObject(n,t).then(e=>new this(u(u({},s),{},{image:e})))}}l(ya,"type","BlendImage"),l(ya,"defaults",{mode:"multiply",alpha:1}),l(ya,"uniformLocations",["uTransformMatrix","uImage"]),ae.setClass(ya);class ba extends fa{getFragmentSource(){return"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform vec2 uDelta;\n    varying vec2 vTexCoord;\n    const float nSamples = 15.0;\n    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\n    float random(vec3 scale) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n    }\n    void main() {\n      vec4 color = vec4(0.0);\n      float totalC = 0.0;\n      float totalA = 0.0;\n      float offset = random(v3offset);\n      for (float t = -nSamples; t <= nSamples; t++) {\n        float percent = (t + offset - 0.5) / nSamples;\n        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);\n        float weight = 1.0 - abs(percent);\n        float alpha = weight * sample.a;\n        color.rgb += sample.rgb * alpha;\n        color.a += alpha;\n        totalA += weight;\n        totalC += alpha;\n      }\n      gl_FragColor.rgb = color.rgb / totalC;\n      gl_FragColor.a = color.a / totalA;\n    }\n  "}applyTo(e){aa(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:r,height:n}}=e;this.aspectRatio=r/n,this.horizontal=!0;let s=this.getBlurValue()*r;const i=new Uint8ClampedArray(t),o=4*r;for(let a=0;a<t.length;a+=4){let e=0,r=0,n=0,l=0,c=0;const u=a-a%o,h=u+o;for(let i=-14;i<15;i++){const o=i/15,d=4*Math.floor(s*o),f=1-Math.abs(o);let g=a+d;g<u?g=u:g>h&&(g=h);const p=t[g+3]*f;e+=t[g]*p,r+=t[g+1]*p,n+=t[g+2]*p,l+=p,c+=f}i[a]=e/l,i[a+1]=r/l,i[a+2]=n/l,i[a+3]=l/c}this.horizontal=!1,s=this.getBlurValue()*n;for(let a=0;a<i.length;a+=4){let e=0,r=0,n=0,l=0,c=0;const u=a%o,h=i.length-o+u;for(let t=-14;t<15;t++){const d=t/15,f=Math.floor(s*d)*o,g=1-Math.abs(d);let p=a+f;p<u?p=u:p>h&&(p=h);const m=i[p+3]*g;e+=i[p]*m,r+=i[p+1]*m,n+=i[p+2]*m,l+=m,c+=g}t[a]=e/l,t[a+1]=r/l,t[a+2]=n/l,t[a+3]=l/c}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return 0===this.blur}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:r}=this;return t?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}l(ba,"type","Blur"),l(ba,"defaults",{blur:0}),l(ba,"uniformLocations",["uDelta"]),ae.setClass(ba);class va extends fa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBrightness;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += uBrightness;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let n=0;n<t.length;n+=4)t[n]+=r,t[n+1]+=r,t[n+2]+=r}isNeutralState(){return 0===this.brightness}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}l(va,"type","Brightness"),l(va,"defaults",{brightness:0}),l(va,"uniformLocations",["uBrightness"]),ae.setClass(va);const wa={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Sa extends fa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  varying vec2 vTexCoord;\n  uniform mat4 uColorMatrix;\n  uniform vec4 uConstants;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color *= uColorMatrix;\n    color += uConstants;\n    gl_FragColor = color;\n  }"}applyTo2d(e){const t=e.imageData.data,r=this.matrix,n=this.colorsOnly;for(let s=0;s<t.length;s+=4){const e=t[s],i=t[s+1],o=t[s+2];if(t[s]=e*r[0]+i*r[1]+o*r[2]+255*r[4],t[s+1]=e*r[5]+i*r[6]+o*r[7]+255*r[9],t[s+2]=e*r[10]+i*r[11]+o*r[12]+255*r[14],!n){const n=t[s+3];t[s]+=n*r[3],t[s+1]+=n*r[8],t[s+2]+=n*r[13],t[s+3]=e*r[15]+i*r[16]+o*r[17]+n*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,n=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,s)}toObject(){return u(u({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ca(e,t){var r;const n=(l(r=class extends Sa{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",e),l(r,"defaults",{colorsOnly:!1,matrix:t}),r);return ae.setClass(n,e),n}l(Sa,"type","ColorMatrix"),l(Sa,"defaults",wa),l(Sa,"uniformLocations",["uColorMatrix","uConstants"]),ae.setClass(Sa);const _a=Ca("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),ka=Ca("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),ja=Ca("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),Ta=Ca("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),Na=Ca("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),Oa=Ca("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),Ea=Ca("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Da extends fa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){aa(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(e=>ae.getClass(e.type).fromObject(e,t))).then(e=>new this({subFilters:e}))}}l(Da,"type","Composed"),ae.setClass(Da);class Pa extends fa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uContrast;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\n    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\n    gl_FragColor = color;\n  }"}isNeutralState(){return 0===this.contrast}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),n=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=n*(t[s]-128)+128,t[s+1]=n*(t[s+1]-128)+128,t[s+2]=n*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}l(Pa,"type","Contrast"),l(Pa,"defaults",{contrast:0}),l(Pa,"uniformLocations",["uContrast"]),ae.setClass(Pa);const Ma={Convolute_3_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_3_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_5_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_5_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_7_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_7_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_9_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_9_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    "};class Aa extends fa{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return Ma[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,n=this.matrix,s=Math.round(Math.sqrt(n.length)),i=Math.floor(s/2),o=t.width,a=t.height,l=e.ctx.createImageData(o,a),c=l.data,u=this.opaque?1:0;let h,d,f,g,p,m,x,y,b,v,w,S,C;for(w=0;w<a;w++)for(v=0;v<o;v++){for(p=4*(w*o+v),h=0,d=0,f=0,g=0,C=0;C<s;C++)for(S=0;S<s;S++)x=w+C-i,m=v+S-i,x<0||x>=a||m<0||m>=o||(y=4*(x*o+m),b=n[C*s+S],h+=r[y]*b,d+=r[y+1]*b,f+=r[y+2]*b,u||(g+=r[y+3]*b));c[p]=h,c[p+1]=d,c[p+2]=f,c[p+3]=u?r[p+3]:g}e.imageData=l}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return u(u({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}l(Aa,"type","Convolute"),l(Aa,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),l(Aa,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ae.setClass(Aa);const Fa="Gamma";class La extends fa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform vec3 uGamma;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    vec3 correction = (1.0 / uGamma);\n    color.r = pow(color.r, correction.r);\n    color.g = pow(color.g, correction.g);\n    color.b = pow(color.b, correction.b);\n    gl_FragColor = color;\n    gl_FragColor.rgb *= color.a;\n  }\n"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,n=1/r[0],s=1/r[1],i=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const o=this.rgbValues;for(let a=0;a<256;a++)o.r[a]=255*Math.pow(a/255,n),o.g[a]=255*Math.pow(a/255,s),o.b[a]=255*Math.pow(a/255,i);for(let a=0;a<t.length;a+=4)t[a]=o.r[t[a]],t[a+1]=o.g[t[a+1]],t[a+2]=o.b[t[a+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return 1===e[0]&&1===e[1]&&1===e[2]}toObject(){return{type:Fa,gamma:this.gamma.concat()}}}l(La,"type",Fa),l(La,"defaults",{gamma:[1,1,1]}),l(La,"uniformLocations",["uGamma"]),ae.setClass(La);const Ia={average:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      float average = (color.r + color.b + color.g) / 3.0;\n      gl_FragColor = vec4(average, average, average, color.a);\n    }\n    ",lightness:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    ",luminosity:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    "};class Ra extends fa{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,n=0;n<t.length;n+=4){const e=t[n],s=t[n+1],i=t[n+2];switch(this.mode){case"average":r=(e+s+i)/3;break;case"lightness":r=(Math.min(e,s,i)+Math.max(e,s,i))/2;break;case"luminosity":r=.21*e+.72*s+.07*i}t[n+2]=t[n+1]=t[n]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Ia[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}l(Ra,"type","Grayscale"),l(Ra,"defaults",{mode:"average"}),l(Ra,"uniformLocations",["uMode"]),ae.setClass(Ra);const za=u(u({},wa),{},{rotation:0});class Ba extends Sa{calculateMatrix(){const e=this.rotation*Math.PI,t=he(e),r=de(e),n=1/3,s=Math.sqrt(n)*r,i=1-t;this.matrix=[t+i/3,n*i-s,n*i+s,0,0,n*i+s,t+n*i,n*i-s,0,0,n*i-s,n*i+s,t+n*i,0,0,0,0,0,1,0]}isNeutralState(){return 0===this.rotation}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}l(Ba,"type","HueRotation"),l(Ba,"defaults",za),ae.setClass(Ba);class Va extends fa{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform int uInvert;\n  uniform int uAlpha;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    if (uInvert == 1) {\n      if (uAlpha == 1) {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);\n      } else {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n      }\n    } else {\n      gl_FragColor = color;\n    }\n  }\n"}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}l(Va,"type","Invert"),l(Va,"defaults",{alpha:!1,invert:!0}),l(Va,"uniformLocations",["uInvert","uAlpha"]),ae.setClass(Va);class Wa extends fa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uStepH;\n  uniform float uNoise;\n  uniform float uSeed;\n  varying vec2 vTexCoord;\n  float rand(vec2 co, float seed, float vScale) {\n    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n  }\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let n=0;n<t.length;n+=4){const e=(.5-Math.random())*r;t[n]+=e,t[n+1]+=e,t[n+2]+=e}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return 0===this.noise}}l(Wa,"type","Noise"),l(Wa,"defaults",{noise:0}),l(Wa,"uniformLocations",["uNoise","uSeed"]),ae.setClass(Wa);class Ua extends fa{applyTo2d(e){let{imageData:{data:t,width:r,height:n}}=e;for(let s=0;s<n;s+=this.blocksize)for(let e=0;e<r;e+=this.blocksize){const i=4*s*r+4*e,o=t[i],a=t[i+1],l=t[i+2],c=t[i+3];for(let u=s;u<Math.min(s+this.blocksize,n);u++)for(let n=e;n<Math.min(e+this.blocksize,r);n++){const e=4*u*r+4*n;t[e]=o,t[e+1]=a,t[e+2]=l,t[e+3]=c}}}isNeutralState(){return 1===this.blocksize}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBlocksize;\n  uniform float uStepW;\n  uniform float uStepH;\n  varying vec2 vTexCoord;\n  void main() {\n    float blockW = uBlocksize * uStepW;\n    float blockH = uBlocksize * uStepH;\n    int posX = int(vTexCoord.x / blockW);\n    int posY = int(vTexCoord.y / blockH);\n    float fposX = float(posX);\n    float fposY = float(posY);\n    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\n    vec4 color = texture2D(uTexture, squareCoords);\n    gl_FragColor = color;\n  }\n"}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}l(Ua,"type","Pixelate"),l(Ua,"defaults",{blocksize:4}),l(Ua,"uniformLocations",["uBlocksize"]),ae.setClass(Ua);class Ha extends fa{getFragmentSource(){return"\nprecision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vTexCoord);\n  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\n    gl_FragColor.a = 0.0;\n  }\n}\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,n=new Wt(this.color).getSource(),s=[n[0]-r,n[1]-r,n[2]-r],i=[n[0]+r,n[1]+r,n[2]+r];for(let o=0;o<t.length;o+=4){const e=t[o],r=t[o+1],n=t[o+2];e>s[0]&&r>s[1]&&n>s[2]&&e<i[0]&&r<i[1]&&n<i[2]&&(t[o+3]=0)}}sendUniformData(e,t){const r=new Wt(this.color).getSource(),n=this.distance,s=[0+r[0]/255-n,0+r[1]/255-n,0+r[2]/255-n,1],i=[r[0]/255+n,r[1]/255+n,r[2]/255+n,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,i)}}l(Ha,"type","RemoveColor"),l(Ha,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),l(Ha,"uniformLocations",["uLow","uHigh"]),ae.setClass(Ha);class Xa extends fa{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),n=new Array(r);for(let s=1;s<=r;s++)n[s-1]=e(s*t);return n}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec2 uDelta;\n      varying vec2 vTexCoord;\n      uniform float uTaps[".concat(e,"];\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        float sum = 1.0;\n        ").concat(t.map((e,t)=>"\n              color += texture2D(uTexture, vTexCoord + ".concat(e,") * uTaps[").concat(t,"] + texture2D(uTexture, vTexCoord - ").concat(e,") * uTaps[").concat(t,"];\n              sum += 2.0 * uTaps[").concat(t,"];\n            ")).join("\n"),"\n        gl_FragColor = color / sum;\n      }\n    ")}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){aa(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return 1===this.scaleX&&1===this.scaleY}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,n=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/n;const s=t.width,i=t.height,o=Math.round(s*r),a=Math.round(i*n);let l;l="sliceHack"===this.resizeType?this.sliceByTwo(e,s,i,o,a):"hermite"===this.resizeType?this.hermiteFastResize(e,s,i,o,a):"bilinear"===this.resizeType?this.bilinearFiltering(e,s,i,o,a):"lanczos"===this.resizeType?this.lanczosResize(e,s,i,o,a):new ImageData(o,a),e.imageData=l}sliceByTwo(e,t,r,n,s){const i=e.imageData,o=.5;let a=!1,l=!1,c=t*o,u=r*o;const h=e.filterBackend.resources;let d=0,f=0;const g=t;let p=0;h.sliceByTwo||(h.sliceByTwo=Se());const m=h.sliceByTwo;(m.width<1.5*t||m.height<r)&&(m.width=1.5*t,m.height=r);const x=m.getContext("2d");for(x.clearRect(0,0,1.5*t,r),x.putImageData(i,0,0),n=Math.floor(n),s=Math.floor(s);!a||!l;)t=c,r=u,n<Math.floor(c*o)?c=Math.floor(c*o):(c=n,a=!0),s<Math.floor(u*o)?u=Math.floor(u*o):(u=s,l=!0),x.drawImage(m,d,f,t,r,g,p,c,u),d=g,f=p,p+=u;return x.getImageData(d,f,n,s)}lanczosResize(e,t,r,n,s){const i=e.imageData.data,o=e.ctx.createImageData(n,s),a=o.data,l=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,u=this.rcpScaleY,h=2/this.rcpScaleX,d=2/this.rcpScaleY,f=Math.ceil(c*this.lanczosLobes/2),g=Math.ceil(u*this.lanczosLobes/2),p={},m={x:0,y:0},x={x:0,y:0};return function e(y){let b,v,w,S,C,_,k,j,T,N,O;for(m.x=(y+.5)*c,x.x=Math.floor(m.x),b=0;b<s;b++){for(m.y=(b+.5)*u,x.y=Math.floor(m.y),C=0,_=0,k=0,j=0,T=0,v=x.x-f;v<=x.x+f;v++)if(!(v<0||v>=t)){N=Math.floor(1e3*Math.abs(v-m.x)),p[N]||(p[N]={});for(let e=x.y-g;e<=x.y+g;e++)e<0||e>=r||(O=Math.floor(1e3*Math.abs(e-m.y)),p[N][O]||(p[N][O]=l(Math.sqrt(Math.pow(N*h,2)+Math.pow(O*d,2))/1e3)),w=p[N][O],w>0&&(S=4*(e*t+v),C+=w,_+=w*i[S],k+=w*i[S+1],j+=w*i[S+2],T+=w*i[S+3]))}S=4*(b*n+y),a[S]=_/C,a[S+1]=k/C,a[S+2]=j/C,a[S+3]=T/C}return++y<n?e(y):o}(0)}bilinearFiltering(e,t,r,n,s){let i,o,a,l,c,u,h,d,f,g,p,m,x,y=0;const b=this.rcpScaleX,v=this.rcpScaleY,w=4*(t-1),S=e.imageData.data,C=e.ctx.createImageData(n,s),_=C.data;for(h=0;h<s;h++)for(d=0;d<n;d++)for(c=Math.floor(b*d),u=Math.floor(v*h),f=b*d-c,g=v*h-u,x=4*(u*t+c),p=0;p<4;p++)i=S[x+p],o=S[x+4+p],a=S[x+w+p],l=S[x+w+4+p],m=i*(1-f)*(1-g)+o*f*(1-g)+a*g*(1-f)+l*f*g,_[y++]=m;return C}hermiteFastResize(e,t,r,n,s){const i=this.rcpScaleX,o=this.rcpScaleY,a=Math.ceil(i/2),l=Math.ceil(o/2),c=e.imageData.data,u=e.ctx.createImageData(n,s),h=u.data;for(let d=0;d<s;d++)for(let e=0;e<n;e++){const r=4*(e+d*n);let s=0,u=0,f=0,g=0,p=0,m=0,x=0;const y=(d+.5)*o;for(let n=Math.floor(d*o);n<(d+1)*o;n++){const r=Math.abs(y-(n+.5))/l,o=(e+.5)*i,h=r*r;for(let l=Math.floor(e*i);l<(e+1)*i;l++){let e=Math.abs(o-(l+.5))/a;const r=Math.sqrt(h+e*e);r>1&&r<-1||(s=2*r*r*r-3*r*r+1,s>0&&(e=4*(l+n*t),x+=s*c[e+3],f+=s,c[e+3]<255&&(s=s*c[e+3]/250),g+=s*c[e],p+=s*c[e+1],m+=s*c[e+2],u+=s))}}h[r]=g/u,h[r+1]=p/u,h[r+2]=m/u,h[r+3]=x/f}return u}}l(Xa,"type","Resize"),l(Xa,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),l(Xa,"uniformLocations",["uDelta","uTaps"]),ae.setClass(Xa);class Ya extends fa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uSaturation;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float rgMax = max(color.r, color.g);\n    float rgbMax = max(rgMax, color.b);\n    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\n    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\n    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let n=0;n<t.length;n+=4){const e=t[n],s=t[n+1],i=t[n+2],o=Math.max(e,s,i);t[n]+=o!==e?(o-e)*r:0,t[n+1]+=o!==s?(o-s)*r:0,t[n+2]+=o!==i?(o-i)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return 0===this.saturation}}l(Ya,"type","Saturation"),l(Ya,"defaults",{saturation:0}),l(Ya,"uniformLocations",["uSaturation"]),ae.setClass(Ya);class Ga extends fa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uVibrance;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float max = max(color.r, max(color.g, color.b));\n    float avg = (color.r + color.g + color.b) / 3.0;\n    float amt = (abs(max - avg) * 2.0) * uVibrance;\n    color.r += max != color.r ? (max - color.r) * amt : 0.00;\n    color.g += max != color.g ? (max - color.g) * amt : 0.00;\n    color.b += max != color.b ? (max - color.b) * amt : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let n=0;n<t.length;n+=4){const e=t[n],s=t[n+1],i=t[n+2],o=Math.max(e,s,i),a=(e+s+i)/3,l=2*Math.abs(o-a)/255*r;t[n]+=o!==e?(o-e)*l:0,t[n+1]+=o!==s?(o-s)*l:0,t[n+2]+=o!==i?(o-i)*l:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return 0===this.vibrance}}l(Ga,"type","Vibrance"),l(Ga,"defaults",{vibrance:0}),l(Ga,"uniformLocations",["uVibrance"]),ae.setClass(Ga);Object.freeze({__proto__:null,BaseFilter:fa,BlackWhite:Ea,BlendColor:pa,BlendImage:ya,Blur:ba,Brightness:va,Brownie:_a,ColorMatrix:Sa,Composed:Da,Contrast:Pa,Convolute:Aa,Gamma:La,Grayscale:Ra,HueRotation:Ba,Invert:Va,Kodachrome:ja,Noise:Wa,Pixelate:Ua,Polaroid:Na,RemoveColor:Ha,Resize:Xa,Saturation:Ya,Sepia:Oa,Technicolor:Ta,Vibrance:Ga,Vintage:ka});const qa=e=>{let{onLogout:t,onPageChange:r}=e;const s=(0,n.useRef)(null),o=(0,n.useRef)(null),[a,l]=(0,n.useState)("editor"),[c,u]=(0,n.useState)(!1),[h,d]=(0,n.useState)(!1),[f,g]=(0,n.useState)(""),[p,m]=(0,n.useState)("Portrait"),[x,y]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),[C,_]=(0,n.useState)("basic");(0,n.useEffect)(()=>{if(s.current){o.current=new Fi(s.current,{width:300,height:200,backgroundColor:"#ffffff",selection:!0,preserveObjectStacking:!0});const e=20,t="#e0e0e0";for(let r=0;r<=o.current.width;r+=e){const e=new lo([r,0,r,o.current.height],{stroke:t,selectable:!1,evented:!1});o.current.add(e)}for(let r=0;r<=o.current.height;r+=e){const e=new lo([0,r,o.current.width,r],{stroke:t,selectable:!1,evented:!1});o.current.add(e)}o.current.renderAll()}const e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"c":e.preventDefault(),k();break;case"x":e.preventDefault(),j();break;case"v":e.preventDefault(),T();break;case"s":e.preventDefault(),O();break;case"p":e.preventDefault(),E()}else"Delete"!==e.key&&"Backspace"!==e.key||(e.preventDefault(),N())};return document.addEventListener("keydown",e),()=>{o.current&&o.current.dispose(),document.removeEventListener("keydown",e)}},[]),(0,n.useEffect)(()=>{const e=e=>{c&&!e.target.closest(".dropdown-container")&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c]);const k=()=>{o.current&&o.current.getActiveObject().clone(e=>{o.current.clipboard=e})},j=()=>{o.current&&o.current.getActiveObject().clone(e=>{o.current.clipboard=e,o.current.remove(o.current.getActiveObject()),o.current.renderAll()})},T=()=>{o.current&&o.current.clipboard&&o.current.clipboard.clone(e=>{o.current.discardActiveObject(),e.set({left:e.left+10,top:e.top+10,evented:!0}),o.current.add(e),o.current.setActiveObject(e),o.current.renderAll()})},N=()=>{o.current&&(o.current.remove(o.current.getActiveObject()),o.current.renderAll())},O=()=>{if(o.current){const e=o.current.toDataURL({format:"png",quality:1}),t=document.createElement("a");t.download="canvas-export.png",t.href=e,t.click()}},E=()=>{if(o.current){const e=o.current.toDataURL({format:"png",quality:1}),t=window.open("","_blank");t.document.write(`\n        <html>\n          <head><title>Print Canvas</title></head>\n          <body>\n            <img src="${e}" style="width: 100%; height: auto;" />\n          </body>\n        </html>\n      `),t.document.close(),t.print()}},D=e=>{if("logout"!==e)if("store"!==e)if("list"!==e){if("new"===e)return u(!c),void l("new");if("editor"===e)return l("editor"),void u(!1);l(e),u(!1)}else r("list");else r("store-tags");else t()};return(0,i.jsxs)("div",{className:"h-screen flex flex-col font-system",children:[(0,i.jsxs)("div",{className:"bg-orange-500 text-black px-6 py-3 flex items-center gap-3",children:[(0,i.jsx)("i",{className:"fas fa-copy text-2xl"}),(0,i.jsx)("h2",{className:"text-2xl font-semibold",children:"Tag Designer: New"})]}),(0,i.jsxs)("div",{className:"flex h-[calc(100vh-84px)]",children:[(0,i.jsxs)("div",{className:"w-[80px] bg-orange-primary flex flex-col justify-between p-0 shadow-lg flex-shrink-0 h-full",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"dropdown-container flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 relative hover:bg-white hover:bg-opacity-10 "+("new"===a?"bg-white bg-opacity-20":""),onClick:e=>{e.stopPropagation(),u(!c),l("new")},children:[(0,i.jsx)("i",{className:"fas fa-file-plus text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"New"}),(0,i.jsx)("i",{className:`fas fa-chevron-${c?"up":"down"} absolute bottom-2 right-2 text-xs opacity-80 transition-transform duration-200 drop-shadow-sm`}),c&&(0,i.jsx)("div",{className:"absolute top-full left-0 bg-white border border-gray-300 rounded shadow-lg z-50 min-w-32 max-w-36",children:["1UP","1UP (LEGAL)","2UP","4UP","4UP(4.25 X 5.1)","8UP","16UP","16UP","Avery 5160","Avery 5163","Two Page","Full Page"].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 text-gray-700 hover:bg-gray-100 cursor-pointer",onClick:t=>{var r;t.stopPropagation(),r=e,console.log("Creating new template:",r),g(r),u(!1),d(!0),m("Portrait"),y(!1),console.log("Template selected:",r,"Orientation set to Portrait")},children:[(0,i.jsx)("i",{className:"fas fa-file-medical text-black text-lg"}),(0,i.jsx)("span",{className:"text-xs font-medium",children:e})]},t))})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10 "+("list"===a?"bg-white bg-opacity-20":""),onClick:()=>D("list"),children:[(0,i.jsx)("i",{className:"fas fa-list text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"List"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10 "+("store"===a?"bg-white bg-opacity-20":""),onClick:()=>D("store"),children:[(0,i.jsx)("i",{className:"fas fa-tags text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"Store Tags"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10 "+("editor"===a?"bg-white bg-opacity-20":""),onClick:()=>D("editor"),children:[(0,i.jsx)("i",{className:"fas fa-pencil-alt text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"Editor"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col mt-auto",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10",children:[(0,i.jsx)("i",{className:"fas fa-chart-line text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"View Log"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-3 text-white cursor-pointer transition-all duration-200 text-center h-20 gap-1 hover:bg-white hover:bg-opacity-10",onClick:()=>D("logout"),children:[(0,i.jsx)("i",{className:"fas fa-sign-out-alt text-lg mb-1 opacity-90 drop-shadow-sm"}),(0,i.jsx)("span",{className:"text-xs font-medium leading-tight opacity-95 drop-shadow-sm",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"Logout"})]})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex bg-white",children:[(0,i.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,i.jsxs)("div",{className:"h-24 bg-white border-b border-gray-200 flex items-center justify-center px-8 gap-8 py-4",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center cursor-not-allowed",children:(0,i.jsx)("i",{className:"fas fa-copy text-gray-500 text-xs"})}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"copy"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center cursor-not-allowed",children:(0,i.jsx)("i",{className:"fas fa-cut text-gray-500 text-xs"})}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"cut"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center cursor-pointer",children:(0,i.jsx)("i",{className:"fas fa-clipboard text-white text-xs"})}),(0,i.jsx)("span",{className:"text-xs text-black font-medium",children:"paste"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center cursor-not-allowed",children:(0,i.jsx)("i",{className:"fas fa-trash text-gray-500 text-xs"})}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"delete"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center cursor-pointer",children:(0,i.jsx)("span",{className:"text-white text-sm font-bold",children:"A"})}),(0,i.jsx)("span",{className:"text-xs text-black font-medium",children:"Save"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center cursor-pointer",children:(0,i.jsx)("i",{className:"fas fa-file-pdf text-white text-xs"})}),(0,i.jsx)("span",{className:"text-xs text-black font-medium",children:"Print"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center cursor-pointer",children:(0,i.jsx)("i",{className:"fas fa-calculator text-white text-xs"})}),(0,i.jsx)("span",{className:"text-xs text-black font-medium",children:"Calculations"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center cursor-pointer",children:(0,i.jsx)("i",{className:"fas fa-times text-white text-xs"})}),(0,i.jsx)("span",{className:"text-xs text-black font-medium",children:"Close"})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex",children:[(0,i.jsxs)("div",{className:"w-32 bg-white border-r border-gray-200 flex flex-col items-center py-2 gap-2 px-12",children:[(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 shadow-md flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-black text-xl font-bold",children:"T"})})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 shadow-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-file-alt text-black text-xl"})})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 shadow-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-mountain text-black text-xl"})})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("button",{className:"w-10 h-10 rounded bg-gray-200 shadow-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-pencil-alt text-black text-xl"})})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("button",{className:"w-10 h-10 rounded bg-gray-200 shadow-md flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-8 h-1.5 bg-black transform rotate-45"})})}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-white shadow-md flex items-center justify-center border border-gray-300",children:(0,i.jsx)("div",{className:"w-8 h-8 rounded-full bg-red-500"})}),(0,i.jsx)("span",{className:"text-xs text-black font-medium mt-1",children:"stroke"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-white shadow-md flex items-center justify-center border border-gray-300",children:(0,i.jsx)("div",{className:"w-8 h-8 rounded-full bg-red-500 relative",children:(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-6 h-0.5 bg-white transform rotate-45"})})})}),(0,i.jsx)("span",{className:"text-xs text-black font-medium mt-1",children:"fill"})]}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("div",{className:"w-10 h-10 rounded bg-gray-200 shadow-md flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-3 h-3 bg-black rounded-full"})})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)("button",{className:"w-10 h-10 rounded bg-gray-200 shadow-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-star text-black text-xl"})})})]}),(0,i.jsx)("div",{className:"flex-1 flex flex-col",children:(0,i.jsx)("div",{className:"flex-1 bg-white relative flex items-center justify-center p-8",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-grid-pattern opacity-20"}),(0,i.jsx)("canvas",{ref:s,className:"border border-gray-200"})]})})})]})]}),(0,i.jsxs)("div",{className:"w-96 bg-white border-l border-gray-200 flex mt-24 ml-16 transition-all duration-300",children:[!w&&(0,i.jsxs)("div",{className:"w-40 bg-gray-50 border-r border-gray-200 flex flex-col",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-black p-4 pb-2",children:"Gallery"}),(0,i.jsxs)("div",{className:"flex flex-col gap-1 px-4 mb-4",children:[(0,i.jsx)("div",{className:"px-3 py-2 rounded font-medium cursor-pointer "+("basic"===C?"bg-blue-200 text-blue-800":"bg-gray-100 text-gray-700"),onClick:()=>_("basic"),children:"Basic"}),(0,i.jsx)("div",{className:"px-3 py-2 rounded font-medium cursor-pointer "+("arrow"===C?"bg-blue-200 text-blue-800":"bg-gray-100 text-gray-700"),onClick:()=>_("arrow"),children:"Arrow"})]}),(0,i.jsx)("div",{className:"mt-auto p-4",children:(0,i.jsx)("i",{className:"fas fa-times text-gray-500 cursor-pointer"})})]}),(0,i.jsxs)("div",{className:(w?"w-full":"flex-1")+" flex flex-col h-full",children:[(0,i.jsx)("div",{className:"flex-1 overflow-y-auto p-4 h-full",children:w?(0,i.jsx)("div",{className:"grid grid-cols-3 gap-4",children:"basic"===C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-14 bg-cyan-400 rounded-full"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Ellipse"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-14 bg-cyan-400 rounded-lg"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Rounded Rectangle"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-14 bg-cyan-400 rounded-full",style:{clipPath:"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Cloud"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-14 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Right Triangle"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-14 bg-cyan-400 rounded"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Rectangle"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-14 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Triangle"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Pentagon"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Heptagon"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Hexagon"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 100% 20%, 100% 80%, 50% 100%, 0% 80%, 0% 20%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Octagon"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsxs)("div",{className:"w-14 h-14 bg-cyan-400 rounded relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-12 h-0.5 bg-white"})}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-0.5 h-12 bg-white"})})]}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Cross"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsxs)("div",{className:"w-14 h-14 bg-cyan-400 rounded relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-12 h-0.5 bg-white"})}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-0.5 h-12 bg-white"})})]}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Cross 2"})]})]}):"arrow"===C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 1"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 2"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 4"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 5"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-5xl",style:{transform:"scaleX(-1)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 7"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-5xl",style:{transform:"scaleX(-1)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 8"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrows-alt-h text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Double Arrow 2"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrows-alt-h text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Double Arrow 3"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-up text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Up Arrow"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-down text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Down Arrow"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-right text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Right Arrow"})]}),(0,i.jsxs)("div",{className:"w-28 h-28 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-long-arrow-alt-left text-cyan-400 text-5xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Long Arrow"})]})]}):null}):(0,i.jsx)("div",{className:"grid grid-cols-2 gap-3",children:"basic"===C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-10 bg-cyan-400 rounded-full"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Ellipse"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-10 bg-cyan-400 rounded-lg"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Rounded Rectangle"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-10 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Right Triangle"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-10 bg-cyan-400 rounded"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Rectangle"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Pentagon"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Heptagon"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 100% 20%, 100% 80%, 50% 100%, 0% 80%, 0% 20%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Octagon"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsxs)("div",{className:"w-10 h-10 bg-cyan-400 rounded relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-8 h-0.5 bg-white"})}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-0.5 h-8 bg-white"})})]}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Cross"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Star 5"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-cyan-400 rounded",style:{clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Star 6"})]})]}):"arrow"===C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 1"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 2"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 4"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 5"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-4xl",style:{transform:"scaleX(-1)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 7"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left text-cyan-400 text-4xl",style:{transform:"scaleX(-1)"}}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Arrow 8"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrows-alt-h text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Double Arrow 2"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrows-alt-h text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Double Arrow 3"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-up text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Up Arrow"})]}),(0,i.jsxs)("div",{className:"w-20 h-20 bg-white rounded-lg shadow-sm flex flex-col items-center justify-center border border-gray-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-down text-cyan-400 text-4xl"}),(0,i.jsx)("span",{className:"text-xs text-black mt-1 text-center",children:"Down Arrow"})]})]}):null})}),(0,i.jsxs)("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between text-xs text-gray-600",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("i",{className:`fas fa-chevron-${w?"right":"left"} cursor-pointer mr-2`,onClick:()=>{S(!w)}}),(0,i.jsx)("span",{children:"View Galleries"})]}),w?(0,i.jsx)("i",{className:"fas fa-chevron-right cursor-pointer"}):null]})]})]})]})]}),h&&!x&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:(0,i.jsxs)("div",{className:(b?"w-full h-full":"w-[270px] h-[300px]")+" flex flex-col transition-all duration-200",style:{backgroundColor:"rgba(240, 240, 240, 0.6)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1.8px solid #59f9ff",borderRadius:"0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"12px"},children:[(0,i.jsxs)("div",{className:"px-2 py-2 flex items-center justify-between text-sm text-black h-[35px] bg-transparent font-normal",style:{paddingLeft:"9px"},children:[(0,i.jsx)("span",{children:"Select Page Orientation"}),(0,i.jsxs)("div",{className:"flex gap-0",children:[(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-gray-300",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>{y(!0),v(!1)},children:"\u2212"}),(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-gray-300",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>v(!b),children:b?"\ud83d\uddd7":"\u25a1"}),(0,i.jsx)("button",{className:"bg-transparent border-none w-[35px] h-[35px] cursor-pointer text-xl text-black flex items-center justify-center font-bold transition-colors duration-200 hover:bg-red-500 hover:text-white",style:{fontFamily:"Segoe UI, sans-serif"},onClick:()=>{d(!1),m("Portrait"),v(!1),y(!1)},children:"\xd7"})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col bg-transparent",style:b?{position:"relative",height:"100%",backgroundColor:"transparent"}:{},children:[(0,i.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center",style:{padding:"30px 20px 20px 20px"},children:(0,i.jsxs)("div",{className:"flex justify-center gap-12",style:{marginBottom:"-20px"},children:[(0,i.jsxs)("div",{className:"flex flex-col items-center cursor-pointer transition-all duration-200",style:{padding:"5px"},onClick:()=>m("Portrait"),children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-3 border-none relative text-white transition-all duration-200",style:{width:"60px",height:"60px",backgroundColor:"Portrait"===p?"#20a8d8":"#9e9e9e",fontSize:"24px"},children:(0,i.jsx)("i",{className:"fas fa-bars",style:{transform:"rotate(90deg)"}})}),(0,i.jsx)("span",{className:"text-gray-800",style:{fontSize:"17px",fontWeight:"normal",fontFamily:"Segoe UI, sans-serif"},children:"Portrait"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center cursor-pointer transition-all duration-200",style:{padding:"5px"},onClick:()=>m("Landscape"),children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-3 border-none relative text-white transition-all duration-200",style:{width:"60px",height:"60px",backgroundColor:"Landscape"===p?"#20a8d8":"#9e9e9e",fontSize:"24px"},children:(0,i.jsx)("i",{className:"fas fa-bars"})}),(0,i.jsx)("span",{className:"text-gray-800",style:{fontSize:"17px",fontWeight:"normal",fontFamily:"Segoe UI, sans-serif"},children:"Landscape"})]})]})}),(0,i.jsx)("div",{className:"text-center bg-transparent",style:{padding:"15px 20px 20px 20px",borderTop:"none"},children:(0,i.jsx)("button",{className:"border-none cursor-pointer text-gray-800 transition-all duration-200 hover:bg-gray-300",style:{backgroundColor:"#dbdbdb",padding:"15px 17px",marginBottom:"-20px",fontSize:"13px",fontFamily:"Segoe UI, sans-serif",fontWeight:"normal"},onClick:()=>{console.log("Creating template:",f,p),d(!1),console.log("Continue clicked. Template:",f,"Orientation:",p),console.log("Template created successfully with orientation:",p)},children:"Continue"})})]})]})}),h&&x&&(0,i.jsx)("div",{className:"fixed bottom-2 left-[85px] px-3 py-1 cursor-pointer text-xs text-gray-800 z-[1500] rounded-t shadow-lg transition-all duration-200",style:{background:"linear-gradient(to bottom, #e8e8e8, #d0d0d0)",border:"1px solid #999",borderBottom:"none",fontFamily:"Segoe UI, sans-serif"},onClick:()=>y(!1),children:(0,i.jsx)("span",{className:"whitespace-nowrap",children:"Select Page Orientation"})})]})},$a=r.p+"static/media/network-graph.8632879de55d1d1a6e4b.png",Ka=()=>(0,i.jsx)("img",{src:$a,alt:"Network Graph",className:"network-graphic",style:{width:"200px",height:"200px",objectFit:"contain"}});const Qa=function(){const[e,t]=(0,n.useState)(!1),[r,s]=(0,n.useState)("templates"),[l,c]=(0,n.useState)({companyCode:"",username:"",password:""}),u=e=>{const{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},h=()=>{t(!1),s("templates")},d=e=>{console.log("Page change requested:",e),s(e)};return e?(console.log("Current page:",r),"store-tags"===r?(0,i.jsx)(a,{onLogout:h,onPageChange:d}):"fabric-canvas"===r?(0,i.jsx)(qa,{onLogout:h,onPageChange:d}):(0,i.jsx)(o,{onLogout:h,onPageChange:d})):(0,i.jsxs)("div",{className:"app",children:[(0,i.jsxs)("div",{className:"background",children:[(0,i.jsx)("div",{className:"stars"}),(0,i.jsx)("div",{className:"tree"})]}),(0,i.jsxs)("div",{className:"login-modal",children:[(0,i.jsx)("div",{className:"modal-header",children:(0,i.jsxs)("div",{className:"header-left",children:[(0,i.jsx)("div",{className:"logo-icon",children:(0,i.jsx)("img",{src:"/logo192.png",alt:"App Logo",style:{width:"24px",height:"24px"}})}),(0,i.jsx)("span",{className:"app-title",children:"iVantage360 Tags - Login"})]})}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("div",{className:"login-content",children:[(0,i.jsx)("div",{className:"left-graphic",children:(0,i.jsx)(Ka,{})}),(0,i.jsx)("div",{className:"login-form",children:(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Login attempt:",l),t(!0)},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"companyCode",children:"Company Code"}),(0,i.jsx)("input",{type:"text",id:"companyCode",name:"companyCode",value:l.companyCode,onChange:u})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"username",children:"Username"}),(0,i.jsx)("input",{type:"text",id:"username",name:"username",value:l.username,onChange:u,className:"focused"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"password",children:"Password"}),(0,i.jsx)("input",{type:"password",id:"password",name:"password",value:l.password,onChange:u})]}),(0,i.jsxs)("div",{className:"button-group",children:[(0,i.jsx)("button",{type:"submit",className:"login-btn",children:"Login"}),(0,i.jsx)("button",{type:"button",className:"forgot-btn",children:"Forgot Password?"})]})]})})]})})]})]})},Ja=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,453)).then(t=>{let{getCLS:r,getFID:n,getFCP:s,getLCP:i,getTTFB:o}=t;r(e),n(e),s(e),i(e),o(e)})};s.createRoot(document.getElementById("root")).render((0,i.jsx)(n.StrictMode,{children:(0,i.jsx)(Qa,{})})),Ja()})();
//# sourceMappingURL=main.3f5f20f0.js.map